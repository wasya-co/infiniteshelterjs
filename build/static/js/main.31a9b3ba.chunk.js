(this.webpackJsonpguyd=this.webpackJsonpguyd||[]).push([[7],{105:function(e,t,n){},111:function(e,t,n){},130:function(e,t,n){e.exports=n(188)},136:function(e,t,n){var a={"./ion-action-sheet-ios.entry.js":[195,11],"./ion-action-sheet-md.entry.js":[196,12],"./ion-alert-ios.entry.js":[197,13],"./ion-alert-md.entry.js":[198,14],"./ion-app_8-ios.entry.js":[199,15],"./ion-app_8-md.entry.js":[200,16],"./ion-avatar_3-ios.entry.js":[201,33],"./ion-avatar_3-md.entry.js":[202,34],"./ion-back-button-ios.entry.js":[203,35],"./ion-back-button-md.entry.js":[204,36],"./ion-backdrop-ios.entry.js":[205,77],"./ion-backdrop-md.entry.js":[206,78],"./ion-button_2-ios.entry.js":[207,37],"./ion-button_2-md.entry.js":[208,38],"./ion-card_5-ios.entry.js":[209,39],"./ion-card_5-md.entry.js":[210,40],"./ion-checkbox-ios.entry.js":[211,41],"./ion-checkbox-md.entry.js":[212,42],"./ion-chip-ios.entry.js":[213,43],"./ion-chip-md.entry.js":[214,44],"./ion-col_3.entry.js":[215,79],"./ion-datetime_3-ios.entry.js":[216,21],"./ion-datetime_3-md.entry.js":[217,22],"./ion-fab_3-ios.entry.js":[218,45],"./ion-fab_3-md.entry.js":[219,46],"./ion-img.entry.js":[220,80],"./ion-infinite-scroll_2-ios.entry.js":[221,81],"./ion-infinite-scroll_2-md.entry.js":[222,82],"./ion-input-ios.entry.js":[223,47],"./ion-input-md.entry.js":[224,48],"./ion-item-option_3-ios.entry.js":[225,49],"./ion-item-option_3-md.entry.js":[226,50],"./ion-item_8-ios.entry.js":[227,51],"./ion-item_8-md.entry.js":[228,52],"./ion-loading-ios.entry.js":[229,53],"./ion-loading-md.entry.js":[230,54],"./ion-menu_3-ios.entry.js":[231,55],"./ion-menu_3-md.entry.js":[232,56],"./ion-modal-ios.entry.js":[233,17],"./ion-modal-md.entry.js":[234,18],"./ion-nav_2.entry.js":[235,29],"./ion-popover-ios.entry.js":[236,19],"./ion-popover-md.entry.js":[237,20],"./ion-progress-bar-ios.entry.js":[238,57],"./ion-progress-bar-md.entry.js":[239,58],"./ion-radio_2-ios.entry.js":[240,59],"./ion-radio_2-md.entry.js":[241,60],"./ion-range-ios.entry.js":[242,61],"./ion-range-md.entry.js":[243,62],"./ion-refresher_2-ios.entry.js":[244,23],"./ion-refresher_2-md.entry.js":[245,24],"./ion-reorder_2-ios.entry.js":[246,31],"./ion-reorder_2-md.entry.js":[247,32],"./ion-ripple-effect.entry.js":[248,83],"./ion-route_4.entry.js":[249,63],"./ion-searchbar-ios.entry.js":[250,64],"./ion-searchbar-md.entry.js":[251,65],"./ion-segment_2-ios.entry.js":[252,66],"./ion-segment_2-md.entry.js":[253,67],"./ion-select_3-ios.entry.js":[254,68],"./ion-select_3-md.entry.js":[255,69],"./ion-slide_2-ios.entry.js":[256,84],"./ion-slide_2-md.entry.js":[257,85],"./ion-spinner.entry.js":[258,27],"./ion-split-pane-ios.entry.js":[259,86],"./ion-split-pane-md.entry.js":[260,87],"./ion-tab-bar_2-ios.entry.js":[261,70],"./ion-tab-bar_2-md.entry.js":[262,71],"./ion-tab_2.entry.js":[263,30],"./ion-text.entry.js":[264,72],"./ion-textarea-ios.entry.js":[265,73],"./ion-textarea-md.entry.js":[266,74],"./ion-toast-ios.entry.js":[267,75],"./ion-toast-md.entry.js":[268,76],"./ion-toggle-ios.entry.js":[269,25],"./ion-toggle-md.entry.js":[270,26],"./ion-virtual-scroll.entry.js":[271,88]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=136,e.exports=r},138:function(e,t,n){var a={"./ion-icon.entry.js":[273,91]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=138,e.exports=r},149:function(e,t,n){},150:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=n(9),s=n(12),l=n(3),m=n(298),u=n(302),d=n(299),p=n(86),E=n.n(p),f=n(300),g=n(301),h=n(16),b=n(29),v=n(11),y=(n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(6)),j=(n(65),[{title:"Homefeed",icon:y.n,url:"/en"},{title:"Cities",icon:y.c,url:"/en/cities"},{title:"My Account",icon:y.o,url:"/en/account"},{title:"Account2",icon:y.o,url:"/en/account2"},{title:"Login",icon:y.q}]),k=function(){return r.a.createElement(l.i,{contentId:"main",type:"overlay"},r.a.createElement(l.b,null,r.a.createElement(l.l,{color:"primary"},r.a.createElement(l.k,null,"Menu"))),r.a.createElement(l.a,null,r.a.createElement("img",{src:"/assets/hero.png"}),r.a.createElement(l.g,{id:"inbox-list"},j.map((function(e,t){return r.a.createElement(l.j,{key:t,autoHide:!1},r.a.createElement(l.e,{routerLink:e.url,routerDirection:"none",lines:"none",detail:!1},r.a.createElement(l.c,{slot:"start",ios:e.icon,md:e.icon}),r.a.createElement(l.f,null,e.title)))})))))},w=function(){return r.a.createElement(l.i,{type:"overlay"},r.a.createElement(l.b,null,r.a.createElement(l.l,{color:"primary"},r.a.createElement(l.k,null,"Menu"))),r.a.createElement(l.a,null,r.a.createElement("img",{src:"/assets/hero.png"}),r.a.createElement("h1",null,"what's here?")))},N=Object(h.i)((function(e){var t=e.created_at,n=e.username,a=e.city,c=e.tags,o=void 0===c?[]:c;return r.a.createElement("p",{className:"metaline"},r.a.createElement("span",{className:"date"}," ",(t||"").substring(0,10)," "),n&&r.a.createElement(r.a.Fragment,null,"by ",r.a.createElement("span",{className:"user"}," ",n," ")),a&&r.a.createElement(r.a.Fragment,null,"in ",r.a.createElement("span",{className:"city",onClick:function(){e.history.push("/en/cities/travel-to/".concat(a.slug,"/show/newsfeed"))}}," ",a.name," ")),o&&o.map((function(e,t){return r.a.createElement("span",{key:t,className:"tags"},e.name)})))})),O=function(e){var t=e.rate,n=Object(a.useState)([]),c=Object(i.a)(n,2),o=c[0],s=c[1],m={0:y.x,1:y.w,2:y.v};return Object(a.useEffect)((function(){for(var e=new Array(5).fill(0),n=0;t>0;)e[n]=t<1?1:2,t--,n++;s(e)}),[]),r.a.createElement("span",{className:"rating"},o.map((function(e,t){return r.a.createElement(l.c,{key:t,className:"stars",icon:m[e]})})))},_={apiOrigin:"https://manager.piousbox.com",domain:"tgm.piousbox.com"},x={doUnlock:function(e){var t=e.kind,n=e.id,a=(e.jwt_token,JSON.parse(localStorage.getItem("current_user"))||{});if(!a)throw"unauthorized";return"/api/payments/unlock?kind=".concat(t,"&id=").concat(n,"&jwt_token=").concat(a.jwt_token)},longTermTokenPath:"/api/users/long_term_token",myAccount:"/api/my/account",myVideosPath:"/api/my/videos",payments2:"/api/payments2",reportsGet:function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},n="";return t&&(n="jwt_token=".concat(t.jwt_token)),"".concat(_.apiOrigin,"/api/reports/view/").concat(e,"?").concat(n)},getCities:function(){return I.get("".concat(_.apiOrigin,"/api/cities")).then((function(e){return e.data}))},getCity:function(e){return I.get("".concat(_.apiOrigin,"/api/cities/view/").concat(e))},getSite:function(e){return function(e){var t=localStorage.getItem("jwtToken");return I.get(e,{params:{jwt_token:t}}).then((function(e){return e.data}))}("".concat(_.apiOrigin,"/api/sites/view/").concat(e))}},S={cityPath:function(e){return"/en/cities/travel-to/".concat(e,"/show/newsfeed")}},C=n(115),T={baseURL:_.apiOrigin},I=n.n(C).a.create(T);function F(){var e=Object(s.a)(["\n  height: 100vh;\n\n\n"]);return F=function(){return e},e}function L(){var e=Object(s.a)(["\n"]);return L=function(){return e},e}v.a.div(L());var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(n="string"===typeof n?n:t.replace(/\W/g,"")).length>0&&(window[n]=e),console.log("+++ ".concat(t,":"),e)},M=v.a.div(F()),D=(n(105),function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)([]),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(a.useState)(!1),E=Object(i.a)(p,2),f=E[0],g=E[1];return Object(a.useEffect)((function(){g(!0),x.getCities().then((function(e){g(!1),d(e),o(e)}))}),[]),r.a.createElement(a.Fragment,null,r.a.createElement(M,{className:"cities"},r.a.createElement("h1",{className:"heading"},"Cities"),r.a.createElement(b.b,{to:"/en/account"},"Account"),r.a.createElement("div",{className:"filter-section"},r.a.createElement("input",{className:"filter-input",onChange:function(e){var t=c.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.trim().toLowerCase())>-1}));d(t)}}),r.a.createElement(l.c,{className:"filter-icon",icon:y.j})),r.a.createElement("div",{className:"bookmark-section"},r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",onChange:function(){},checked:!0}),r.a.createElement("span",{className:"slider round"})),r.a.createElement("span",{className:"bookmark-text"},"Show only bookmarked")),r.a.createElement("div",{className:"container"},u.map((function(e,t){return r.a.createElement("div",{key:t,className:"cities"},r.a.createElement("div",{className:"img-section"},r.a.createElement("span",{className:"bookmark"},r.a.createElement(l.c,{className:"bookmark-icon",icon:y.b})),r.a.createElement("img",{className:"city-img",src:e.photo}),r.a.createElement(b.b,{to:S.cityPath(e.slug)},r.a.createElement("span",{className:"city-title"},e.name))),r.a.createElement("div",{className:"content-section"},r.a.createElement("div",{className:"content-item"},r.a.createElement(l.c,{className:"icon",icon:y.n}),r.a.createElement("span",{className:"count"},e.n_reports)),r.a.createElement("div",{className:"content-item"},r.a.createElement(l.c,{className:"icon",icon:y.k}),r.a.createElement("span",{className:"count"},e.n_galleries)),r.a.createElement("div",{className:"content-item"},r.a.createElement(l.c,{className:"icon",icon:y.y}),r.a.createElement("span",{className:"count"},e.n_videos))))}))),"\xa0"),r.a.createElement(l.h,{isOpen:f,onDidDismiss:function(){return g(!1)},message:"Please wait...",duration:5e3}))}),A=n(303);n(66);function J(){var e=Object(s.a)([""]);return J=function(){return e},e}function H(){var e=Object(s.a)(["\n  position: absolute;\n  left: 200px;\n  top: 0;\n"]);return H=function(){return e},e}function B(){var e=Object(s.a)(["\n  width: 200px;\n"]);return B=function(){return e},e}function G(){var e=Object(s.a)(["\n  position: relative;\n"]);return G=function(){return e},e}function U(){var e=Object(s.a)(["\n"]);return U=function(){return e},e}function V(){var e=Object(s.a)(["\n  position: relative;\n  padding-top: 100%;\n  overflow: hidden;\n  z-index: 10;\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n\n  width: 100px;\n  height: 100px;\n"]);return V=function(){return e},e}function R(){var e=Object(s.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: pointer;\n"]);return R=function(){return e},e}var W=Object(v.a)(A.a)(R()),z=(v.a.div(V()),v.a.div(U()),v.a.div(G())),Y=v.a.img(B()),q=v.a.img(H()),K=v.a.img(J()),X=function(e){P(e,"NewsitemGallery");var t=e.gallery,n=Object(h.g)(),a=function(){n.push("/en/galleries/show/".concat(t.slug))};return r.a.createElement(W,{boxShadow:2,onClick:a},r.a.createElement(z,null,!1,t.photos[0]&&r.a.createElement(Y,{src:t.photos[0].thumb_url}),t.photos[1]&&r.a.createElement(q,{src:t.photos[1].thumb_url}),t.photos[2]&&r.a.createElement(K,{src:t.photos[2].thumb_url}),!1),r.a.createElement("div",null,r.a.createElement("p",{className:"title routable",onClick:a},r.a.createElement("img",{className:"icon",src:"/assets/newsfeed/photos_icon.png",alt:""}),r.a.createElement("span",{className:"title-heading"},t.name)),r.a.createElement(N,{item:t}),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}})))},$=n(7),Q=n.n($),Z=n(23),ee=n(73),te=n.n(ee),ne=function(e){if(P(e,"ItemIcon"),e.isPurchased)return r.a.createElement("img",{className:"icon",src:"/assets/icons/glasses.png",alt:""});if(e.premiumTier>0)return r.a.createElement("img",{className:"icon",src:"/assets/icons/gem.png",alt:""});switch(e.kind){case"Report":return r.a.createElement("img",{className:"icon",src:"/assets/icons/report.png",alt:""});default:return"unknown kind"}},ae=function(e){P(e,"NewsitemReport");var t=e.newsitem,n=t.reportname,c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1],m=Object(h.g)(),u=function(){var e=Object(Z.a)(Q.a.mark((function e(){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.doUnlock({kind:"Report",id:t.report_id}),e.next=3,I.post("".concat(_.apiOrigin).concat(n));case 3:a=e.sent,P(a,"result");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"newsitems-report"},r.a.createElement("div",null,r.a.createElement("p",{className:"title"},r.a.createElement(ne,{kind:"Report",isPurchased:t.is_purchased,premiumTier:t.premium_tier}),r.a.createElement("span",{className:"title-heading",onClick:function(e){t.is_premium&&!t.is_purchased?l(!0):m.push("/en/reports/show/".concat(n))}},t.name)),r.a.createElement(N,{item:t}),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}}))),r.a.createElement(te.a,{ariaHideApp:!1,isOpen:s},r.a.createElement("h1",null,"Unlock this report (1 unlock)? ",r.a.createElement("button",{onClick:function(){return l(!1)}},"[x]")),r.a.createElement("button",{onClick:u},"Do it")))};function re(){var e=Object(s.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n"]);return re=function(){return e},e}var ce=Object(v.a)(A.a)(re()),oe=function(e){var t=e.data,n=e.icon,a=void 0===n?"/assets/newsfeed/video_icon.svg":n;return r.a.createElement(ce,{boxShadow:2},r.a.createElement("div",{className:"image-section"},t.youtube_id?r.a.createElement("iframe",{className:"iframe",width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(t.youtube_id),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):r.a.createElement("video",{width:"100%",preload:"metadata",height:"auto",controls:!0},r.a.createElement("source",{src:t.url,type:"video/mp4"}))),r.a.createElement("div",null,r.a.createElement("p",{className:"title"},r.a.createElement("img",{className:"icon",src:a}),r.a.createElement("span",{className:"title-heading"},t.name)),r.a.createElement(N,{item:t}),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}})))};function ie(){var e=Object(s.a)(["\n  margin-bottom: 2em;\n"]);return ie=function(){return e},e}var se={1:"/assets/newsfeed/sunglass.png",2:"/assets/newsfeed/gem_premium.png"},le=v.a.div(ie()),me=function(e){P(e,"Newsitems");var t=e.newsitems;return t&&t.length?r.a.createElement(le,null,t.map((function(e,t){var n=e.premium_tier||0,a=se[n];return r.a.createElement("div",{key:t,className:"items premium-".concat(n)},"gallery"===e.item_type&&r.a.createElement(X,{gallery:e,icon:a}),"report"===e.item_type&&r.a.createElement(ae,{newsitem:e}),"video"===e.item_type&&r.a.createElement(oe,{data:e,icon:a}))}))):r.a.createElement("div",null,"No Newsitems")},ue=(n(180),function(e){var t=Object(a.useState)(JSON.parse(JSON.stringify(e.data||[]))),n=Object(i.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",{className:"venues-section"},r.a.createElement("div",null,r.a.createElement("div",{className:"filter-section"},r.a.createElement("input",{className:"filter-input",onChange:function(t){var n=e.data.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));o(n)}}),r.a.createElement(l.c,{className:"filter-icon",icon:y.j}))),r.a.createElement("div",{className:"container"},c.map((function(e,t){return r.a.createElement("div",{key:t,className:"venues"},r.a.createElement("div",{className:"image-section"},r.a.createElement("img",{src:e.photo})),r.a.createElement("div",{className:"info-section"},r.a.createElement("h4",{className:"title"},e.name),r.a.createElement("div",{className:"rating-section"},r.a.createElement(O,{rate:3.5}),r.a.createElement("span",{className:"reviews"},"5 reviews")),r.a.createElement("div",{className:"tags-section"},e.tags.map((function(e,t){return r.a.createElement("span",{key:t,className:"tags"},e.name)}))),r.a.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.subhead}}),r.a.createElement("p",{className:"address"},"111 N Main St., New York, NY 11223")),r.a.createElement("img",{className:"forward-arrow",src:"/assets/16x16/arrow-right.png"}))}))))}),de=function(e){P(e,"CitiesShow");var t=e.match,n=Object(h.h)(),c=Object(a.useState)(null),o=Object(i.a)(c,2),s=o[0],m=o[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),p=d[0],E=d[1];return Object(a.useEffect)((function(){E(!0),x.getCity(t.params.name).then((function(e){m(e.data.city),E(!1)}))}),[t.params.name]),r.a.createElement(M,null,s&&r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"city-show"},r.a.createElement("header",{style:{backgroundImage:"url(".concat(s.hero_img,"}"),backgroundSize:"contain"}}),r.a.createElement("section",{className:"section-one"},r.a.createElement(l.c,{icon:y.p,className:"location"}),r.a.createElement("h1",{className:"city-name"},s.name),r.a.createElement("div",{className:"status"},r.a.createElement("div",{className:"status-grid"},r.a.createElement(l.c,{className:"info-icon",icon:y.n}),r.a.createElement("span",{className:"numbers"},s.n_reports)),r.a.createElement("div",{className:"status-grid"},r.a.createElement(l.c,{className:"info-icon",icon:y.k}),r.a.createElement("span",{className:"numbers"},s.n_galleries)),r.a.createElement("div",{className:"status-grid mid"},r.a.createElement(l.c,{className:"info-icon",icon:y.y}),r.a.createElement("span",{className:"numbers "},s.n_videos)))),s.tags&&r.a.createElement("section",{className:"tags-section"},r.a.createElement("span",{className:"btn delete-btn"},r.a.createElement(l.c,{name:"close"}," ")," deselect all"),s.tags.map((function(e,t){return r.a.createElement("span",{className:"btn",key:t},e.name)}))),r.a.createElement("section",{className:"section-three"},r.a.createElement("div",{className:"menu-option",onClick:function(){}},r.a.createElement("img",{src:"/assets/newsfeed-icon.svg",alt:"Newsfeed"}),r.a.createElement("p",{className:"".concat(n.pathname.includes("newsfeed")?"selected":""," menu-item")},"Newsfeed")),r.a.createElement("div",{className:"menu-option",onClick:function(){}},r.a.createElement("img",{src:"/assets/venue-icon.svg",alt:"Venues"}),r.a.createElement("p",{className:"".concat(n.pathname.includes("venues")?"selected":""," menu-item")},"Venues"))),r.a.createElement("section",null,r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"".concat(t.url,"/venues"),render:function(){return r.a.createElement(ue,{data:s.venues})}}),r.a.createElement(h.b,{exact:!0,path:"".concat(t.url,"/newsfeed"),render:function(){return r.a.createElement(me,{newsitems:s.newsitems})}}))))),r.a.createElement(l.h,{isOpen:p,onDidDismiss:function(){return E(!1)},message:"Please wait...",duration:5e3}),"\xa0")},pe=(n(181),function(e){P(e,"GalleriesShow");var t=e.match,n=Object(a.useState)(!1),c=Object(i.a)(n,2),o=(c[0],c[1]),s=Object(a.useState)({}),m=Object(i.a)(s,2),u=m[0],d=m[1];return Object(a.useEffect)((function(){o(!0);var e=localStorage.getItem("jwtToken");I.get("/api/galleries/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){o(!1),d(e.data.gallery)}))}),[]),r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"gallery-show"},r.a.createElement("div",{className:"narrow"},r.a.createElement("h1",{className:"heading"},r.a.createElement("img",{src:"/assets/newsfeed/photos_icon.png"}),r.a.createElement("span",{className:"title"},u.name)),r.a.createElement(N,{item:u}),r.a.createElement("div",{className:"thumbs"},u.photos&&u.photos.map((function(e,t){return r.a.createElement("div",{className:"card",key:t},r.a.createElement("div",{className:"card-inner"},r.a.createElement(l.d,{src:e.thumb_url})))})))),r.a.createElement("div",{className:"full-img-section"},u.photos&&u.photos.map((function(e,t){return r.a.createElement("div",{className:"item",key:t},r.a.createElement("img",{src:e.large_url}))})))))}),Ee=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1];return Object(a.useEffect)((function(){d(!0);var e=localStorage.getItem("jwtToken");I.get("/api/my/galleries",{params:{jwt_token:e}}).then((function(e){P(e.data,"MyGalleries data"),o(e.data),d(!1)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.h,{isOpen:u,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3}),c&&c.length&&c.map((function(e){return r.a.createElement(X,{key:e.id,data:e})})))},fe=function(e){P(e,"ReportsShow");var t=Object(a.useState)({}),n=Object(i.a)(t,2),c=n[0],o=n[1],s=(JSON.parse(localStorage.getItem("current_user")),function(){var t=Object(Z.a)(Q.a.mark((function t(){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:P(null,"getting report..."),I.get(x.reportsGet(e.match.params.slug)).then((function(e){return e.data})).then((function(e){P(e,"got report"),o(e.report)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(a.useEffect)((function(){s()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Report ",c.name),r.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:c.description}}))};n(182);function ge(){var e=Object(s.a)(["\n  padding: 0;\n  margin: 0;\n  height: 100vh;\n"]);return ge=function(){return e},e}function he(){var e=Object(s.a)(["\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n"]);return he=function(){return e},e}function be(){var e=Object(s.a)(["\n  overflow: auto;\n"]);return be=function(){return e},e}v.a.div(be());var ve=v.a.div(he()),ye=function(){return r.a.createElement(ve,null,r.a.createElement("img",{className:"image",src:"/assets/hero.png"}))},je=v.a.div(ge()),ke=function(e){P(e,"SitesShow");var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1];return Object(a.useEffect)((function(){d(!0),x.getSite(_.domain).then((function(e){P(e,"data"),o(e.newsitems)})).catch((function(e){P(e,"e1")})).finally((function(){d(!1)}))}),[]),r.a.createElement(a.Fragment,null,r.a.createElement(je,null,r.a.createElement(ye,null),r.a.createElement(me,{newsitems:c}),"\xa0"),r.a.createElement(l.h,{isOpen:u,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3}))},we=n(49),Ne=(n(183),n(296)),Oe=n(295),_e=(n(111),we.a.FacebookLogin),xe=["email"],Se=Object(Oe.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),Ce=function(e){P(e,"Account");var t=Se(),n=function(){var e=Object(Z.a)(Q.a.mark((function e(t){var n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(t,"doLogin"),e.next=3,_e.login({permissions:xe});case 3:(n=e.sent).accessToken?(P(n.accessToken.token,"Facebook access token"),I.post("".concat(_.apiOrigin).concat(x.longTermTokenPath),{accessToken:n.accessToken.token}).then((function(e){P(e,"microsites3 response"),localStorage.setItem("jwtToken",e.data.jwt_token),localStorage.setItem("current_user",JSON.stringify(e.data))}))):P("canceled");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement(Ne.a,{container:!0,spacing:2,className:t.root},r.a.createElement(Ne.a,{item:!0,className:t.redBorder,xs:12},r.a.createElement(Ne.a,{container:!0},r.a.createElement(Ne.a,{item:!0,xs:6},r.a.createElement("img",{src:"/assets/accounts/default-avatar.png",alt:"profile pic"})),r.a.createElement(Ne.a,{item:!0,xs:6},r.a.createElement("h4",null,"Jamie Kavanaugh 22"),r.a.createElement("img",{src:"/assets/accounts/edit.png",alt:"edit pic"}),r.a.createElement("p",null,"Jamie_kv@gmail.com")))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:n},"Login"),r.a.createElement("button",{onClick:function(){localStorage.removeItem("jwtToken"),localStorage.removeItem("current_user"),P("logged out")}},"Clear Token"),r.a.createElement("ul",null,r.a.createElement(b.b,{to:"/en/account/my/galleries"},"My Galleries"),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return e.history.push("/en/account/my/videos")}},"My Videos")))))},Te=(we.a.FacebookLogin,Object(Oe.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),n(53)),Ie=n(117),Fe=Object(Ie.a)("pk_test_UnB4uh0vErYIishvckNYtF4c"),Le=function(e){return P(e,"Login component"),r.a.createElement(a.Fragment,null,r.a.createElement("buttom",null,"do login"))},Pe=function(e){P(e,"MyAccountWidget");var t=JSON.parse(localStorage.getItem("current_user"))||{},n=Object(Te.useStripe)(),c=Object(Te.useElements)(),o=Object(a.useState)(!1),s=Object(i.a)(o,2),l=s[0],m=s[1],u=function(){var e=Object(Z.a)(Q.a.mark((function e(a){var r,o;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n&&c){e.next=3;break}return e.abrupt("return");case 3:return c.getElement(Te.CardElement),e.next=6,I.get("".concat(_.apiOrigin).concat(x.payments2,"?jwt_token=").concat(t.jwt_token));case 6:return r=(r=e.sent).data.client_secret,P(r,"client_secret"),e.next=11,n.confirmCardPayment(r,{payment_method:{card:c.getElement(Te.CardElement)}});case 11:if(o=e.sent,P(o,"result"),!o.error){e.next=17;break}P(o.error.message,"error message"),e.next=24;break;case 17:if("succeeded"!==o.paymentIntent.status){e.next=23;break}return e.next=20,I.get("".concat(_.apiOrigin).concat(x.myAccount,"?jwt_token=").concat(t.jwt_token));case 20:e.sent,e.next=24;break;case 23:P("something else");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,t.email?t.email:r.a.createElement(Le,null)," \xa0 [\xa0","number"===typeof t.n_stars?t.n_stars:"?"," stars\xa0]\xa0 \xa0",r.a.createElement("button",{onClick:function(){return m(!0)}},"buy"),r.a.createElement(te.a,{isOpen:l,ariaHideApp:!1,style:{width:"500px"}},r.a.createElement("h1",null,"Purchase this",r.a.createElement("span",{onClick:function(){P("clicking..."),m(!1)}},"[x]")),r.a.createElement("form",{onSubmit:u},r.a.createElement(Te.CardElement,null),r.a.createElement("button",{type:"submit",disabled:!n},"Pay"))))},Me=function(e){return r.a.createElement(Te.Elements,{stripe:Fe},r.a.createElement(Pe,e))};function De(){var e=Object(s.a)(["\n  border-bottom: 1px solid red;\n"]);return De=function(){return e},e}var Ae=Object(Oe.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),Je=v.a.div(De()),He=function(e){P(e,"Video");var t=e.item;return r.a.createElement(Je,{key:e.idx},r.a.createElement("h5",null,"Video ",t.name),r.a.createElement("p",null,"created ",t.created_at),r.a.createElement("video",{controls:!0,preload:"metadata",type:"video/mp4",src:t.video_url,style:{maxWidth:"500px",maxHeight:"90vh"}}))},Be=function(){P(_,"Videos component"),console.log(JSON.stringify(_));var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=localStorage.getItem("jwtToken"),s=Ae();return Object(a.useEffect)((function(){P("posting..."),I.post(x.myVideosPath,{jwtToken:o}).then((function(e){return e.data})).then((function(e){var t=e.videos;P(t,"data"),c(t)}))}),[]),r.a.createElement(m.a,{maxWidth:"md"},r.a.createElement(Ne.a,{container:!0,className:s.root},r.a.createElement(Ne.a,{item:!0,xs:12},r.a.createElement("h2",null,"My Videos")),r.a.createElement(Ne.a,{item:!0,xs:12},n&&n.map((function(e,t){return r.a.createElement(He,{key:t,item:e})})))))};function Ge(){var e=Object(s.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  background: white;\n\n  height: 50px;\n"]);return Ge=function(){return e},e}function Ue(){var e=Object(s.a)(["\n  height: auto;\n"]);return Ue=function(){return e},e}function Ve(){var e=Object(s.a)(["\n  border: 2px solid red;\n  height: 50px;\n\n  position: absolute;\n  bottom: 0;\n"]);return Ve=function(){return e},e}function Re(){var e=Object(s.a)(["\n  background: #dedede;\n  height: auto;\n  overflow: auto;\n"]);return Re=function(){return e},e}var We=v.a.div(Re()),ze=v.a.div(Ve()),Ye=Object(v.a)(m.a)(Ue()),qe=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(h.g)();return console.log(o,"history 2"),r.a.createElement(a.Fragment,null,r.a.createElement(ze,null,r.a.createElement(d.a,{"aria-label":"open drawer",onClick:function(){return c(!0)},edge:"start",className:"menu-btn"},r.a.createElement(E.a,null)),r.a.createElement(w,null)),r.a.createElement(u.a,{anchor:"bottom",elevation:1,open:n,onClose:function(){return c(!1)},BackdropProps:{invisible:!0},variant:"persistent"},r.a.createElement("div",null,r.a.createElement(Me,null),r.a.createElement("div",{onClick:function(){return c(!1)}},"[X]"))))},Ke=v.a.div(Ge()),Xe=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(h.g)();return console.log(o,"history"),r.a.createElement(a.Fragment,null,r.a.createElement(Ke,null,r.a.createElement(d.a,{"aria-label":"open drawer",onClick:function(){return c(!0)},edge:"start",className:"menu-btn"},r.a.createElement(E.a,null)),r.a.createElement(Me,null),r.a.createElement(k,null)),r.a.createElement(u.a,{anchor:"left",open:n,onClose:function(){return c(!1)}},r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(g.a,{button:!0,key:1},r.a.createElement("span",{onClick:function(){c(!1),o.push("/en")}},"Newsfeed")),r.a.createElement(g.a,{button:!0,key:2},r.a.createElement("span",{onClick:function(){c(!1),o.push("/en/cities")}},"Cities")),r.a.createElement(g.a,{button:!0,key:3},r.a.createElement("span",{onClick:function(){c(!1),o.push("/en/account")}},"Account"))))))},$e=function(){return r.a.createElement(b.a,null,r.a.createElement(Xe,null),r.a.createElement(We,null,r.a.createElement(Ye,{maxWidth:"md"},r.a.createElement(h.d,{id:"main",main:!0},r.a.createElement(h.a,{exact:!0,from:"/",to:"/en"}),r.a.createElement(h.b,{exact:!0,path:"/en"},r.a.createElement(ke,null)),r.a.createElement(h.b,{exact:!0,path:"/en/account",component:Ce}),r.a.createElement(h.b,{exact:!0,path:"/en/account/my/videos",component:Be}),r.a.createElement(h.b,{exact:!0,path:"/en/account/my/galleries",component:Ee}),r.a.createElement(h.b,{exact:!0,path:"/en/cities",component:D}),r.a.createElement(h.b,{path:"/en/cities/travel-to/:name/show",component:de}),r.a.createElement(h.b,{exact:!0,path:"/en/galleries/show/:slug",component:pe}),r.a.createElement(h.b,{exact:!0,path:"/en/reports/show/:slug",component:fe})))),r.a.createElement(qe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement($e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},65:function(e,t,n){},66:function(e,t,n){}},[[130,9,10]]]);
//# sourceMappingURL=main.31a9b3ba.chunk.js.map