{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../config/environments/production/config.jsx","shared/Api.jsx","shared/AppRouter.jsx","shared/Collapsible.jsx","shared/request.jsx","shared/index.jsx","components/users/Account.jsx","components/users/MyAccountWidget.jsx","components/application/BottomDrawer.jsx","components/application/Menu.jsx","components/application/MenuBottom.jsx","components/application/MenuLeft.jsx","components/application/Metaline.jsx","components/application/Rating.jsx","components/application/MapuiLayout.jsx","components/cities/CitiesList.jsx","components/newsitems/NewsitemGallery.jsx","components/newsitems/NewsitemReport.jsx","components/newsitems/NewsitemVideo.jsx","components/newsitems/Newsitems.jsx","components/newsitems/index.js","components/venues/Venues.jsx","components/cities/CitiesShow.jsx","components/galleries/GalleriesShow.jsx","components/galleries/MyGalleries.jsx","components/locations/Breadcrumbs.jsx","components/locations/LocationsShowMobile.jsx","components/locations/LocationsShow.jsx","components/reports/ReportsShow.jsx","components/sites/SitesShow.jsx","components/videos/Videos.jsx","AppMobile.jsx","serviceWorker.js","index_android.jsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","Api","doUnlock","kind","jwt_token","localStorage","getItem","getMyAccount","request","post","loginPath","longTermTokenPath","myAccount","myVideosPath","paymentsPath","reportsGet","a","currentUser","JSON","parse","jwt","config","apiOrigin","getCities","get","r","data","getCity","slug","getSite","url","token","C","params","res","_getWithToken","AppRouter","cityPath","Gt","Lt","Label","styled","div","Root","W1","Collapsible","children","props","logg","ctx","useContext","CollapsibleContext","collapsibles","setCollapsibles","folded","onClick","label","settings","baseURL","axios","create","Box","_Box","current_user","layout_onecol","layout_mapui","React","createContext","b","c","replace","length","window","console","log","S","TwofoldContext","Wrapper","FacebookLogin","Plugins","FACEBOOK_PERMISSIONS","useStyles","makeStyles","theme","paper","padding","spacing","textAlign","color","palette","text","secondary","root","flexGrow","overflow","height","Account","classes","useState","email","setEmail","password","setPassword","doLogin","login","permissions","result","accessToken","resp","setItem","stringify","err","doLogin2","Grid","container","className","item","xs","src","alt","to","history","push","removeItem","type","value","onChange","target","stripePromise","loadStripe","Login","p","borderWidth","W","MyAccountWidget","stripe","useStripe","elements","useElements","purchaseModalIsOpen","setPurchaseModalIsOpen","handleSubmit","event","preventDefault","getElement","CardElement","jwtToken","client_secret","confirmCardPayment","payment_method","card","error","message","paymentIntent","status","response","n_unlocks","isOpen","ariaHideApp","style","width","onSubmit","disabled","WrappedMyAccountWidget","BottomWrapper","ButtonWrapper","BottomDrawer","bottomDrawerOpen","layout","setBottomDrawerOpen","IconButton","aria-label","edge","fontSize","Drawer","anchor","elevation","open","onClose","BackdropProps","invisible","variant","position","left","bottom","appPages","title","icon","newspaperOutline","bus","person","powerOutline","Menu","contentId","appPage","index","key","autoHide","routerLink","routerDirection","lines","detail","slot","ios","md","MenuBottom","LeftWrapper","W2","MenuLeft","drawerOpen","setDrawerOpen","loading","useHistory","List","ListItem","button","n_stars","withRouter","created_at","username","city","tags","substring","name","tag","i","Rating","rate","rating","setRating","iconMapping","0","starOutline","1","starHalf","2","star","useEffect","Array","fill","MapuiContainer","bottomDrawerHeight","MapuiLayout","Cities","cities","setCities","filteredCities","setFilteredCities","showLoading","setShowLoading","ev","filter","toLowerCase","indexOf","trim","funnel","checked","bookmark","photo","n_reports","image","n_galleries","videocam","n_videos","onDidDismiss","duration","Images","ImageLarge","img","ImageThumb1","ImageThumb2","NewsitemGallery","gallery","navigateToGallery","boxShadow","photos","thumb_url","dangerouslySetInnerHTML","__html","subhead","ItemIcon","isPurchased","premiumTier","NewsitemReport","newsitem","reportname","setItemToUnlock","is_premium","is_purchased","premium_tier","NewsitemVideo","youtube_id","frameBorder","allow","allowFullScreen","preload","controls","ICONS","Newsitems","newsitems","idx","item_type","NewsitemContainer","Venues","filteredVenues","setFilteredVenues","venues","venue","includes","CitiesShow","match","location","useLocation","setCity","backgroundImage","hero_img","backgroundSize","pin","pathname","exact","path","render","GalleriesShow","setGallery","ph","large_url","MyGalleries","galleries","setGalleries","g","B","B1","Breadcrumbs","out","breadcrumbs","textDecoration","_Description","Description","description","ZoomCtrlRoot","ZoomCtrl","zoom","setZoom","Div1","Div3","Map2","div1Ref","useRef","current","scrollIntoView","block","markers","m","top","y","x","img_path","display","maxWidth","w","maxHeight","h","ref","Markers","margin","title_img_path","Row","LocationsShow","setLoading","setLocation","mountedRef","ReportsShow","getReport","report","_Hero","Hero","SitesShow","setNewsitems","domain","redBorder","border","VideoItem","Video","video","video_url","Videos","videos","setVideos","v","__Container","_Container","App","setLayout","itemToUnlock","Container","Route","report_id","Provider","main","from","component","CitiesList","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"yLAAA,IAAIA,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B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","file":"static/js/main.76875f7b.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t199,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t200,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t201,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t202,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t203,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t204,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t205,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t206,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t207,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t208,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t209,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t210,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t211,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t212,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t213,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t214,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t215,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t216,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t217,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t218,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t219,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t220,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t221,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t222,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t223,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t224,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t225,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t226,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t227,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t228,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t229,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t230,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t231,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t232,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t233,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t234,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t235,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t236,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t237,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t238,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t239,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t240,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t241,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 165;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t242,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 167;\nmodule.exports = webpackAsyncContext;","\nexport default {\n  \"apiOrigin\": \"https://manager.piousbox.com\",\n  \"domain\": \"tgm.piousbox.com\",\n};\n","\nimport config from \"config\";\nimport { C, logg, request } from \"$shared\";\n\nconst _getWithToken = (url) => {\n  const token = localStorage.getItem(C.jwt_token);\n  return request.get(url, { params: { jwt_token: token } }).then((res) => {\n    return res.data;\n  });\n};\n\nconst Api = {\n\n  doUnlock: ({ kind, id }) => {\n    const jwt_token = localStorage.getItem('jwt_token')\n    return `/api/payments/unlock?kind=${kind}&id=${id}&jwt_token=${jwt_token}`;\n  },\n\n  getMyAccount: () => {\n    const jwt_token = localStorage.getItem('jwt_token')\n    return request.post(`/api/my/account`, {\n      jwt_token: jwt_token,\n    })\n  },\n\n  loginPath: '/api/users/login.json',\n  longTermTokenPath: '/api/users/long_term_token',\n\n  myAccount: () => \"/api/my/account\",\n  myVideosPath: \"/api/my/videos\",\n\n  paymentsPath: \"/api/payments2\",\n\n  reportsGet: (a) => {\n    const currentUser = JSON.parse(localStorage.getItem(\"current_user\")) || {};\n    let jwt = \"\";\n    if (currentUser) {\n      jwt = `jwt_token=${currentUser.jwt_token}`\n    }\n    return `${config.apiOrigin}/api/reports/view/${a}?${jwt}`;\n  },\n\n  getCities: ()   => request.get(`${config.apiOrigin}/api/cities`).then((r) => r.data),\n  getCity: (slug) => request.get(`${config.apiOrigin}/api/cities/view/${slug}`),\n\n  getSite: (slug) => {\n    return _getWithToken(`${config.apiOrigin}/api/sites/view/${slug}`)\n  },\n\n}\n\nexport default Api;\n","\nconst AppRouter = {\n  cityPath: (slug) => `/en/cities/travel-to/${slug}/show/newsfeed`,\n};\n\nexport default AppRouter;\n","\nimport React, { Fragment as F, useContext, useEffect, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { CollapsibleContext, logg } from '$shared'\n\nconst Gt = () => <span>&nbsp;&gt;&nbsp;&nbsp;</span>\nconst Lt = () => <span>&nbsp;&lt;&nbsp;&nbsp;</span>\nconst Label = styled.div`\n  display: flex;\n`;\nconst Root = styled.div`\n  background: #dedede;\n  margin: .5em;\n  padding: .5em;\n\n  margin-bottom: 1em;\n`;\nconst W1 = styled.div`\n  // border: 2px solid red;\n\n  max-height: 100vh;\n`;\n\nconst Collapsible = ({ children, ...props }) => {\n  logg(props, 'Collapsible')\n  const ctx = useContext(CollapsibleContext);\n  logg(ctx, 'ctx')\n  if (!ctx) { return null; }\n  const { collapsibles, setCollapsibles } = ctx;\n\n  const doToggle = () => {\n    setCollapsibles({ ...collapsibles, [props.slug]: !collapsibles[props.slug] })\n  }\n\n  const folded = !!collapsibles[props.slug]\n\n  return <Root>\n    <Label onClick={doToggle} >{folded ? <Lt /> : <Gt />} {props.label} </Label>\n    { !folded && <W1>{ children }</W1> }\n  </Root>\n}\n\nexport default Collapsible\n","import axios from \"axios\";\nimport config from \"config\";\n\nconst settings = {\n  baseURL: config.apiOrigin\n}\n\nexport default axios.create(settings);","/*\n *  $shared / index\n */\nimport _Box from '@material-ui/core/Box'\nimport React from 'react'\nimport styled from 'styled-components'\n\nexport { default as Api } from \"./Api\"\nexport { default as AppRouter } from \"./AppRouter\"\n\nexport const Box = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  // cursor: pointer;\n\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const C = {\n  jwt_token: 'jwt_token',\n  current_user: 'current_user',\n\n  layout_onecol: 'onecol',\n  layout_mapui: 'mapui',\n}\n\nexport { default as Collapsible } from \"./Collapsible\"\nexport const CollapsibleContext = React.createContext({})\n\nexport const Debug = styled.div`\n`;\n\n/**\n * Usage: logg(someObject, 'label')\n *\n * This development-grade logger can be used instead of console.log() with some advantages:\n * * It encourages consistent labeling of logs. By labeling each log line, you can have dozens of log lines\n * written per action, and still know which log line comes from where.\n * The recommended label is the component name, or function name.\n * * If the label is present, the logged object is placed in the window, allowing you to inspect it in the console. The\n * label becomes the name of the object (stripped to [0-9a-zA-Z\\-_] chars). If you're logging a function, you can execute it.\n * If you log more than one thing, they can interact, allowing you to validate control flow.\n * * the logger can be turned off by making this function simply return.\n */\nconst logg = (a, b=\"\", c=null) => {\n  c = \"string\" === typeof c ? c : b.replace(/\\W/g, \"\");\n  if (c.length > 0) {\n    window[c] = a;\n  }\n\n  console.log(`+++ ${b}:`, a); // eslint-disable-line no-console\n};\n\nexport { logg };\n\nexport { default as request } from \"./request\";\n\nexport const S = {\n  borderWidth: 10,\n  bottomDrawerHeight: 100,\n}\n\nexport const TwofoldContext = React.createContext({})\n\nexport const ZoomContext = React.createContext({})\n\nexport const Wrapper = styled.div`\n  height: 100vh;\n`;\n","import { Plugins } from '@capacitor/core';\nimport { FacebookLoginResponse } from '@capacitor-community/facebook-login';\n\nimport React, { Fragment as F, useEffect, useState } from \"react\";\nimport { IonPage, IonContent } from \"@ionic/react\";\nimport { Container, Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\n\nimport { Api, C, logg, request } from \"$shared\";\nimport config from \"config\";\n\nimport \"./users.scss\";\n\nconst { FacebookLogin } = Plugins;\n\nconst FACEBOOK_PERMISSIONS = ['email'];\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  root: {\n    flexGrow: 1,\n    overflow: 'scroll',\n    height: '100vh',\n  },\n\n}));\n\nconst Account = (props) => {\n  const classes = useStyles();\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n\n  const doLogin = async (props) => {\n    const result = await FacebookLogin.login({ permissions: FACEBOOK_PERMISSIONS });\n    if (result.accessToken) {\n      logg(result.accessToken.token, 'Facebook access token')\n\n      request.post(`${config.apiOrigin}${Api.longTermTokenPath}`, { accessToken: result.accessToken.token }).then((resp) => {\n        logg(resp, 'microsites3 response')\n\n        localStorage.setItem(C.jwt_token, resp.data.jwt_token)\n        localStorage.setItem(C.current_user, JSON.stringify(resp.data) )\n      }).catch((err) => {\n        logg(err, `Could not post request to ${config.apiOrigin}${Api.longTermTokenPath}`)\n      })\n    } else {\n      logg('canceled')\n      // Canceled by user.\n    }\n  }\n\n  const doLogin2 = async () => {\n    request.post(`${config.apiOrigin}${Api.loginPath}`, { email, password }).then((r) => r.data).then((resp) => {\n      logg(resp, 'resp')\n      localStorage.setItem('jwt_token', resp.jwt_token)\n      localStorage.setItem('current_user', JSON.stringify(resp.current_user))\n    })\n  }\n\n  const logout = () => {\n    localStorage.removeItem(C.jwt_token);\n    localStorage.removeItem(C.current_user);\n    logg(\"logged out\");\n  };\n\n  const currentUser = localStorage.getItem('current_user') ? JSON.parse(localStorage.getItem('current_user')) : null\n\n  /* useEffect(async () => {\n    // check jwt\n    const jwtToken = localStorage.getItem('jwt_token')\n    let response = await request.get(`${config.apiOrigin}${Api.myAccount()}?jwt_token=${jwtToken}`)\n    logg(response, 'ze3response')\n\n  }, []) */\n\n  return (<F>\n\n      <Grid container spacing={2} className={classes.root} >\n        <Grid item xs={12}>\n          <Grid container>\n            <Grid item xs={6}>\n              <img src=\"/assets/accounts/default-avatar.png\" alt=\"profile pic\" />\n            </Grid>\n            <Grid item xs={6}>\n              { !!currentUser && <F>\n                <h4>{currentUser.email}</h4>\n                <ul>\n                  <Link to={\"/en/account/my/galleries\"} >My Galleries</Link>\n                  <li><a onClick={() => props.history.push(\"/en/account/my/videos\")}>My Videos</a></li>\n                  <li><button onClick={logout} >Clear Token</button></li>\n                </ul>\n              </F> || <F>\n                <h4>Not logged in</h4>\n                <button onClick={doLogin} >fb Login</button>\n                <br /><br /><br />\n                <input type='email' value={email} onChange={(e) => setEmail(e.target.value) } /><br />\n                <input type='password' value={password} onChange={(e) => setPassword(e.target.value) }/><br />\n                <button onClick={doLogin2} >passwd Login</button>\n              </F> }\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n\n  </F>);\n}\n\nexport default Account;\n","import React, { Fragment as F, useState } from \"react\"\nimport Modal from \"react-modal\"\nimport { CardElement, Elements, useElements, useStripe, } from '@stripe/react-stripe-js'\nimport { loadStripe } from '@stripe/stripe-js'\nimport styled from 'styled-components'\n\nimport config from \"config\"\n\nimport { Api, logg, S, request } from \"$shared\"\n\nconst stripePromise = loadStripe('pk_test_qr1QPmSpLdBFt1F7itdWJOj3') // @TODO: this is active, but change.\n\nconst Login = (props) => {\n  return (<F>\n    <buttom>do login</buttom>\n  </F>)\n}\n\nconst Root = styled.div`\n  // border: 1px solid red;\n\n  background: white;\n  height: 100px;\n  width: calc(100vw - ${p => p.borderWidth*2}px);\n  padding: 1em;\n  margin-bottom: ${p => p.borderWidth}px;\n`\n\nconst W = styled.div`\n  display: flex;\n  justify-content: center;\n  background: #dedede;\n`\n\nconst MyAccountWidget = (props) => {\n  const currentUser = JSON.parse(localStorage.getItem(\"current_user\")) || {}\n  const stripe = useStripe()\n  const elements = useElements()\n\n  const [purchaseModalIsOpen, setPurchaseModalIsOpen] = useState(false)\n\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n    logg('purchasing...')\n\n    if (!stripe || !elements) { return }\n    const cardElement = elements.getElement(CardElement)\n\n    const jwtToken = localStorage.getItem('jwt_token')\n    let client_secret = await request.get(`${config.apiOrigin}${Api.paymentsPath}?jwt_token=${jwtToken}`)\n    client_secret = client_secret.data.client_secret;\n    logg(client_secret, 'client_secret');\n\n    const result = await stripe.confirmCardPayment(client_secret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n      },\n    })\n    logg(result, 'result')\n\n    if (result.error) {\n      logg(result.error.message, 'error message')\n    } else {\n      if (result.paymentIntent.status === 'succeeded') {\n        let response = await request.get(`${config.apiOrigin}${Api.myAccount()}?jwt_token=${jwtToken}`)\n        logg(response, 'ze3response')\n      } else {\n        logg('something else');\n      }\n    }\n  };\n\n  const { borderWidth } = S\n\n  return <W><Root {...{ borderWidth }} >\n    { currentUser.email ? currentUser.email : <Login /> } &nbsp;\n    [&nbsp;{ typeof currentUser.n_unlocks === 'number' ? currentUser.n_unlocks : '?' } coins&nbsp;]&nbsp; &nbsp;\n    <button onClick={() => setPurchaseModalIsOpen(true) }>buy</button>\n\n    <Modal isOpen={purchaseModalIsOpen} ariaHideApp={false} style={{  width: '500px' }} >\n      <h1>\n        Purchase this\n        <span onClick={() => {\n          logg('clicking...')\n          setPurchaseModalIsOpen(false)\n        } } >[x]</span>\n      </h1>\n\n      <form onSubmit={handleSubmit} >\n        <CardElement />\n        <button type=\"submit\" disabled={!stripe} >Pay</button>\n      </form>\n\n    </Modal>\n  </Root></W>\n};\n\nconst WrappedMyAccountWidget = (props) => <Elements stripe={stripePromise}><MyAccountWidget {...props} /></Elements>;\n\nexport default WrappedMyAccountWidget;\n","\nimport Drawer from '@material-ui/core/Drawer'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport React, { Fragment as F, useContext, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { MenuBottom } from \"./\"\nimport { Account, Account2, MyAccountWidget } from \"$components/users\"\nimport { C, logg, TwofoldContext } from \"$shared\"\n\nconst BottomWrapper = styled.div`\n  // height: 100px;\n  // position: absolute;\n  // bottom: 0;\n`\n\nconst ButtonWrapper = styled.div`\n  // border: 1px solid yellow;\n  position: absolute;\n  bottom: -10px;\n  left: 10px;\n`\n\n// @TODO: animate opening it, nicely?\nconst BottomDrawer = (props) => {\n  logg(props, 'BottomDrawer')\n  logg(useContext(TwofoldContext), 'TwofoldContext in BottomDrawer')\n\n  const { bottomDrawerOpen, layout, setBottomDrawerOpen } = useContext(TwofoldContext)\n\n  if (layout === C.layout_onecol) { return null; }\n\n  return <F>\n    <BottomWrapper>\n      <ButtonWrapper>\n        <IconButton\n          aria-label=\"open drawer\"\n          onClick={() => setBottomDrawerOpen(true)}\n          edge=\"start\"\n          className=\"menu-btn\"\n        ><MenuIcon\n          fontSize=\"small\"\n          style={{ color: 'white' }}\n        /></IconButton>\n      </ButtonWrapper>\n      <MenuBottom />\n    </BottomWrapper>\n\n    <Drawer anchor={\"bottom\"}\n      elevation={1}\n      open={bottomDrawerOpen}\n      onClose={() => setBottomDrawerOpen(false)}\n      BackdropProps={{ invisible: true }}\n      variant={\"persistent\"}\n    >\n      <div >\n        <MyAccountWidget />\n        <div\n          onClick={() => setBottomDrawerOpen(false)}\n          style={{ position: 'absolute', left: 0, bottom: 0 }}\n        >[X]</div>\n      </div>\n    </Drawer>\n  </F>\n}\n\nexport default BottomDrawer\n","import {\n  IonContent,\n  IonIcon,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonMenu,\n  IonMenuToggle,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n} from '@ionic/react';\n\nimport React from 'react';\nimport { newspaperOutline, bus, person, powerOutline } from 'ionicons/icons';\nimport './application.scss';\n\nconst appPages = [\n  {\n    title: 'Homefeed',\n    icon: newspaperOutline,\n    url: \"/en\"\n  },\n  {\n    title: 'Cities',\n    icon: bus,\n    url: \"/en/cities\"\n  },\n  {\n    title: 'My Account',\n    icon: person,\n    url: \"/en/account\"\n  },\n  {\n    title: 'Account2',\n    icon: person,\n    url: \"/en/account2\"\n  },\n  {\n    title: 'Login',\n    icon: powerOutline\n  }\n];\n\n/**\n * 20210529 - I think this is obsolete somehow, I'm using MyDrawer in App.jsx\n *\n */\nconst Menu = () => {\n  return (\n    <IonMenu contentId=\"main\" type=\"overlay\">\n      <IonHeader>\n        <IonToolbar color=\"primary\">\n          <IonTitle>Menu</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <img src=\"/assets/hero.png\" />\n        <IonList id=\"inbox-list\">\n          { appPages.map((appPage, index) =>\n            <IonMenuToggle key={index} autoHide={false}>\n              <IonItem\n                routerLink={appPage.url}\n                routerDirection=\"none\"\n                lines=\"none\"\n                detail={false}>\n                <IonIcon\n                  slot=\"start\"\n                  ios={appPage.icon}\n                  md={appPage.icon} />\n                <IonLabel>{appPage.title}</IonLabel>\n              </IonItem>\n            </IonMenuToggle>\n          ) }\n        </IonList>\n      </IonContent>\n    </IonMenu>\n  )\n}\n\nexport default Menu;\n","import {\n  IonContent,\n  IonIcon,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonMenu,\n  IonMenuToggle,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n} from '@ionic/react';\n\nimport React from 'react';\nimport { newspaperOutline, bus, person, powerOutline } from 'ionicons/icons';\nimport './application.scss';\n\n\n/**\n * 20210602\n *\n */\nconst MenuBottom = () => {\n  return (\n    <IonMenu type=\"overlay\">\n      <IonHeader>\n        <IonToolbar color=\"primary\">\n          <IonTitle>Menu</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <img src=\"/assets/hero.png\" />\n        <h1>what's here?</h1>\n      </IonContent>\n    </IonMenu>\n  )\n}\n\nexport default MenuBottom;\n","import { IonApp, IonButtons, IonMenuButton } from '@ionic/react'\nimport Drawer from '@material-ui/core/Drawer'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport React, { Fragment as F, useContext, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { Menu } from \"$components/application\"\nimport { Api, C, Debug, logg, TwofoldContext } from \"$shared\"\n\nconst LeftWrapper = styled.div`\n  // border: 1px solid green;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  background: white;\n`\n\nconst W1 = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n`\nconst W2 = styled.div`\n`\n\nconst MenuLeft= (props) => {\n  // logg(props, 'MenuLeft')\n  const [drawerOpen, setDrawerOpen] = React.useState(false)\n  const [ loading, setLoading ] = useState(false)\n  const history = useHistory()\n  const [ currentUser, setCurrentUser ] = useState(false)\n\n  // @TODO: re-instate\n  /* useEffect(() => {\n    setLoading(true)\n    Api.getMyAccount().then(data => {\n      logg(data, 'getMyAccount')\n      setCurrentUser(data.data)\n    }).catch(e => {\n      logg(e, 'e1a')\n    }).finally(() => {\n      setLoading(false)\n    })\n  }, [drawerOpen]) */\n\n  return <F>\n    <LeftWrapper>\n      <IconButton\n        aria-label=\"open drawer\"\n        onClick={() => setDrawerOpen(true)}\n        edge=\"start\"\n        className=\"menu-btn\"\n      ><MenuIcon /></IconButton>\n      { /* <MyAccountWidget /> */ }\n      <Menu />\n    </LeftWrapper>\n\n    <Drawer anchor={\"left\"} open={drawerOpen} onClose={() => setDrawerOpen(false)} >\n      <W1>\n        <List>\n          <ListItem button key={'newsfeed'} >\n            <span onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en\")\n            } }>Newsfeed</span>\n          </ListItem>\n          <ListItem button key={'cities'} >\n            <span onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en/cities\")\n            } }>Cities</span>\n          </ListItem>\n          <ListItem button key={'map 1'} >\n            <span onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en/locations/show/world-1\")\n            } }>The World</span>\n          </ListItem>\n          <ListItem button key={'map 2'} >\n            <span onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en/locations/show/map-1\")\n            } }>construct-1</span>\n          </ListItem>\n          <ListItem button key={'account'} >\n            <span onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en/account\")\n            } }>Account</span>\n          </ListItem>\n        </List>\n        <W2>\n          { loading && 'Loading...' || <F>\n            {currentUser.email}<br />\n            {currentUser.n_stars}<br />\n            some action\n          </F> }\n        </W2>\n      </W1>\n    </Drawer>\n  </F>\n}\n\nexport default MenuLeft\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"./application.scss\";\nimport styled from 'styled-components'\n\nimport { Api, logg, request } from \"$shared\"\n\nconst W = styled.div`\n  margin-top: .5em;\n`\n\nconst Metaline = (props) => {\n  // logg(props, 'Metaline')\n\n  const { created_at, username, city, tags = [] } = props;\n\n  function navigateToCity(){\n    props.history.push(`/en/cities/travel-to/${city.slug}/show/newsfeed`);\n  }\n\n  return (\n    <W>\n      <span className=\"date\"> On {(created_at || \"\").substring(0, 10)} </span>\n      { username && <>by <span className=\"user\"> {username} </span></> }\n      { city     && <>in <span className=\"city\" onClick={navigateToCity}> {city.name} </span></> }\n      { tags     && tags.map((tag, i) => <span key={i} className=\"tags\">{tag.name}</span>) }\n    </W>\n  );\n\n}\n\nexport default withRouter(Metaline);","import React, { useEffect, useState } from \"react\";\nimport { IonIcon } from \"@ionic/react\";\nimport { starOutline, starHalf, star } from 'ionicons/icons';\nimport \"./application.scss\";\n\nconst Rating = (props) => {\n\n  let rate = props.rate;\n  let [rating, setRating] = useState([]);\n\n  let iconMapping = {\n    0: starOutline,\n    1: starHalf,\n    2: star\n  };\n\n  useEffect(() => {\n\n    let rating = (new Array(5)).fill(0);\n    let i = 0;\n    while (rate > 0) {\n      if (rate < 1) {\n        rating[i] = 1;\n      } else {\n        rating[i] = 2;\n      }\n      rate--;\n      i++;\n    }\n\n    setRating(rating);\n\n  }, []);\n\n  return (\n    <span className=\"rating\">\n      { rating.map((r, i) => <IonIcon key={i} className=\"stars\" icon={iconMapping[r]} ></IonIcon>) }\n    </span>\n  )\n\n}\n\nexport default Rating;","\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst borderWidth = 20\nconst bottomDrawerHeight = 100\nconst MapuiContainer = styled.div`\n  background: white;\n\n  overflow: hidden;\n  margin: 10px;\n  height: calc(100vh - ${p => p.borderWidth*2}px - ${p => p.bottomDrawerOpen ? `${p.bottomDrawerHeight - p.borderWidth/2}px` : '0px' });\n`\n\nexport {\n  MapuiContainer,\n}\n\nconst MapuiLayout = (props) => {\n  return <MapuiContainer {...props} {...{ bottomDrawerHeight, borderWidth }} />\n}\n\nexport default MapuiLayout\n","import { IonPage, IonLoading, IonContent, IonIcon } from '@ionic/react';\nimport { funnel, bookmark, newspaperOutline, image, videocam } from 'ionicons/icons';\nimport React, { Fragment as F, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from 'styled-components'\n\nimport { Api, AppRouter, logg, Wrapper } from \"$shared\"\nimport \"./cities.scss\"\n\n\nconst Cities = (props) => {\n  const [cities, setCities] = useState([]);\n  const [filteredCities, setFilteredCities] = useState([]);\n  const [showLoading, setShowLoading] = useState(false);\n\n  useEffect(() => {\n    setShowLoading(true);\n    Api.getCities().then(res => {\n      setShowLoading(false);\n      setFilteredCities(res);\n      setCities(res);\n    });\n  }, []);\n\n\n  function filterHandler(ev) {\n    let filteredCities = cities.filter(city => {\n      return city.name.toLowerCase().indexOf(ev.target.value.trim().toLowerCase()) > -1;\n    });\n    setFilteredCities(filteredCities);\n  }\n\n  function navigateToCity(slug) {\n    props.history.push();\n  }\n\n  function navigate(path) {\n    logg(path, 'navigating');\n    props.history.push(path);\n  };\n\n  return <F>\n    <Wrapper className='cities' >\n      <h1 className=\"heading\" >Cities</h1>\n\n      <Link to={\"/en/account\"} >Account</Link>\n\n      <div className=\"filter-section\">\n        <input className=\"filter-input\" onChange={filterHandler} />\n        <IonIcon className=\"filter-icon\" icon={funnel}></IonIcon>\n      </div>\n\n      <div className=\"bookmark-section\">\n        <label className=\"switch\">\n          <input type=\"checkbox\" onChange={() => { }} checked />\n          <span className=\"slider round\"></span>\n        </label>\n        <span className=\"bookmark-text\">Show only bookmarked</span>\n      </div>\n\n      <div className=\"container\">\n        { filteredCities.map((city, i) => <div key={i} className=\"cities\" >\n            <div className=\"img-section\">\n              <span className=\"bookmark\" >\n                <IonIcon className=\"bookmark-icon\" icon={bookmark}></IonIcon>\n              </span>\n              <img className=\"city-img\" src={city.photo} />\n              <Link to={AppRouter.cityPath(city.slug)} >\n                <span className=\"city-title\">{city.name}</span>\n              </Link>\n            </div>\n            <div className=\"content-section\">\n              <div className=\"content-item\">\n                <IonIcon className=\"icon\" icon={newspaperOutline}></IonIcon>\n                <span className=\"count\">{city.n_reports}</span>\n              </div>\n              <div className=\"content-item\">\n                <IonIcon className=\"icon\" icon={image}></IonIcon>\n                <span className=\"count\">{city.n_galleries}</span>\n              </div>\n              <div className=\"content-item\">\n                <IonIcon className=\"icon\" icon={videocam}></IonIcon>\n                <span className=\"count\">{city.n_videos}</span>\n              </div>\n            </div>\n          </div>\n        ) }\n      </div>\n      &nbsp;\n    </Wrapper>\n\n    <IonLoading\n      isOpen={showLoading}\n      onDidDismiss={() => setShowLoading(false)}\n      message={'Please wait...'}\n      duration={5000}\n    />\n\n  </F>\n}\n\nexport default Cities;\n","import _Box from '@material-ui/core/Box'\nimport React from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport styled from 'styled-components'\n\nimport { Metaline } from \"$components/application\"\nimport \"./newsitems.scss\"\nimport { logg } from \"$shared\"\n\nconst Box = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: pointer;\n`\n\nconst Image = styled.div`\n  position: relative;\n  padding-top: 100%;\n  overflow: hidden;\n  z-index: 10;\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n\n  width: 100px;\n  height: 100px;\n`\n\nconst Image2 = styled.div`\n`\n\nconst Images = styled.div`\n  position: relative;\n`\n\nconst ImageLarge = styled.img`\n  width: 200px;\n`\nconst ImageThumb1 = styled.img`\n  position: absolute;\n  left: 200px;\n  top: 0;\n`\nconst ImageThumb2 = styled.img``\n\nconst NewsitemGallery = (props) => {\n  // logg(props, 'NewsitemGallery')\n  const { gallery } = props;\n\n  const history = useHistory()\n\n  const navigateToGallery = () => {\n    history.push(`/en/galleries/show/${gallery.slug}`)\n  }\n\n  return (\n    <Box boxShadow={2} onClick={navigateToGallery} >\n      <Images >\n        { false && (gallery.photos || []).slice(0, 3).map((photo, i) =>\n          <Image key={i}\n            style={{ backgroundImage: `url(${photo.large_url})` }}>\n            { i == 2 && <div className=\"number\">+{gallery.photos.length - 3}</div> }\n          </Image>\n        ) }\n\n        { gallery.photos[0] && <ImageLarge src={gallery.photos[0].thumb_url} /> }\n        { gallery.photos[1] && <ImageThumb1 src={gallery.photos[1].thumb_url} /> }\n        { gallery.photos[2] && <ImageThumb2 src={gallery.photos[2].thumb_url} /> }\n\n        { false && gallery.photos.map((photo, idx) =>\n          <Image2 key={idx} >\n            <img src={`${photo.thumb_url}`} alt='' />\n          </Image2>\n        ) }\n      </Images>\n      <div>\n        <p className=\"title routable\" onClick={navigateToGallery}>\n          <img className=\"icon\" src={\"/assets/newsfeed/photos_icon.png\"} alt='' />\n          <span className=\"title-heading\">{gallery.name}</span>\n        </p>\n        <Metaline item={gallery} />\n        <p className=\"subhead\" dangerouslySetInnerHTML={{ __html: gallery.subhead }}></p>\n      </div>\n    </Box>\n  )\n\n}\n\nexport default NewsitemGallery\n","import _Box from '@material-ui/core/Box'\nimport React, { Fragment as F, useContext, useState } from \"react\"\n\nimport { useHistory } from \"react-router-dom\"\nimport styled from 'styled-components'\n\nimport config from \"config\"\nimport { NewsitemContainer } from \"./\"\nimport { Metaline, } from \"$components/application\"\nimport { Api, logg, request, TwofoldContext } from \"$shared\"\n\nimport \"./newsitems.scss\"\n\n/**\n * Displays the appropriate icon.\n *\n * @param [Boolean] props.isPurchased\n * @param [Number] props.premiumTier\n * @param [String] props.kind\n */\nconst ItemIcon = (props) => {\n  // logg(props, \"ItemIcon\");\n  if (props.isPurchased) {\n    return <img className=\"icon\" src=\"/assets/icons/glasses.png\" alt='' />;\n  }\n  if (props.premiumTier > 0) {\n    return <img className=\"icon\" src=\"/assets/icons/gem.png\" alt='' />;\n  }\n  switch (props.kind) {\n    case \"Report\":\n      return <img className=\"icon\" src=\"/assets/icons/report.png\" alt='' />;\n    default:\n      return \"unknown kind\";\n  };\n};\n\nconst W = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst W2 = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 0 1em;\n`\n\nconst NewsitemReport = (props) => {\n  // logg(props, \"NewsitemReport\");\n\n  const { newsitem } = props;\n  const slug = newsitem.reportname;\n\n  const history = useHistory();\n  const { setItemToUnlock } = useContext(TwofoldContext)\n\n  const navigateToReport = () => {\n    if (newsitem.is_premium && !newsitem.is_purchased) {\n      logg(newsitem, 'need to unlock this')\n      setItemToUnlock(newsitem)\n    } else {\n      history.push(`/en/reports/show/${slug}`)\n    }\n  }\n\n  return (<NewsitemContainer onClick={navigateToReport} >\n    <W>\n      <ItemIcon kind=\"Report\" isPurchased={newsitem.is_purchased} premiumTier={newsitem.premium_tier} />\n      <W2>\n        <h2 className=\"title-heading\" >{newsitem.name}</h2>\n        <Metaline {...newsitem} />\n      </W2>\n    </W>\n    <p className=\"subhead\" dangerouslySetInnerHTML={{ __html: newsitem.subhead }} />\n  </NewsitemContainer>)\n}\n\n// const WrappedNewsitemReport = (props) => <Elements stripe={stripePromise}><NewsitemReport {...props} /></Elements>;\n\nexport default NewsitemReport;\n\n","import _Box from '@material-ui/core/Box'\nimport React from \"react\";\nimport styled from 'styled-components'\n\nimport { Metaline } from \"$components/application\";\n\nimport \"./newsitems.scss\";\n\nconst Box = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n`\n\nconst NewsitemVideo = (props) => {\n  const { data, icon = \"/assets/newsfeed/video_icon.svg\" } = props;\n\n  return (\n    <Box boxShadow={2} >\n      <div className=\"image-section\">\n        {\n          data.youtube_id ?\n            <iframe className=\"iframe\" width=\"100%\" height=\"315\" src={`https://www.youtube.com/embed/${data.youtube_id}`} frameBorder=\"0\" allow=\"autoplay; encrypted-media\" allowFullScreen></iframe> :\n            <video width=\"100%\" preload=\"metadata\" height=\"auto\" controls>\n              <source src={data.url} type=\"video/mp4\" />\n            </video>\n        }\n      </div>\n      <div>\n        <p className=\"title\">\n          <img className=\"icon\" src={icon} />\n          <span className=\"title-heading\">{data.name}</span>\n        </p>\n        <Metaline item={data} />\n        <p\n          className=\"subhead\"\n          dangerouslySetInnerHTML={{ __html: data.subhead }}>\n        </p>\n      </div>\n    </Box>\n  )\n\n}\n\nexport default NewsitemVideo;","import React from \"react\"\nimport styled from 'styled-components'\n\nimport { Api, logg } from \"$shared\"\nimport NewsitemGallery from \"$components/newsitems/NewsitemGallery\"\nimport NewsitemReport from \"$components/newsitems/NewsitemReport\"\nimport NewsitemVideo from \"$components/newsitems/NewsitemVideo\"\nimport \"./newsitems.scss\"\n\nconst ICONS = {\n  1: \"/assets/newsfeed/sunglass.png\",\n  2: \"/assets/newsfeed/gem_premium.png\"\n}\n\nconst Wrapper = styled.div`\n  margin-bottom: 2em;\n`\n\nconst Newsitems = (props) => {\n  const { newsitems } = props\n\n  if (!newsitems || !newsitems.length) { return <div>No Newsitems</div> }\n\n  return (\n    <Wrapper>\n      { newsitems.map((newsitem, idx) => {\n        const premium_tier = newsitem.premium_tier || 0\n        const icon = ICONS[premium_tier]\n\n        return (\n          <div key={idx} className={`items premium-${premium_tier}`}>\n            { newsitem.item_type === \"gallery\" && <NewsitemGallery gallery={newsitem}  icon={icon} /> }\n            { newsitem.item_type === \"report\"  && <NewsitemReport  newsitem={newsitem} icon={icon} /> }\n            { newsitem.item_type === \"video\"   && <NewsitemVideo   data={newsitem}     icon={icon} /> }\n          </div>\n        )\n      }) }\n    </Wrapper>\n  )\n}\n\nexport default Newsitems\n","/*\n * $components / newsitems / index.jsx\n */\nimport _Box from '@material-ui/core/Box'\nimport React, { Fragment as F, useState } from \"react\"\nimport styled from 'styled-components'\n\nexport { default as NewsitemGallery } from \"./NewsitemGallery\";\nexport { default as NewsitemReport } from \"./NewsitemReport\";\nexport { default as Newsitems } from \"./Newsitems\";\n\nconst ICONS = {\n  1: \"/assets/newsfeed/sunglass.png\",\n  2: \"/assets/newsfeed/gem_premium.png\"\n}\n\n\nexport const W1 = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: pointer;\n\n  display: flex;\n  flex-direction: column;\n`\nconst NewsitemContainer = ({ children, ...props }) => <W1 {...props}>{children}</W1>\n\nexport {\n  ICONS,\n  NewsitemContainer,\n}\n","import React, { useEffect, useState } from \"react\";\nimport { IonPage, IonContent, IonButton, IonImg, IonIcon } from \"@ionic/react\";\nimport { funnel, bookmark, newspaperOutline, image, videocam } from 'ionicons/icons';\nimport { Rating } from \"$components/application\";\n\nimport \"./venues.scss\";\n\nconst Venues = (props) => {\n\n  const defaultRating = 3.5;\n  const [filteredVenues, setFilteredVenues] = useState(JSON.parse(JSON.stringify(props.data || [])));\n\n  function filterHandler(ev) {\n    let venues = props.data.filter(venue => {\n      return venue.name.toLowerCase().includes(ev.target.value.toLowerCase());\n    })\n    setFilteredVenues(venues);\n  }\n\n  return (\n    <div className=\"venues-section\">\n      <div>\n        <div className=\"filter-section\">\n          <input className=\"filter-input\" onChange={filterHandler} />\n          <IonIcon className=\"filter-icon\" icon={funnel}></IonIcon>\n        </div>\n      </div>\n      <div className=\"container\">\n\n        {\n          filteredVenues.map((venue, i) => {\n            return (\n              <div key={i} className=\"venues\">\n                <div className=\"image-section\">\n                  <img src={venue.photo} />\n                </div>\n                <div className=\"info-section\">\n                  <h4 className=\"title\">{venue.name}</h4>\n                  <div className=\"rating-section\">\n                    <Rating rate={defaultRating}></Rating>\n                    <span className=\"reviews\">5 reviews</span>\n                  </div>\n                  <div className=\"tags-section\">\n                    {\n                      venue.tags.map((tag, i) => {\n                        return (\n                          <span key={i} className=\"tags\">{tag.name}</span>\n                        )\n                      })\n                    }\n                  </div>\n                  <p className=\"description\" dangerouslySetInnerHTML={{ __html: venue.subhead }}></p>\n                  <p className=\"address\">111 N Main St., New York, NY 11223</p>\n                </div>\n                <img className=\"forward-arrow\" src=\"/assets/16x16/arrow-right.png\" />\n              </div>\n            )\n          })\n        }\n\n      </div>\n    </div>\n  );\n}\n\nexport default Venues;","import React, { useEffect, useState } from \"react\";\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom';\nimport { IonPage, IonContent, IonIcon, IonLoading } from '@ionic/react';\nimport { pin, newspaperOutline, image, videocam } from 'ionicons/icons';\n\nimport { Api, logg, Wrapper } from \"$shared\";\nimport { Newsitems } from \"$components/newsitems\";\nimport { Venues } from \"$components/venues\";\nimport \"./cities.scss\";\n\nconst CitiesShow = (props) => {\n  logg(props, 'CitiesShow')\n  const { match } = props;\n\n  const location = useLocation();\n\n  const [city, setCity] = useState(null);\n  const [showLoading, setShowLoading] = useState(false);\n\n  useEffect(() => {\n    setShowLoading(true)\n    Api.getCity(match.params.name).then(res => {\n      setCity(res.data.city);\n      setShowLoading(false);\n    })\n  }, [match.params.name]);\n\n  function changeMenuHandler(menu) {\n    // history.push(`${match.url}/${menu}`);\n  }\n\n  return (\n    <Wrapper>\n\n        { city && <div className='wrapper'>\n          <div className='city-show'>\n\n            <header style={{ backgroundImage: `url(${city.hero_img}}`, backgroundSize: \"contain\" }}></header>\n\n            <section className=\"section-one\">\n              <IonIcon icon={pin} className=\"location\"></IonIcon>\n              <h1 className=\"city-name\">{city.name}</h1>\n              <div className=\"status\">\n                <div className=\"status-grid\">\n                  <IonIcon className=\"info-icon\" icon={newspaperOutline}></IonIcon>\n                  <span className=\"numbers\">{city.n_reports}</span>\n                </div>\n                <div className=\"status-grid\">\n                  <IonIcon className=\"info-icon\" icon={image}></IonIcon>\n                  <span className=\"numbers\">{city.n_galleries}</span>\n                </div>\n                <div className=\"status-grid mid\">\n                  <IonIcon className=\"info-icon\" icon={videocam}></IonIcon>\n                  <span className=\"numbers \">{city.n_videos}</span>\n                </div>\n              </div>\n            </section>\n\n            { city.tags && <section className=\"tags-section\">\n              <span className=\"btn delete-btn\" >\n                <IonIcon name=\"close\"> </IonIcon> deselect all\n              </span>\n              { city.tags.map((tag, i) => <span className=\"btn\" key={i} >{tag.name}</span>) }\n            </section> }\n\n            <section className=\"section-three\">\n              <div className=\"menu-option\" onClick={() => changeMenuHandler('newsfeed')}>\n                <img src=\"/assets/newsfeed-icon.svg\" alt=\"Newsfeed\" />\n                <p className={`${location.pathname.includes(\"newsfeed\") ? \"selected\" : \"\"} menu-item`}>Newsfeed</p>\n              </div>\n\n              <div className=\"menu-option\" onClick={() => changeMenuHandler('venues')}>\n                <img src=\"/assets/venue-icon.svg\" alt=\"Venues\" />\n                <p className={`${location.pathname.includes(\"venues\") ? \"selected\" : \"\"} menu-item`}>Venues</p>\n              </div>\n            </section>\n\n            <section>\n              <Switch>\n                <Route exact path={`${match.url}/venues`} render={() => <Venues data={city.venues} />} />\n                <Route exact path={`${match.url}/newsfeed`}\n                  render={() => <Newsitems newsitems={city.newsitems} /> } />\n              </Switch>\n            </section>\n\n          </div>\n        </div>}\n        <IonLoading\n          isOpen={showLoading}\n          onDidDismiss={() => setShowLoading(false)}\n          message={'Please wait...'}\n          duration={5000}\n        />\n      &nbsp;\n    </Wrapper>\n  )\n}\n\nexport default CitiesShow\n","import { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\";\nimport React, { Fragment as F, useEffect, useState } from \"react\";\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom';\n\nimport { logg, request } from \"$shared\";\nimport { Metaline } from \"$components/application\";\nimport \"./galleries.scss\";\n\nconst GalleriesShow = (props) => {\n  logg(props, 'GalleriesShow')\n  const { match } = props;\n\n  const [showLoading, setShowLoading] = useState(false);\n  const [gallery, setGallery] = useState({});\n\n  useEffect(() => {\n    setShowLoading(true);\n    const token = localStorage.getItem(\"jwtToken\");\n    request.get(`/api/galleries/view/${match.params.slug}`, { params: { jwt_token: token } }).then(res => {\n      setShowLoading(false);\n      setGallery(res.data.gallery);\n      // @TODO: setFlash here?! If I\"m accessing a gallery I haven't bought access to?\n    })\n  }, []);\n\n  return (<F>\n\n        { <div className=\"gallery-show\">\n          <div className='narrow'>\n            <h1 className=\"heading\">\n              <img src=\"/assets/newsfeed/photos_icon.png\" />\n              <span className=\"title\">{gallery.name}</span>\n            </h1>\n            <Metaline item={gallery} />\n\n            <div className=\"thumbs\">\n              { gallery.photos && gallery.photos.map((ph, i) =>\n                <div className='card' key={i}>\n                  <div className='card-inner'>\n                    <IonImg src={ph.thumb_url}></IonImg>\n                  </div>\n                </div>\n              ) }\n            </div>\n          </div>\n          <div className=\"full-img-section\">\n            { gallery.photos && gallery.photos.map((ph, i) =>\n              <div className='item' key={i}>\n                <img src={ph.large_url} />\n              </div>\n            ) }\n          </div>\n        </div>}\n\n  </F>);\n}\n\nexport default GalleriesShow;","import React, { useEffect, useState } from \"react\";\nimport { IonLoading } from \"@ionic/react\";\n\nimport request from \"$shared/request\";\nimport { logg } from \"$shared\";\nimport { Galleries } from \"./\";\nimport { NewsitemGallery } from \"$components/newsitems\";\n\nconst MyGalleries = (props) => {\n  const [galleries, setGalleries] = useState(null);\n  const [showLoading, setShowLoading] = useState(false);\n\n  useEffect(() => {\n    setShowLoading(true);\n    const token = localStorage.getItem(\"jwtToken\");\n    request.get(`/api/my/galleries`, { params: { jwt_token: token } }).then(r => {\n      logg(r.data, 'MyGalleries data')\n      setGalleries(r.data);\n      setShowLoading(false);\n    })\n  }, []);\n\n  return (<>\n    <IonLoading\n      isOpen={showLoading}\n      onDidDismiss={() => setShowLoading(false)}\n      message={'Please wait...'}\n      duration={5000}\n    />\n    { galleries && galleries.length && galleries.map((g) => <NewsitemGallery key={g.id} data={g} /> ) }\n  </>);\n}\n\nexport default MyGalleries;","import React from 'react'\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { logg, request, S } from \"$shared\"\n\n// one breadcrumb\nconst B = styled.div`\n  padding: 0.5em;\n`\n// the divider\nconst B1 = styled.div`\n  padding: 0.5em 0;\n`\nconst Root = styled.div`\n  display: flex;\n`;\nconst Breadcrumbs = (props) => {\n  logg(props, 'Breakcrumbs')\n\n  const history = useHistory()\n\n  const out = []\n  props.breadcrumbs.map((b, idx) => {\n    if (idx+1 === props.breadcrumbs.length) {\n      // last one\n      out.push(<B>{b.name}</B>)\n    } else {\n      out.push(<B\n        style={{ textDecoration: 'underline' }}\n        onClick={() => history.push(`/en/locations/show/${b.slug}`) }\n      >{b.name}</B>)\n      out.push(<B1>&gt;</B1>)\n    }\n  })\n  return <Root>{out}</Root>\n}\n\nexport default Breadcrumbs\n","import { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { Breadcrumbs } from \"./\"\nimport {\n  Collapsible, CollapsibleContext,\n  logg, request, S, TwofoldContext, ZoomContext } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport { Newsitems } from \"$components/newsitems\"\n\nconst _Description = styled.div`\n  // border: 1px solid red;\n\n  padding: 10px;\n`\nconst Description = ({ item }) => {\n  return <_Description dangerouslySetInnerHTML={{ __html: item.description }} />\n}\n\n\nconst W1 = styled.div`\n  position: relative;\n`\nconst ZoomCtrlRoot = styled.div`\n  // border: 1px solid orange;\n\n  position: absolute;\n  top: 0;\n  left: calc(100vw - 80px);\n  background: white;\n  padding: 5px;\n\n  display: flex;\n  flex-direction: column;\n  z-index: 10;\n`;\nconst ZoomCtrl = (props) => {\n  const { zoom, setZoom } = useContext(TwofoldContext)\n\n  const zoomIn = () => {\n    setZoom(zoom/2)\n  }\n  const zoomOut = () => {\n    setZoom(zoom*2)\n  }\n  const zoomReset = () => {\n    setZoom(1)\n  }\n\n  return <ZoomCtrlRoot >\n    <span onClick={zoomIn} >[+]</span>\n    <span onClick={zoomOut} >[-]</span>\n    <span onClick={zoomReset} >[1]</span>\n  </ZoomCtrlRoot>\n}\nconst Div1 = styled.div`\n  // border: 2px solid brown;\n\n  text-align: center;\n  display: block;\n\n  position: relative; /* required for mobile, so that zoomCtrl, etc are inside the collapsible div */\n\n  overflow: scroll;\n  max-height: 80vh;\n`\nconst Div3 = styled.div``\nconst Map2 = (props) => {\n  logg(props, 'Map2')\n  const { location } = props\n\n  const { zoom, setZoom } = useContext(TwofoldContext)\n\n  const div1Ref = useRef(null)\n  const history = useHistory()\n\n  useEffect(() => {\n    div1Ref.current.scrollIntoView({ block: 'end' })\n  }, [])\n\n  const markers = []\n  props.location.markers.map((m, idx) => {\n    const out = <div\n      key={idx}\n      onClick={() => history.push(`/en/locations/show/${m.slug}`) }\n      style={{\n        position: 'absolute',\n        top: m.y/zoom,\n        left: m.x/zoom,\n      }} ><img src={m.img_path} style={{\n        display: 'block',\n        maxWidth: `${m.w/zoom}px`,\n        maxHeight: `${m.h/zoom}px`,\n        width: 'auto', height: 'auto',\n      }} /></div>\n    markers.push(out)\n  })\n\n  return (<W1>\n    <ZoomCtrl />\n    <Div1 ref={div1Ref} >\n      <Div3 style={{\n          // border: '2px solid cyan',\n\n          display: 'inline-block',\n          position: 'relative',\n          width: `${location.w/zoom}px`,\n          height: `${location.h/zoom}px`,\n      }} >\n        <img\n          src={location.img_path}\n          style={{\n            width: `${location.w/zoom}px`,\n            height: `${location.h/zoom}px`,\n          }}\n        />\n        { markers }\n      </Div3>\n    </Div1>\n  </W1>)\n}\n\nconst Markers = (props) => {\n  const out = []\n  props.markers.map((m, idx) => {\n    out.push(<div key={idx} style={{ margin: '10px' }} >\n      <img src={m.title_img_path} /><br />\n      {m.name}\n    </div>)\n  })\n  return <div style={{ display: 'flex' }} >{out}</div>\n}\n\nconst Row = styled.div`\n  // border: 2px solid cyan;\n\n  display: flex;\n  flex-direction: column;\n\n  overflow: scroll;\n  height: calc(100vh - 40px); /* @TODO: why 40px?! */\n`\n\n\nconst LocationsShow = (props) => {\n  logg(props, 'LocationsShow')\n\n  const { match } = props;\n\n  const [loading, setLoading] = useState(false)\n  const [location, setLocation] = useState(null)\n\n  const mountedRef = useRef('init')\n\n  useEffect(() => {\n    setLoading(true);\n    const token = localStorage.getItem(\"jwt_token\");\n    request.get(`/api/maps/view/${match.params.slug}`, { params: { jwt_token: token } }).then(res => {\n      if (!mountedRef.current) return null;\n      setLocation(res.data.map)\n      setLoading(false)\n      // @TODO: setFlash here?! If I\"m accessing a gallery I haven't bought access to?\n    }).finally(() => {\n    })\n\n    return () => {\n      // mountedRef.current = false;\n    }\n  }, [ match.params.slug ])\n\n  return (<Row>\n\n    { loading && <i>Loading...</i> }\n    { location && <Breadcrumbs {...location} /> }\n    <Collapsible slug=\"map-sec\" label=\"Map\" >\n      { location && <Map2 location={location} /> }\n    </Collapsible>\n    <Collapsible slug=\"descr-sec\" label=\"Description\" >\n      { location && <Description item={location} /> }\n    </Collapsible>\n    { location && location.markers.length && <Collapsible slug=\"markers-sec\" label=\"Markers\">\n      <Markers markers={location.markers} />\n    </Collapsible> || null }\n    { location && location.newsitems.length && <Collapsible slug=\"news-sec\" label=\"Newsitems\">\n      <Newsitems newsitems={location.newsitems} />\n    </Collapsible> || null }\n\n  </Row>)\n}\n\nexport default LocationsShow;","import { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { logg, request, S, TwofoldContext, ZoomContext } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport { Newsitems } from \"$components/newsitems\"\n\nconst Left = styled.div`\n  // border: 1px solid blue;\n\n  background: #cecece;\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh - 40px - ${p => p.bottomDrawerOpen ? `${p.bottomDrawerHeight-p.borderWidth}px` : '0px' });\n`\n\nconst _Description = styled.div`\n  // border: 1px solid red;\n\n  padding: 10px;\n`\nconst Description = ({ item }) => {\n  return <_Description dangerouslySetInnerHTML={{ __html: item.description }} />\n}\n\nconst B = styled.div`\n  padding: 0.5em;\n`\n// the divider\nconst B1 = styled.div`\n  padding: 0.5em 0;\n`\nconst Breadcrumbs = (props) => {\n  logg(props, 'Breakcrumbs')\n\n  const history = useHistory()\n\n  const out = []\n  props.breadcrumbs.map((b, idx) => {\n    if (idx+1 === props.breadcrumbs.length) {\n      // last one\n      out.push(<B>{b.name}</B>)\n    } else {\n      out.push(<B\n        style={{ textDecoration: 'underline' }}\n        onClick={() => history.push(`/en/locations/show/${b.slug}`) }\n      >{b.name}</B>)\n      out.push(<B1>&gt;</B1>)\n    }\n  })\n  return <div style={{\n    zIndex: 200,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    background: 'white',\n\n    display: 'flex',\n  }} >{out}</div>\n}\nconst W1 = styled.div`\n  // position: relative;\n`\nconst ZoomCtrl = (props) => {\n  const { zoom, setZoom } = useContext(TwofoldContext)\n\n  const zoomIn = () => {\n    setZoom(zoom/2)\n  }\n  const zoomOut = () => {\n    setZoom(zoom*2)\n  }\n  const zoomReset = () => {\n    setZoom(1)\n  }\n\n  return <div style={{\n    position: 'absolute',\n    top: 0,\n    left: 'calc(50% - 20px)',\n    zIndex: 200,\n    background: 'white',\n    padding: '5px',\n\n    display: 'flex',\n    flexDirection: 'column',\n  }} >\n    <span onClick={zoomIn} >[+]</span>\n    <span onClick={zoomOut} >[-]</span>\n    <span onClick={zoomReset} >[1]</span>\n  </div>\n}\nconst Div1 = styled.div`\n  // border: 3px solid green;\n\n  text-align: center;\n  display: block;\n\n  position: relative;\n`\nconst Div3 = styled.div``\nconst Map2 = (props) => {\n  logg(props, 'Map2')\n  const { location } = props\n\n  const { zoom, setZoom } = useContext(TwofoldContext)\n\n  const div1Ref = useRef(null)\n  const history = useHistory()\n\n  useEffect(() => {\n    div1Ref.current.scrollIntoView({ block: 'end' })\n  }, [])\n\n  const markers = []\n  props.location.markers.map((m, idx) => {\n    const out = <div\n      key={idx}\n      onClick={() => history.push(`/en/locations/show/${m.slug}`) }\n      style={{\n        position: 'absolute',\n        top: m.y/zoom,\n        left: m.x/zoom,\n      }} ><img src={m.img_path} style={{\n        display: 'block',\n        maxWidth: `${m.w/zoom}px`,\n        maxHeight: `${m.h/zoom}px`,\n        width: 'auto', height: 'auto',\n      }} /></div>\n    markers.push(out)\n  })\n\n  return (<W1>\n    <Breadcrumbs {...props.location} />\n    <ZoomCtrl />\n\n      <Div1 ref={div1Ref} >\n        <Div3 style={{\n            // border: '2px solid cyan',\n\n            display: 'inline-block',\n            position: 'relative',\n            width: `${location.w/zoom}px`,\n            height: `${location.h/zoom}px`,\n        }} >\n          <img\n            src={location.img_path}\n            style={{\n\n              // maxWidth: `${location.w/zoom}px`,\n              // maxHeight: `${location.h/zoom}px`,\n              // width: 'auto', height: 'auto',\n\n              width: `${location.w/zoom}px`,\n              height: `${location.h/zoom}px`,\n            }}\n          />\n          { markers }\n        </Div3>\n      </Div1>\n\n  </W1>)\n}\n\nconst Markers = (props) => {\n  logg(props, 'Markers')\n\n  const out = []\n  props.markers.map((m, idx) => {\n    out.push(<div key={idx} style={{ margin: '10px' }} >\n      <img src={m.title_img_path} /><br />\n      {m.name}\n    </div>)\n  })\n  return <div style={{ display: 'flex' }} >{out}</div>\n}\n\nconst Right = styled.div`\n  border: 1px solid green;\n\n  padding: 1em;\n\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh - ${p => p.bottomDrawerOpen ? p.bottomDrawerHeight : p.borderWidth}px - ${p => 3*p.borderWidth}px);\n`\nconst Row = styled.div`\n  display: flex;\n  position: relative;\n`\n\nconst LocationsShow = (props) => {\n  logg(props, 'LocationsShow')\n\n  const { match } = props;\n\n  const [loading, setLoading] = useState(false);\n  const [location, setLocation] = useState(null);\n\n  const mountedRef = useRef('init')\n\n  useEffect(() => {\n    setLoading(true);\n    const token = localStorage.getItem(\"jwt_token\");\n    request.get(`/api/maps/view/${match.params.slug}`, { params: { jwt_token: token } }).then(res => {\n      if (!mountedRef.current) return null;\n      setLocation(res.data.map)\n      setLoading(false)\n      // @TODO: setFlash here?! If I\"m accessing a gallery I haven't bought access to?\n    }).finally(() => {\n    })\n\n    return () => {\n      // mountedRef.current = false;\n    }\n  }, [ match.params.slug ])\n\n  const { borderWidth, bottomDrawerHeight } = S\n  const { bottomDrawerOpen } = useContext(TwofoldContext)\n\n  return (<Row>\n    <Left {...{ borderWidth, bottomDrawerOpen, bottomDrawerHeight }} >\n\n      { loading && <i>Loading Left...</i> }\n      { location && <Map2 location={location} /> }\n    </Left>\n    <Right {...{ borderWidth, bottomDrawerOpen, bottomDrawerHeight }} >\n      { loading && <i>Loading Right...</i> }\n      { location && <F>\n        <Markers markers={location.markers} />\n        <Description item={location} />\n        { location.newsitems && <Newsitems newsitems={location.newsitems} /> }\n      </F> }\n    </Right>\n  </Row>)\n}\n\nexport default LocationsShow;","\nimport React, { useEffect, useState } from \"react\";\nimport styled from 'styled-components'\n\nimport config from \"config\";\nimport { Api, Box, logg, request } from \"$shared\";\n\nconst W = styled.div`\n  padding: 2em 0;\n`\n\nconst ReportsShow = (props) => {\n  logg(props, \"ReportsShow\");\n\n  let [ item, setItem ] = useState({});\n\n  // @TODO: refactor to login-hoc\n  const currentUser = JSON.parse(localStorage.getItem(\"current_user\")) || {};\n\n  // @TODO: not logged in and has access\n  const getReport = async () => {\n    logg(null, 'getting report...')\n\n    request.get(Api.reportsGet(props.match.params.slug)).then(r => r.data).then(data => {\n      logg(data, 'got report')\n      setItem(data.report);\n    });\n  };\n\n  useEffect(() => {\n    getReport();\n  }, []);\n\n  // @TODO: logged in and no access\n\n  // @TODO: logged in and access\n\n  return (<W>\n    <Box boxShadow={2}>\n      <h1>Report {item.name}</h1>\n      <div className=\"description\" dangerouslySetInnerHTML={{ __html: item.description }} />\n    </Box>\n  </W>)\n}\n\n// @TODO: wrap in login HOC\nexport default ReportsShow;\n","import { IonPage, IonLoading, IonContent } from '@ionic/react'\nimport React, { Fragment as F, useEffect, useState } from \"react\"\nimport styled from 'styled-components'\n\nimport config from \"config\"\nimport { Api, Debug, logg, request } from \"$shared\"\nimport { Newsitems } from \"$components/newsitems\"\nimport \"./sites.scss\"\n\nconst Container = styled.div`\n  overflow: auto;\n`\n\nconst _Hero = styled.div`\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n`\nconst Hero = () => <_Hero><img className=\"image\" src=\"/assets/hero.png\" /></_Hero>\n\nconst Root = styled.div`\n  padding: 0;\n  margin: 0;\n  height: 100vh;\n`\n\nconst SitesShow = (props) => {\n  // logg(props, 'SitesShow')\n\n  let [newsitems, setNewsitems] = useState([])\n  let [showLoading, setShowLoading] = useState(false)\n\n  useEffect(() => {\n    setShowLoading(true)\n    Api.getSite(config.domain).then(data => {\n      logg(data, 'data')\n      setNewsitems(data.newsitems)\n    }).catch(e => {\n      logg(e, 'e1')\n    }).finally(() => {\n      setShowLoading(false)\n    })\n  }, [])\n\n  return <F>\n    <Root>\n      <Hero />\n      <Newsitems newsitems={newsitems} />\n      &nbsp;\n    </Root>\n    <IonLoading\n      isOpen={showLoading}\n      onDidDismiss={() => setShowLoading(false)}\n      message={'Please wait...'}\n      duration={5000}\n    />\n  </F>\n}\n\nexport default SitesShow\n","import { IonPage, IonContent, IonIcon, IonLoading } from '@ionic/react';\nimport { Container, Grid, GridList } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useState } from \"react\";\nimport styled from 'styled-components'\nimport config from \"config\";\n\nimport { Api, logg, request } from \"$shared\";\n\nconst useStyles = makeStyles((theme) => ({\n\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  redBorder: {\n    border: '1px solid red',\n  },\n  root: {\n    flexGrow: 1,\n    overflow: 'scroll',\n    height: '100vh',\n  },\n\n}));\n\nconst VideoItem = styled.div`\n  border-bottom: 1px solid red;\n`;\n\nconst Video = (props) => {\n  logg(props, 'Video');\n\n\n  const { item: video } = props;\n\n  return <VideoItem key={props.idx} >\n    <h5>Video {video.name}</h5>\n    <p>created {video.created_at}</p>\n    <video controls preload=\"metadata\" type=\"video/mp4\" src={video.video_url}\n      style={{ maxWidth: '500px', maxHeight: '90vh' }} ></video>\n  </VideoItem>;\n};\n\nconst Videos = () => {\n  logg(config, 'Videos component');\n  console.log(JSON.stringify(config));\n\n  const [videos, setVideos] = useState([]);\n\n  const jwtToken = localStorage.getItem(\"jwtToken\");\n\n  const classes = useStyles();\n\n  useEffect(() => {\n    logg('posting...');\n    request.post(Api.myVideosPath, { jwtToken: jwtToken }).then(r => r.data\n      ).then(({ videos }) => {\n        logg(videos, 'data')\n        setVideos(videos);\n      })\n  }, []);\n\n  return <Container maxWidth=\"md\">\n    <Grid container className={classes.root} >\n      <Grid item xs={12} >\n        <h2>My Videos</h2>\n      </Grid>\n      <Grid item xs={12}>\n        { videos && videos.map((v, idx) => <Video key={idx} item={v} ></Video> ) }\n      </Grid>\n    </Grid>\n  </Container>;\n\n};\n\nexport default Videos;\n","import { Container as _Container, Grid, GridList } from '@material-ui/core'\n\nimport React, { Fragment as F, useEffect, useState } from 'react'\nimport Modal from \"react-modal\"\nimport { Link, Switch, BrowserRouter as Router, Redirect, Route as _Route, useHistory, withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport '@ionic/react/css/core.css'\nimport '@ionic/react/css/normalize.css'\nimport '@ionic/react/css/structure.css'\nimport '@ionic/react/css/typography.css'\nimport '@ionic/react/css/padding.css'\nimport '@ionic/react/css/float-elements.css'\nimport '@ionic/react/css/text-alignment.css'\nimport '@ionic/react/css/text-transformation.css'\nimport '@ionic/react/css/flex-utils.css'\nimport '@ionic/react/css/display.css'\n\nimport './theme/variables.css'\nimport './app.scss'\n\nimport config from \"config\"\nimport { BottomDrawer, Menu, MenuBottom, MenuLeft } from \"$components/application\"\nimport MapuiLayout from \"$components/application/MapuiLayout\"\nimport { CitiesList, CitiesShow } from \"$components/cities\"\nimport { GalleriesShow } from \"$components/galleries\"\nimport { LocationsShowMobile as LocationsShow } from \"$components/locations\"\nimport { ReportsShow } from \"$components/reports\"\nimport { SitesShow } from '$components/sites'\nimport { Account, Account2, MyAccountWidget } from \"$components/users\"\nimport { Videos } from \"$components/videos\"\nimport { Galleries, MyGalleries } from \"$components/galleries\"\nimport { Api, C, CollapsibleContext, Debug, logg, request, TwofoldContext } from \"$shared\"\n\nconst Root = styled.div`\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n`;\n\nconst __Container = styled(_Container)`\n  height: 100vh;\n  overflow: scroll;\n`;\n\nconst App = () => {\n  const [ layout, setLayout ] = useState(C.layout_onecol)\n  const [ bottomDrawerOpen, setBottomDrawerOpen ] = React.useState(false)\n  const [ itemToUnlock, setItemToUnlock ] = React.useState(false)\n  const [ zoom, setZoom ] = useState(1)\n\n  const Container = (props) => {\n    switch(layout) {\n      case C.layout_onecol:\n        // main case\n        return <__Container maxWidth=\"md\" {...props}/>\n      case C.layout_mapui:\n        return <MapuiLayout {...props} {...{ bottomDrawerOpen, setBottomDrawerOpen }} />\n    }\n  }\n\n  const Route = (props) => {\n    useEffect(() => {\n      if (props.layout) {\n        setLayout(props.layout)\n      } else {\n        setLayout(C.layout_onecol)\n      }\n    }, [props.layout])\n\n    return <_Route {...props} />\n  }\n\n  const doUnlock = async () => {\n    // @TODO: check how many unlocks I have, and offer to purchase more if not enough.\n    const path = Api.doUnlock({ kind: 'Report', id: itemToUnlock.report_id });\n    const result = await request.post(`${config.apiOrigin}${path}`);\n    logg(result, 'result of unlocking')\n  };\n\n  const [ collapsibles, setCollapsibles ] = useState({\n    // 'map-sec': true,\n    'descr-sec': true,\n  })\n\n\n  return (<Router>\n    <TwofoldContext.Provider value={{\n        bottomDrawerOpen, setBottomDrawerOpen,\n        itemToUnlock, setItemToUnlock,\n        layout, setLayout,\n        zoom, setZoom,\n    }} >\n      <CollapsibleContext.Provider value={{ collapsibles, setCollapsibles, }} >\n        <MenuLeft />\n        <Root>\n          <Container >\n            <Switch id=\"main\" main >\n\n              <Redirect exact from=\"/\" to=\"/en\" />\n              <Route exact path=\"/en\" ><SitesShow /></Route>\n\n              <Route exact path=\"/en/account\" component={Account} />\n              <Route exact path=\"/en/account/my/videos\" component={Videos} />\n              <Route exact path=\"/en/account/my/galleries\" component={MyGalleries} />\n\n              <Route exact path=\"/en/cities\"                      component={CitiesList} />\n              <Route       path=\"/en/cities/travel-to/:name/show\" component={CitiesShow} />\n\n              <Route exact path=\"/en/galleries/show/:slug\" component={GalleriesShow} />\n\n              <Route exact path=\"/en/reports/show/:slug\" component={ReportsShow} />\n\n              <Route exact path=\"/en/locations/show/:slug\" component={LocationsShow} layout={C.layout_mapui} />\n\n            </Switch>\n          </Container>\n        </Root>\n        <BottomDrawer />\n        <Modal ariaHideApp={false} isOpen={!!itemToUnlock} >\n          <h1>Unlock this item? <button onClick={() => setItemToUnlock(false) } >[x]</button></h1>\n          <button onClick={doUnlock}>Do it</button>\n        </Modal>\n      </CollapsibleContext.Provider>\n    </TwofoldContext.Provider>\n  </Router>)\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './AppMobile';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}