(this.webpackJsonpguyd=this.webpackJsonpguyd||[]).push([[1],{12:function(e,t){e.exports={apiOrigin:"https://manager.piousbox.com",domain:"tgm.piousbox.com",appIndexPath:"src/index",requireLogin:!1}},128:function(e,t,n){},129:function(e,t,n){},151:function(e,t,n){e.exports=n(196)},156:function(e,t,n){var a={"./ion-action-sheet.entry.js":[202,5],"./ion-alert.entry.js":[203,6],"./ion-app_8.entry.js":[204,7],"./ion-avatar_3.entry.js":[205,17],"./ion-back-button.entry.js":[206,18],"./ion-backdrop.entry.js":[207,45],"./ion-button_2.entry.js":[208,19],"./ion-card_5.entry.js":[209,20],"./ion-checkbox.entry.js":[210,21],"./ion-chip.entry.js":[211,22],"./ion-col_3.entry.js":[212,46],"./ion-datetime_3.entry.js":[213,10],"./ion-fab_3.entry.js":[214,23],"./ion-img.entry.js":[215,47],"./ion-infinite-scroll_2.entry.js":[216,48],"./ion-input.entry.js":[217,24],"./ion-item-option_3.entry.js":[218,25],"./ion-item_8.entry.js":[219,26],"./ion-loading.entry.js":[220,27],"./ion-menu_3.entry.js":[221,28],"./ion-modal.entry.js":[222,8],"./ion-nav_2.entry.js":[223,14],"./ion-popover.entry.js":[224,9],"./ion-progress-bar.entry.js":[225,29],"./ion-radio_2.entry.js":[226,30],"./ion-range.entry.js":[227,31],"./ion-refresher_2.entry.js":[228,11],"./ion-reorder_2.entry.js":[229,16],"./ion-ripple-effect.entry.js":[230,49],"./ion-route_4.entry.js":[231,32],"./ion-searchbar.entry.js":[232,33],"./ion-segment_2.entry.js":[233,34],"./ion-select_3.entry.js":[234,35],"./ion-slide_2.entry.js":[235,50],"./ion-spinner.entry.js":[236,13],"./ion-split-pane.entry.js":[237,51],"./ion-tab-bar_2.entry.js":[238,36],"./ion-tab_2.entry.js":[239,15],"./ion-text.entry.js":[240,37],"./ion-textarea.entry.js":[241,38],"./ion-toast.entry.js":[242,39],"./ion-toggle.entry.js":[243,12],"./ion-virtual-scroll.entry.js":[244,52]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=156,e.exports=r},158:function(e,t,n){var a={"./ion-icon.entry.js":[245,59]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=158,e.exports=r},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var a,r,c,o,l,i,s,u,m,p,d,b,f,g,h,E,v,j,O,y,w,x,k,_,C,N,S,U,D,I,L,M,P,T,W,H,F,A,R,z,B,V,G,q,J,Y,X,Z,K,Q,$,ee,te,ne,ae,re,ce,oe=n(0),le=n.n(oe),ie=n(17),se=n.n(ie),ue=n(10),me=n(5),pe=n(16),de=n.n(pe),be=n(142),fe=n(12),ge=n.n(fe),he=n(23),Ee=n(52),ve=n(4),je=n(275),Oe=n(3),ye=function(){var e=Object(oe.useContext)(bt),t=(e.currentUser,e.setCurrentUser,localStorage.getItem(it.jwt_token));return{doUnlock:function(e){var t=e.kind,n=e.id,a=localStorage.getItem("jwt_token");return"/api/payments/unlock?kind=".concat(t,"&id=").concat(n,"&jwt_token=").concat(a)},getMyAccount:function(){var e=localStorage.getItem("jwt_token");return at.post("/api/my/account",{jwt_token:e})},loginPath:"/api/users/login.json",longTermTokenPath:"/api/users/long_term_token",myAccount:function(){return"/api/my/account"},myVideosPath:"/api/my/videos",paymentsPath:"/api/payments2",reportsGet:function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},n="";return t&&(n="jwt_token=".concat(t.jwt_token)),"".concat(ge.a.apiOrigin,"/api/reports/view/").concat(e,"?").concat(n)},getCities:function(){return at.get("".concat(ge.a.apiOrigin,"/api/cities")).then((function(e){return e.data}))},getCity:function(e){return at.get("".concat(ge.a.apiOrigin,"/api/cities/view/").concat(e))},applicationHome:function(){var e=Object(ue.a)(de.a.mark((function e(){var n;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.get("".concat(ge.a.apiOrigin,"/api/sites/view/").concat(ge.a.domain),{params:{jwt_token:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},we=(n(33),n(27)),xe=n(55),ke=(n(198),n(81)),_e=(n(105),n(8)),Ce=n(266),Ne=n(20),Se=function(e){pt(e,"Account");var t=Object(oe.useContext)(bt),n=t.currentUser;t.setCurrentUser;return le.a.createElement(oe.Fragment,null,le.a.createElement(Ce.a,{container:!0,spacing:2},le.a.createElement(Ce.a,{item:!0,xs:12},le.a.createElement(Ce.a,{container:!0},le.a.createElement(Ce.a,{item:!0,xs:6},le.a.createElement("img",{src:"/assets/accounts/default-avatar.png",alt:"profile pic"})),le.a.createElement(Ce.a,{item:!0,xs:6},!!n&&le.a.createElement(oe.Fragment,null,le.a.createElement("h4",null,n.email),le.a.createElement("ul",null,le.a.createElement("li",null,le.a.createElement(Ne.b,{to:"/en/account/my/galleries"},"My Galleries")),le.a.createElement("li",null,le.a.createElement("a",{onClick:function(){return e.history.push("/en/account/my/videos")}},"My Videos")),le.a.createElement("li",null,le.a.createElement(Be,null))))||le.a.createElement(oe.Fragment,null,le.a.createElement("h4",null,"Not logged in"),le.a.createElement(ze,null),le.a.createElement("br",null),le.a.createElement("br",null),le.a.createElement(Ve,null)))))))},Ue=n(39),De=n.n(Ue),Ie=function(e){pt(e,"LoginModal");var t=Object(oe.useContext)(bt),n=t.loginModalOpen,a=t.setLoginModalOpen;return le.a.createElement(De.a,{style:{zIndex:3},isOpen:n},le.a.createElement("h1",null,"Please Login",le.a.createElement("button",{onClick:function(){return a(!1)}},"[x]")),le.a.createElement(ze,null),le.a.createElement(Ve,null))},Le=n(53),Me=n(135),Pe=Object(Me.a)("pk_test_qr1QPmSpLdBFt1F7itdWJOj3"),Te=function(e){return le.a.createElement(oe.Fragment,null,le.a.createElement("button",null,"do login"))},We=Oe.a.div(a||(a=Object(ve.a)(["\n  // border: 1px solid red;\n\n  display: flex;\n  justify-content: flex-start;\n  background: #dedede;\n\n  background: white;\n  height: 100px;\n  width: calc(100vw - ","px);\n  padding: 1em;\n  margin-bottom: ","px;\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.borderWidth})),He=function(e){var t=ye(),n=Object(oe.useContext)(bt),a=n.currentUser,r=(n.setCurrentUser,Object(Le.useStripe)()),c=Object(Le.useElements)(),o=Object(oe.useState)(!1),l=Object(me.a)(o,2),i=l[0],s=l[1],u=function(){var e=Object(ue.a)(de.a.mark((function e(n){var a,o,l,i;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),pt("purchasing..."),r&&c){e.next=4;break}return e.abrupt("return");case 4:return c.getElement(Le.CardElement),a=localStorage.getItem("jwt_token"),e.next=8,at.get("".concat(ge.a.apiOrigin).concat(t.paymentsPath,"?jwt_token=").concat(a));case 8:return o=(o=e.sent).data.client_secret,pt(o,"client_secret"),e.next=13,r.confirmCardPayment(o,{payment_method:{card:c.getElement(Le.CardElement)}});case 13:if(l=e.sent,pt(l,"result"),!l.error){e.next=19;break}pt(l.error.message,"error message"),e.next=27;break;case 19:if("succeeded"!==l.paymentIntent.status){e.next=26;break}return e.next=22,at.get("".concat(ge.a.apiOrigin).concat(t.myAccount(),"?jwt_token=").concat(a));case 22:i=e.sent,pt(i,"ze3response"),e.next=27;break;case 26:pt("something else");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=dt.borderWidth;return a?le.a.createElement(We,{borderWidth:m},a.email?a.email:le.a.createElement(Te,null)," \xa0 [\xa0","number"===typeof a.n_unlocks?a.n_unlocks:"?"," coins\xa0]\xa0 \xa0",le.a.createElement("button",{onClick:function(){return s(!0)}},"buy"),le.a.createElement(De.a,{isOpen:i,ariaHideApp:!1,style:{width:"500px"}},le.a.createElement("h1",null,"Purchase this",le.a.createElement("span",{onClick:function(){pt("clicking..."),s(!1)}},"[x]")),le.a.createElement("form",{onSubmit:u},le.a.createElement(Le.CardElement,null),le.a.createElement("button",{type:"submit",disabled:!r},"Pay")))):null},Fe=function(e){return le.a.createElement(Le.Elements,{stripe:Pe},le.a.createElement(He,e))},Ae=xe.a.FacebookLogin,Re=["email"],ze=function(e){var t=ye(),n=Object(oe.useContext)(bt),a=(n.currentUser,n.setCurrentUser),r=function(){var e=Object(ue.a)(de.a.mark((function e(){var n;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.login({permissions:Re});case 2:(n=e.sent).accessToken?at.post("".concat(ge.a.apiOrigin).concat(t.longTermTokenPath),{accessToken:n.accessToken.token}).then((function(e){localStorage.setItem(it.jwt_token,e.data.jwt_token),localStorage.setItem(it.current_user,JSON.stringify(e.data)),a(e.data)})).catch((function(e){pt(e,"Could not post request to ".concat(ge.a.apiOrigin).concat(t.longTermTokenPath))})):pt("canceled");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return le.a.createElement(lt,{onClick:r},"FB Login")},Be=function(){var e=Object(oe.useContext)(bt),t=(e.currentUser,e.setCurrentUser);return le.a.createElement(lt,{onClick:function(){localStorage.removeItem(it.jwt_token),localStorage.removeItem(it.current_user),t(null)}},"Logout")},Ve=function(e){var t=ye(),n=Object(oe.useContext)(bt),a=(n.currentUser,n.setCurrentUser),r=(n.loginModalOpen,n.setLoginModalOpen),c=Object(oe.useState)(""),o=Object(me.a)(c,2),l=o[0],i=o[1],s=Object(oe.useState)(""),u=Object(me.a)(s,2),m=u[0],p=u[1],d=function(){var e=Object(ue.a)(de.a.mark((function e(n,c){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:at.post("".concat(ge.a.apiOrigin).concat(t.loginPath),{email:n,password:c}).then((function(e){return e.data})).then((function(e){a(e),localStorage.setItem("jwt_token",e.jwt_token),localStorage.setItem("current_user",JSON.stringify(e)),r(!1)})).catch((function(e){pt(e,"e322"),Object(ke.b)("Login failed"),a(null)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return le.a.createElement(oe.Fragment,null,le.a.createElement("input",{type:"email",value:l,onChange:function(e){return i(e.target.value)}}),le.a.createElement("br",null),le.a.createElement("input",{type:"password",value:m,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&d(l,m)}}),le.a.createElement("br",null),le.a.createElement(lt,{onClick:function(){return d(l,m)}},"Password Login"))},Ge={cityVenuesPath:function(e){return"/en/cities/travel-to/".concat(e,"/venues")},cityPath:function(e){return"/en/cities/travel-to/".concat(e)}},qe=n(92),Je=["children"],Ye=function(){return le.a.createElement("span",null,"\xa0>\xa0\xa0")},Xe=Oe.a.div(r||(r=Object(ve.a)(["\n  // border: 2px solid red;\n  // max-height: 100vh;\n"]))),Ze=function(){return le.a.createElement("span",null,"\xa0<\xa0\xa0")},Ke=Oe.a.div(c||(c=Object(ve.a)(["\n  display: flex;\n  margin-bottom: ",";\n"])),(function(e){return e.borderWidth})),Qe=Oe.a.div(o||(o=Object(ve.a)(["\n  // background: #dedede;\n  margin: .5em;\n  padding: .5em;\n\n  margin-bottom: 1em;\n"]))),$e=function(e){var t=e.children,n=Object(Ee.a)(e,Je);pt(n,"Collapsible");var a=Object(oe.useContext)(st);if(!a)return null;var r=a.collapsibles,c=a.setCollapsibles,o=!!r[n.slug];return le.a.createElement(Qe,null,le.a.createElement(Ke,Object.assign({},dt,{onClick:function(){c(Object(qe.a)(Object(qe.a)({},r),{},Object(he.a)({},n.slug,!r[n.slug])))}}),o?le.a.createElement(Ze,null):le.a.createElement(Ye,null)," ",n.label," "),!o&&le.a.createElement(Xe,null,t))},et=n(139),tt=n.n(et),nt={baseURL:ge.a.apiOrigin},at=tt.a.create(nt),rt=["children"],ct=["children"],ot=Object(Oe.a)(je.a)(l||(l=Object(ve.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ",";\n\n  display: flex;\n  flex-direction: column;\n"])),(function(e){return e.cursor?e.cursor:"auto"})),lt=Oe.a.div(i||(i=Object(ve.a)(["\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  padding: .3em 1em;\n  cursor: pointer;\n"]))),it={collapsible:{descr:"descr-sec"},current_user:"current_user",jwt_token:"jwt_token",item_types:{gallery:"Gallery",report:"Report",video:"Video"},layout_onecol:"onecol",layout_mapui:"mapui",variants:{floating:"floating",inline:"inline"}},st=le.a.createContext({}),ut=function(e){var t=e.children,n=Object(Ee.a)(e,rt);pt(n,"CollapsibleContextProvider");var a=Object(oe.useState)(Object(he.a)({},it.collapsible.descr,!0)),r=Object(me.a)(a,2),c=r[0],o=r[1];return le.a.createElement(st.Provider,{value:{collapsibles:c,setCollapsibles:o}},t)},mt=(Oe.a.div(s||(s=Object(ve.a)(["\n"]))),function(e){switch(e){case"Gallery":return"galleries";default:return"".concat(e.toLowerCase(),"s")}}),pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(n="string"===typeof n?n:t.replace(/\W/g,"")).length>0&&(window[n]=e),console.log("+++ ".concat(t,":"),e)},dt={borderWidth:"10px",bottomDrawerHeight:"100px",breadcrumbsHeight:"30px",blue:"#6aa3e9",darkGrey:"#605d5d",lightGrey:"#988b8b"},bt=le.a.createContext({}),ft=function(e){var t=e.children,n=Object(Ee.a)(e,ct);pt(n,"TwofoldContextProvider");var a=n.currentUser,r=n.setCurrentUser,c=n.layout,o=n.setLayout,l=n.loginModalOpen,i=n.setLoginModalOpen,s=Object(oe.useState)(!1),u=Object(me.a)(s,2),m=u[0],p=u[1],d=Object(oe.useState)({}),b=Object(me.a)(d,2),f=b[0],g=b[1],h=Object(oe.useState)(!1),E=Object(me.a)(h,2),v=E[0],j=E[1],O=Object(oe.useState)(!1),y=Object(me.a)(O,2),w=y[0],x=y[1],k=Object(oe.useState)(1),_=Object(me.a)(k,2),C=_[0],N=_[1];return le.a.createElement(bt.Provider,{value:{bottomDrawerOpen:m,setBottomDrawerOpen:p,currentUser:a,setCurrentUser:r,itemToUnlock:f,setItemToUnlock:function(e){f.id===e.id||l||g(e)},layout:c,setLayout:o,loginModalOpen:l,setLoginModalOpen:i,showItem:v,setShowItem:j,showUrl:w,setShowUrl:x,zoom:C,setZoom:N}},t)},gt=Oe.a.div(u||(u=Object(ve.a)(["\n  height: 100vh;\n"]))),ht=n(273),Et=(n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(274)),vt=n(268),jt=n(69),Ot=n.n(jt),yt=Oe.a.div(m||(m=Object(ve.a)(["\n;"]))),wt=Oe.a.div(p||(p=Object(ve.a)(["\n  // border: 1px solid yellow;\n  position: absolute;\n  bottom: -10px;\n  left: 10px;\n"]))),xt=function(e){var t=Object(oe.useContext)(bt),n=t.bottomDrawerOpen,a=t.layout,r=t.setBottomDrawerOpen;return a===it.layout_onecol?null:le.a.createElement(oe.Fragment,null,le.a.createElement(yt,{className:"BottomWrapper"},le.a.createElement(wt,null,le.a.createElement(vt.a,{"aria-label":"open drawer",onClick:function(){return r(!0)},edge:"start",className:"menu-btn"},le.a.createElement(Ot.a,{fontSize:"small",style:{color:"white"}}))),le.a.createElement(Nt,null)),le.a.createElement(Et.a,{anchor:"bottom",className:"Drawer",elevation:1,open:n,onClose:function(){return r(!1)},BackdropProps:{invisible:!0},variant:"persistent"},le.a.createElement("div",null,le.a.createElement(Fe,null),le.a.createElement("div",{onClick:function(){return r(!1)},style:{position:"absolute",left:0,bottom:0}},"[X]"))))},kt=n(11),_t=(n(73),[{title:"Homefeed",icon:kt.n,url:"/en"},{title:"Cities",icon:kt.c,url:"/en/cities"},{title:"My Account",icon:kt.o,url:"/en/account"},{title:"Account2",icon:kt.o,url:"/en/account2"},{title:"Login",icon:kt.q}]),Ct=function(){return le.a.createElement(_e.i,{contentId:"main",type:"overlay"},le.a.createElement(_e.b,null,le.a.createElement(_e.l,{color:"primary"},le.a.createElement(_e.k,null,"Menu"))),le.a.createElement(_e.a,null,le.a.createElement("img",{src:"/assets/hero.png"}),le.a.createElement(_e.g,{id:"inbox-list"},_t.map((function(e,t){return le.a.createElement(_e.j,{key:t,autoHide:!1},le.a.createElement(_e.e,{routerLink:e.url,routerDirection:"none",lines:"none",detail:!1},le.a.createElement(_e.c,{slot:"start",ios:e.icon,md:e.icon}),le.a.createElement(_e.f,null,e.title)))})))))},Nt=function(){return le.a.createElement(_e.i,{type:"overlay"},le.a.createElement(_e.b,null,le.a.createElement(_e.l,{color:"primary"},le.a.createElement(_e.k,null,"Menu"))),le.a.createElement(_e.a,null,le.a.createElement("img",{src:"/assets/hero.png"}),le.a.createElement("h1",null,"what's here?")))},St=n(269),Ut=n(270),Dt=n(271),It=(Oe.a.div(d||(d=Object(ve.a)(["\n  // border: 1px solid green;\n"]))),Oe.a.div(b||(b=Object(ve.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n"])))),Lt=(Oe.a.div(f||(f=Object(ve.a)(["\n"]))),function(e){var t=le.a.useState(!1),n=Object(me.a)(t,2),a=n[0],r=n[1],c=Object(oe.useState)(!1),o=Object(me.a)(c,2),l=(o[0],o[1],Object(we.g)()),i=Object(oe.useContext)(bt),s=i.currentUser;i.setCurrentUser;return le.a.createElement(oe.Fragment,null,le.a.createElement(Ct,null),e.variant===it.variants.floating&&le.a.createElement(St.a,{onClick:function(){return r(!0)},style:{position:"absolute",top:0,left:0,margin:".5em"},"aria-label":"main menu"},le.a.createElement(Ot.a,null))||le.a.createElement(Ot.a,{onClick:function(){return r(!0)}}),le.a.createElement(Et.a,{anchor:"left",open:a,onClose:function(){return r(!1)}},le.a.createElement(It,null,le.a.createElement(Ut.a,null,le.a.createElement(Dt.a,{button:!0,key:"newsfeed",onClick:function(){r(!1),l.push("/en")}},"Newsfeed"),le.a.createElement(Dt.a,{button:!0,key:"cities",onClick:function(){r(!1),l.push("/en/cities")}},le.a.createElement("span",null,"Cities")),s&&s.bookmarks.map((function(e,t){return le.a.createElement(Dt.a,{button:!0,key:t,onClick:function(){r(!1),l.push("/en/locations/show/".concat(e.slug))}},le.a.createElement("span",null,e.name))})),le.a.createElement(Dt.a,{button:!0,key:"account",onClick:function(){r(!1),l.push("/en/account")}},le.a.createElement("span",null,"Account"))))))}),Mt=Oe.a.div(g||(g=Object(ve.a)(["\n  margin-top: .5em;\n"]))),Pt=Object(we.i)((function(e){var t=e.created_at,n=e.username,a=e.city,r=e.tags,c=void 0===r?[]:r;return le.a.createElement(Mt,null,le.a.createElement("span",{className:"date"}," On ",(t||"").substring(0,10)," "),n&&le.a.createElement(le.a.Fragment,null,"by ",le.a.createElement("span",{className:"user"}," ",n," ")),a&&le.a.createElement(le.a.Fragment,null,"in ",le.a.createElement("span",{className:"city",onClick:function(){e.history.push("/en/cities/travel-to/".concat(a.slug,"/show/newsfeed"))}}," ",a.name," ")),c&&c.map((function(e,t){return le.a.createElement("span",{key:t,className:"tags"},e.name)})))})),Tt=function(e){var t=e.rate,n=Object(oe.useState)([]),a=Object(me.a)(n,2),r=a[0],c=a[1],o={0:kt.x,1:kt.w,2:kt.v};return Object(oe.useEffect)((function(){for(var e=new Array(5).fill(0),n=0;t>0;)e[n]=t<1?1:2,t--,n++;c(e)}),[]),le.a.createElement("div",{className:"rating"},r.map((function(e,t){return le.a.createElement(_e.c,{key:t,className:"stars",icon:o[e]})})))},Wt=(n(192),Oe.a.div(h||(h=Object(ve.a)(["\n  display: inline;\n  cursor: pointer;\n"])))),Ht=Oe.a.div(E||(E=Object(ve.a)(["\n  display: flex;\n  justify-content: space-around;\n"]))),Ft=Oe.a.div(v||(v=Object(ve.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),At={overlay:{},content:{margin:"auto",maxWidth:"400px"}},Rt=function(e){pt(e,"UnlockModal");var t=Object(oe.useContext)(bt),n=t.currentUser,a=t.setCurrentUser,r=t.itemToUnlock,c=t.setItemToUnlock,o=(t.loginModalOpen,t.setLoginModalOpen),l=(Object(oe.useContext)(bt),ye()),i=function(){var e=Object(ue.a)(de.a.mark((function e(){var t;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.doUnlock({kind:r.item_type,id:r.id}),e.next=3,at.post("".concat(ge.a.apiOrigin).concat(t)).then((function(e){c({})})).catch((function(e){pt(e,"e19")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=Object(oe.useRef)("init");return Object(oe.useEffect)((function(){return function(){var e=Object(ue.a)(de.a.mark((function e(){var t;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem(it.jwt_token),e.next=3,at.get("".concat(ge.a.apiOrigin).concat(l.myAccount(),"?jwt_token=").concat(t)).then((function(e){s.current&&a(e.data)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return s.current=null}}),[r.id]),r.id?le.a.createElement(De.a,{style:At,ariaHideApp:!1,isOpen:!!r.id},le.a.createElement(Ft,null,le.a.createElement("h1",null,"Unlock this item?"),le.a.createElement(Wt,{onClick:function(){return c(!1)}},"\xd7")),le.a.createElement("p",null,"To access this content, please unlock it first. It costs 1 (one) coin to unlock."),!!n&&le.a.createElement("p",null,"You have ",le.a.createElement("b",null,n.n_unlocks)," unlocks.")||le.a.createElement("p",null,"You have to be logged in to unlock content. ",le.a.createElement("a",{onClick:function(){o(!0),c(!1)}},"Please login.")),le.a.createElement(Ht,null,!!n&&le.a.createElement(lt,{onClick:i},"Unlock"))):null},zt=Oe.a.div(j||(j=Object(ve.a)(["\n  background: white;\n\n  overflow: hidden;\n  margin: 10px;\n  height: calc(100vh - ","px - ",");\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth/2,"px"):"0px"})),Bt=function(e){return le.a.createElement(zt,e)},Vt=(n(129),Oe.a.div(O||(O=Object(ve.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin: 1em 0px;\n"])))),Gt=Oe.a.div(y||(y=Object(ve.a)(["\n  // border: 1px solid red;\n\n  display: flex;\n  justify-content: center;\n\n  width: 50%;\n  text-align: center;\n  position: relative;\n  padding: 0.1em;\n"]))),qt=Object(Oe.a)(_e.c)(w||(w=Object(ve.a)(["\n  font-size: 2em;\n  color: ",";\n"])),(function(e){return e.darkGrey})),Jt=Oe.a.div(x||(x=Object(ve.a)(["\n  // border: 1px solid green;\n\n  padding: 0.5em;\n\n  color: ",";\n  font-size: 0.9em;\n  font-weight: 600;\n"])),(function(e){return e.lightGrey})),Yt=function(e){var t=Object(oe.useState)([]),n=Object(me.a)(t,2),a=n[0],r=n[1],c=Object(oe.useState)([]),o=Object(me.a)(c,2),l=o[0],i=o[1],s=Object(oe.useState)(!1),u=Object(me.a)(s,2),m=u[0],p=u[1],d=ye(),b=Object(we.g)();Object(oe.useEffect)((function(){p(!0),d.getCities().then((function(e){p(!1),i(e),r(e)}))}),[]);return le.a.createElement(oe.Fragment,null,le.a.createElement(gt,{className:"cities"},le.a.createElement("h1",{className:"heading"},"Cities"),le.a.createElement("div",{className:"filter-section"},le.a.createElement("input",{className:"filter-input",onChange:function(e){var t=a.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.trim().toLowerCase())>-1}));i(t)}}),le.a.createElement(qt,{className:"filter-icon",icon:kt.j})),le.a.createElement("div",{className:"container"},l.map((function(e,t){return le.a.createElement("div",{key:t,className:"cities",onClick:function(){return b.push(Ge.cityPath(e.slug))}},le.a.createElement("div",{className:"img-section"},le.a.createElement("span",{className:"bookmark"},le.a.createElement(qt,{className:"bookmark-icon",icon:kt.b})),le.a.createElement("img",{className:"city-img",src:e.photo}),le.a.createElement("span",{className:"city-title"},e.name)),le.a.createElement(Vt,null,le.a.createElement(Gt,null,le.a.createElement(Jt,dt,e.n_reports),le.a.createElement(qt,Object.assign({},dt,{icon:kt.n}))),le.a.createElement(Gt,null,le.a.createElement(Jt,dt,e.n_galleries),le.a.createElement(qt,Object.assign({},dt,{icon:kt.k}))),le.a.createElement(Gt,null,le.a.createElement(Jt,dt,e.n_videos),le.a.createElement(qt,Object.assign({},dt,{icon:kt.y})))))}))),"\xa0"),le.a.createElement(_e.h,{isOpen:m,onDidDismiss:function(){return p(!1)},message:"Please wait...",duration:5e3}))},Xt=(n(74),Oe.a.div(k||(k=Object(ve.a)(["\n  position: relative;\n  padding-top: 100%;\n  overflow: hidden;\n  z-index: 10;\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n\n  width: 100px;\n  height: 100px;\n"]))),Oe.a.div(_||(_=Object(ve.a)(["\n"]))),Oe.a.div(C||(C=Object(ve.a)(["\n  position: relative;\n"])))),Zt=Oe.a.img(N||(N=Object(ve.a)(["\n  width: 200px;\n"]))),Kt=Oe.a.img(S||(S=Object(ve.a)(["\n  position: absolute;\n  left: 200px;\n  top: 0;\n"]))),Qt=Oe.a.img(U||(U=Object(ve.a)(["\n  position: absolute;\n  left: 200px;\n  top: 100px;\n"]))),$t=function(e){var t=e.item;Object(we.g)();return le.a.createElement(un,{item:t},le.a.createElement(Xt,null,!1,t.photos[0]&&le.a.createElement(Zt,{src:t.photos[0].thumb_url}),t.photos[1]&&le.a.createElement(Kt,{src:t.photos[1].thumb_url}),t.photos[2]&&le.a.createElement(Qt,{src:t.photos[2].thumb_url}),!1))},en=function(e){var t=e.item;return le.a.createElement(un,{item:t})},tn=function(e){pt(e,"NewsitemVideo");var t=e.item;return le.a.createElement(un,{item:t},le.a.createElement("div",{className:"image-section"},t.youtube_id?le.a.createElement("iframe",{className:"iframe",width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(t.youtube_id),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):le.a.createElement("video",{width:"100%",preload:"metadata",height:"auto",controls:!0},le.a.createElement("source",{src:t.url,type:"video/mp4"}))))},nn=Oe.a.div(D||(D=Object(ve.a)(["\n  // border: 2px solid yellow;\n\n  // margin-bottom: 2em;\n"]))),an=function(e){pt(e,"Newsitems");var t=e.newsitems;return t&&t.length?le.a.createElement(nn,null,t.map((function(e,t){var n=e.premium_tier||0;return le.a.createElement("div",{key:t,className:"items premium-".concat(n)},e.item_type===it.item_types.gallery&&le.a.createElement($t,{item:e}),e.item_type===it.item_types.report&&le.a.createElement(en,{item:e}),e.item_type===it.item_types.video&&le.a.createElement(tn,{item:e}))}))):le.a.createElement("div",null,"No Newsitems")},rn=function(e){var t=e.is_purchased,n=e.item_type,a=e.premium_tier;if(t)return le.a.createElement("img",{className:"icon",src:"/assets/icons/glasses.png",alt:""});if(a>0)return le.a.createElement("img",{className:"icon",src:"/assets/icons/gem.png",alt:""});switch(n){case it.item_types.gallery:return le.a.createElement("img",{className:"icon",src:"/assets/icons/gallery.png",alt:""});case it.item_types.report:return le.a.createElement("img",{className:"icon",src:"/assets/icons/report.png",alt:""});case it.item_types.video:return le.a.createElement("img",{className:"icon",src:"/assets/newsfeed/video_icon.svg",alt:""});default:return"unknown kind"}},cn=["children"],on=Oe.a.div(I||(I=Object(ve.a)(["\n  display: flex;\n  flex-direction: column;\n\n  margin-left: 0.5em;\n"]))),ln=Oe.a.div(L||(L=Object(ve.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n\n  // padding: 0 1em;\n"]))),sn=Oe.a.h2(M||(M=Object(ve.a)(["\n  margin-top: 0;\n"]))),un=function(e){var t=e.children,n=Object(Ee.a)(e,cn),a=n.item,r=a.item_type,c=a.slug,o=Object(we.g)(),l=Object(oe.useContext)(bt),i=(l.itemToUnlock,l.setItemToUnlock),s=l.layout,u=(l.showItem,l.setShowItem);return le.a.createElement(ot,Object.assign({boxShadow:2},n,{onClick:function(){a.is_premium&&!a.is_purchased?i(a):s===it.layout_mapui?u(a):o.push("/en/".concat(mt(r),"/show/").concat(c))},cursor:"pointer"}),t,le.a.createElement(ln,null,le.a.createElement(rn,a),le.a.createElement(on,null,le.a.createElement(sn,null,a.name),le.a.createElement(Pt,a))),le.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:a.subhead}}))},mn=(n(193),function(e){pt(e,"Venues");var t=Object(oe.useState)(e.venues),n=Object(me.a)(t,2),a=n[0],r=n[1];return le.a.createElement("div",{className:"venues-section"},le.a.createElement("div",null,le.a.createElement("div",{className:"filter-section"},le.a.createElement("input",{className:"filter-input",onChange:function(t){var n=e.venues.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));r(n)}}),le.a.createElement(_e.c,{className:"filter-icon",icon:kt.j}))),le.a.createElement("div",{className:"container"},a.map((function(e,t){return le.a.createElement("div",{key:t,className:"venues"},le.a.createElement("div",{className:"image-section"},le.a.createElement("img",{src:e.photo})),le.a.createElement("div",{className:"info-section"},le.a.createElement("h4",{className:"title"},e.name),le.a.createElement("div",{className:"rating-section"},le.a.createElement(Tt,{rate:3.5}),le.a.createElement("span",{className:"reviews"},"5 reviews")),le.a.createElement("div",{className:"tags-section"},e.tags.map((function(e,t){return le.a.createElement("span",{key:t,className:"tags"},e.name)}))),le.a.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.subhead}}),e.address&&le.a.createElement("p",{className:"address"},e.address)),le.a.createElement("img",{className:"forward-arrow",src:"/assets/16x16/arrow-right.png"}))}))))}),pn=function(e){pt(e,"CitiesShow");var t=e.match,n=ye(),a=Object(we.g)(),r=Ge.cityPath(t.params.name),c=Object(we.h)(),o=Object(oe.useState)(null),l=Object(me.a)(o,2),i=l[0],s=l[1],u=Object(oe.useState)(!1),m=Object(me.a)(u,2),p=m[0],d=m[1],b=Object(oe.useRef)("init");return Object(oe.useEffect)((function(){return d(!0),n.getCity(t.params.name).then((function(e){b.current&&(s(e.data.city),d(!1))})),function(){return b.current=!1}}),[t.params.name]),le.a.createElement(gt,null,i&&le.a.createElement("div",{className:"wrapper"},le.a.createElement("div",{className:"city-show"},le.a.createElement("header",{style:{backgroundImage:"url(".concat(i.hero_img,"}"),backgroundSize:"contain"}}),le.a.createElement("section",{className:"section-one"},le.a.createElement(_e.c,{icon:kt.p,className:"location"}),le.a.createElement("h1",{className:"city-name"},i.name),le.a.createElement("div",{className:"status"},le.a.createElement("div",{className:"status-grid"},le.a.createElement(_e.c,{className:"info-icon",icon:kt.n}),le.a.createElement("span",{className:"numbers"},i.n_reports)),le.a.createElement("div",{className:"status-grid"},le.a.createElement(_e.c,{className:"info-icon",icon:kt.k}),le.a.createElement("span",{className:"numbers"},i.n_galleries)),le.a.createElement("div",{className:"status-grid mid"},le.a.createElement(_e.c,{className:"info-icon",icon:kt.y}),le.a.createElement("span",{className:"numbers "},i.n_videos)))),le.a.createElement("section",{className:"section-three"},le.a.createElement("div",{className:"menu-option",onClick:function(){return a.push(Ge.cityPath(t.params.name))}},le.a.createElement("img",{src:"/assets/newsfeed-icon.svg",alt:"Newsfeed"}),le.a.createElement("p",{className:"".concat(c.pathname==r?"selected":""," menu-item")},"Newsfeed")),le.a.createElement("div",{className:"menu-option",onClick:function(){return a.push(Ge.cityVenuesPath(t.params.name))}},le.a.createElement("img",{src:"/assets/venue-icon.svg",alt:"Venues"}),le.a.createElement("p",{className:"".concat(c.pathname.includes("venues")?"selected":""," menu-item")},"Venues"))),le.a.createElement(we.d,null,le.a.createElement(we.b,{exact:!0,path:"".concat(t.url,"/venues"),render:function(){return le.a.createElement(mn,{venues:i.venues})}}),le.a.createElement(we.b,{exact:!0,path:t.url,render:function(){return le.a.createElement(an,{newsitems:i.newsitems})}})))),le.a.createElement(_e.h,{isOpen:p,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3}),le.a.createElement("br",null),le.a.createElement("br",null),le.a.createElement("br",null))},dn=(n(194),function(e){pt(e,"GalleriesShow");var t=e.match,n=Object(oe.useState)(!1),a=Object(me.a)(n,2),r=(a[0],a[1],Object(oe.useState)({})),c=Object(me.a)(r,2),o=c[0],l=c[1],i=Object(oe.useContext)(bt),s=(i.currentUser,i.setCurrentUser,i.itemToUnlock),u=i.setItemToUnlock,m=(i.loginModalOpen,i.setLoginModalOpen,Object(oe.useRef)("init")),p=function(){var e=Object(ue.a)(de.a.mark((function e(){var n;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(it.jwt_token),e.next=3,at.get("/api/galleries/view/".concat(t.params.slug),{params:{jwt_token:n}}).then((function(e){if(m.current){var t=e.data.gallery;t.is_premium&&!t.is_purchased?u(t):l(e.data.gallery)}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(oe.useEffect)((function(){return p(),function(){m.current=null}}),[o.id,s.id]),le.a.createElement(oe.Fragment,null,le.a.createElement("div",{className:"gallery-show"},le.a.createElement("div",{className:"narrow"},le.a.createElement("h1",{className:"heading"},le.a.createElement("img",{src:"/assets/newsfeed/photos_icon.png"}),le.a.createElement("span",{className:"title"},o.name)),le.a.createElement(Pt,{item:o}),le.a.createElement("div",{className:"thumbs"},o.photos&&o.photos.map((function(e,t){return le.a.createElement("div",{className:"card",key:t},le.a.createElement("div",{className:"card-inner"},le.a.createElement(_e.d,{src:e.thumb_url})))})))),le.a.createElement("div",{className:"full-img-section"},o.photos&&o.photos.map((function(e,t){return le.a.createElement("div",{className:"item",key:t},le.a.createElement("img",{src:e.large_url}))})))))}),bn=function(e){var t=Object(oe.useState)(null),n=Object(me.a)(t,2),a=n[0],r=n[1],c=Object(oe.useState)(!1),o=Object(me.a)(c,2),l=o[0],i=o[1];return Object(oe.useEffect)((function(){i(!0);var e=localStorage.getItem("jwtToken");at.get("/api/my/galleries",{params:{jwt_token:e}}).then((function(e){pt(e.data,"MyGalleries data"),r(e.data),i(!1)}))}),[]),le.a.createElement(le.a.Fragment,null,le.a.createElement(_e.h,{isOpen:l,onDidDismiss:function(){return i(!1)},message:"Please wait...",duration:5e3}),a&&a.length&&a.map((function(e){return le.a.createElement($t,{key:e.id,data:e})})))},fn=Oe.a.div(P||(P=Object(ve.a)(["\n  padding: 0.5em;\n"]))),gn=Oe.a.div(T||(T=Object(ve.a)(["\n  padding: 0.5em 0;\n"]))),hn=Oe.a.div(W||(W=Object(ve.a)(["\n  border: ","px solid cyan;\n\n  display: flex;\n  z-index: 1;\n\n  height: ",";\n"])),(function(e){return e.debug?"1":"0"}),(function(e){return e.breadcrumbsHeight})),En=function(e){pt(e,"Breakcrumbs");var t=Object(oe.useContext)(bt).layout,n=Object(we.g)(),a=[];return e.breadcrumbs.map((function(t,r){r+1===e.breadcrumbs.length?a.push(le.a.createElement(fn,{key:r},t.name)):(a.push(le.a.createElement(fn,{key:r,style:{textDecoration:"underline"},onClick:function(){return n.push("/en/locations/show/".concat(t.slug))}},t.name)),a.push(le.a.createElement(gn,{key:"".concat(r,"-divider")},">")))})),le.a.createElement(hn,Object.assign({},dt,{debug:ge.a.debug,className:"Breadcrumbs"}),t===it.layout_mapui&&le.a.createElement(Lt,{variant:it.variants.inline}),a)},vn=Oe.a.div(H||(H=Object(ve.a)(["\n  padding: 2em 0;\n"]))),jn=function(e){pt(e,"ReportsShow");var t=Object(oe.useState)({}),n=Object(me.a)(t,2),a=n[0],r=n[1],c=ye(),o=(JSON.parse(localStorage.getItem("current_user")),function(){var t=Object(ue.a)(de.a.mark((function t(){return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:pt(null,"getting report..."),at.get(c.reportsGet(e.match.params.slug)).then((function(e){return e.data})).then((function(e){pt(e,"got report"),r(e.report)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(oe.useEffect)((function(){o()}),[]),le.a.createElement(vn,null,le.a.createElement(ot,{boxShadow:2},le.a.createElement("h1",null,"Report ",a.name),le.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:a.description}})))},On=function(e){pt(e,"ItemModal");var t=e.item,n=Object(oe.useContext)(bt),a=n.showItem,r=n.setShowItem;return le.a.createElement(De.a,{isOpen:!!a},le.a.createElement("h1",{onClick:function(){return r(!1)}},"[x]"),"report"===t.item_type&&le.a.createElement(jn,{match:{params:{slug:t.reportname}}}))},yn=Oe.a.div(F||(F=Object(ve.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]))),wn=function(e){var t=e.item;return le.a.createElement(yn,{dangerouslySetInnerHTML:{__html:t.description}})},xn=function(e){var t=Object(oe.useContext)(bt),n=t.showUrl,a=t.setShowUrl;return le.a.createElement(De.a,{ariaHideApp:!1,isOpen:!!n},le.a.createElement("span",{onClick:function(){a(!1)}},"[x]"),le.a.createElement("iframe",{height:"100%",style:{width:"100%",height:"100%"},scrolling:"yes",src:e.src,frameBorder:"no",allowtransparency:"true",allowFullScreen:!0}))},kn=Oe.a.div(A||(A=Object(ve.a)(["\n  border: ","px solid blue;\n\n  background: #dedede;\n  flex: 50%;\n  overflow: scroll;\n\n  height: calc(100vh -\n    ",");\n"])),(function(e){return e.debug?"1":"0"}),(function(e){return e.bottomDrawerOpen?"calc(".concat(e.bottomDrawerHeight,"+3*").concat(e.borderWidth,")"):"calc(4*".concat(e.borderWidth,")")})),_n=Oe.a.div(R||(R=Object(ve.a)(["\n  border: ","px solid green;\n\n  background: #dedede;\n\n  padding: 1em;\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh -\n    ",");\n"])),(function(e){return e.debug?"1":"0"}),(function(e){return e.bottomDrawerOpen?"calc(".concat(e.bottomDrawerHeight,"+3*").concat(e.borderWidth,")"):"calc(4*".concat(e.borderWidth,")")})),Cn=Oe.a.div(z||(z=Object(ve.a)(["\n  display: flex;\n  position: relative;\n"]))),Nn=function(e){pt(e,"LocationsShow");var t=e.match,n=Object(oe.useState)(!1),a=Object(me.a)(n,2),r=a[0],c=a[1],o=Object(oe.useState)(null),l=Object(me.a)(o,2),i=l[0],s=l[1],u=Object(oe.useContext)(bt),m=u.showItem,p=(u.setShowItem,u.showUrl),d=(u.setShowUrl,Object(oe.useRef)("init"));Object(oe.useEffect)((function(){c(!0);var e=localStorage.getItem("jwt_token");return at.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(d.current===t.params.slug)return null;s(e.data.map),c(!1)})).finally((function(){})),function(){d.current=t.params.slug}}),[t.params.slug]);var b=Object(oe.useContext)(bt).bottomDrawerOpen;return le.a.createElement(Cn,null,le.a.createElement(kn,Object.assign({className:"Left",bottomDrawerOpen:b},dt,{debug:ge.a.debug}),r&&le.a.createElement("i",null,"Loading Left..."),i&&le.a.createElement(En,i),i&&le.a.createElement(Fn,{map:i.map?i.map:i})),le.a.createElement(_n,Object.assign({className:"Right",bottomDrawerOpen:b},dt,{debug:ge.a.debug}),r&&le.a.createElement("i",null,"Loading Right..."),i&&le.a.createElement(oe.Fragment,null,le.a.createElement(An,{markers:i.markers}),le.a.createElement(wn,{item:i}),i.newsitems&&i.newsitems.length&&le.a.createElement(an,{newsitems:i.newsitems})||null)),p&&le.a.createElement(xn,{src:p}),m&&le.a.createElement(On,{item:m}))},Sn=Oe.a.div(B||(B=Object(ve.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]))),Un=function(e){var t=e.item;return le.a.createElement(Sn,{dangerouslySetInnerHTML:{__html:t.description}})},Dn=(Oe.a.div(V||(V=Object(ve.a)(["\n  position: relative;\n"]))),Oe.a.div(G||(G=Object(ve.a)(["\n  // border: 1px solid orange;\n\n  position: absolute;\n  top: 0;\n  left: calc(100vw - 80px);\n  background: white;\n  padding: 5px;\n\n  display: flex;\n  flex-direction: column;\n  z-index: 10;\n"]))),Oe.a.div(q||(q=Object(ve.a)(["\n  // border: 2px solid brown;\n\n  text-align: center;\n  display: block;\n\n  position: relative; /* required for mobile, so that zoomCtrl, etc are inside the collapsible div */\n\n  overflow: scroll;\n  max-height: 80vh; // @TODO: huh?\n"]))),Oe.a.div(J||(J=Object(ve.a)([""]))),Oe.a.div(Y||(Y=Object(ve.a)(["\n  margin: 10px;\n  width: 20vw;\n"])))),In=function(e){pt(e,"Markers");var t=Object(we.g)(),n=[];return e.markers.map((function(e,a){n.push(le.a.createElement(Dn,{key:a,onClick:function(){return e.url?window.location.href=e.url:t.push("/en/locations/show/".concat(e.slug))}},le.a.createElement("img",{src:e.title_img_path}),le.a.createElement("br",null),e.name))})),le.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},n)},Ln=Oe.a.div(X||(X=Object(ve.a)(["\n  margin-top: 2em;\n"]))),Mn=function(e){pt(e,"LocationsShowMobile");var t=e.match,n=Object(oe.useState)(!1),a=Object(me.a)(n,2),r=a[0],c=a[1],o=Object(oe.useState)(null),l=Object(me.a)(o,2),i=l[0],s=l[1],u=Object(oe.useRef)("init");return Object(oe.useEffect)((function(){c(!0);var e=localStorage.getItem("jwt_token");return at.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(!u.current)return null;s(e.data.map),pt(e.data.map,"setLocation"),c(!1)})).finally((function(){})),function(){}}),[t.params.slug]),le.a.createElement(Ln,null,r&&le.a.createElement("i",null,"Loading..."),i&&le.a.createElement(En,i),i&&i.description&&le.a.createElement($e,{slug:it.collapsible.descr,label:"Description"},le.a.createElement(Un,{item:i}))||null,i&&i.markers.length&&le.a.createElement($e,{slug:"markers-sec",label:"Markers"},le.a.createElement(In,{markers:i.markers}))||null,i&&i.newsitems.length&&le.a.createElement($e,{slug:"news-sec",label:"Newsitems"},le.a.createElement(an,{newsitems:i.newsitems}))||null)},Pn=Oe.a.div(Z||(Z=Object(ve.a)(["\n  // border: 3px solid green;\n\n  text-align: center;\n  display: block;\n\n  position: relative;\n  overflow: scroll;\n\n  height: calc(100vh - "," -\n    ","); /* @TODO: it's not really 4 borders, it's 1 on top, and 2 but thick (collapsed) on bottom. */\n\n"])),(function(e){return e.breadcrumbsHeight}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight," - 2*").concat(e.borderWidth):"4*".concat(e.borderWidth)})),Tn=Oe.a.div(K||(K=Object(ve.a)(["\n  // border: 2px solid cyan;\n\n  display: inline-block;\n  position: relative;\n\n"]))),Wn=Oe.a.div(Q||(Q=Object(ve.a)(["\n  border: ","px solid red;\n\n  position: relative;\n  overflow: scroll;\n  height: calc(100vh - "," -\n    ","); /* @TODO: it's not really 4 borders, it's 1 on top, and 2 but thick (collapsed) on bottom. */\n"])),(function(e){return e.debug?"1":"0"}),(function(e){return e.breadcrumbsHeight}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight," - 2*").concat(e.borderWidth):"4*".concat(e.borderWidth)})),Hn=function(e){var t=Object(oe.useContext)(bt),n=t.zoom,a=t.setZoom;return le.a.createElement("div",{style:{position:"absolute",top:0,right:0,zIndex:1,background:"white",padding:"5px",display:"flex",flexDirection:"column"}},le.a.createElement("span",{onClick:function(){a(n/2)}},"[+]"),le.a.createElement("span",{onClick:function(){a(2*n)}},"[-]"),le.a.createElement("span",{onClick:function(){a(1)}},"[1]"))},Fn=function(e){var t=e.map,n=Object(oe.useContext)(bt),a=n.bottomDrawerOpen,r=(n.setBottomDrawerOpen,n.showUrl,n.setShowUrl),c=n.zoom,o=(n.setZoom,Object(oe.useRef)(null));pt(o,"div1Ref");var l=Object(we.g)();Object(oe.useEffect)((function(){o.current.scroll({top:200,left:200,behavior:"smooth"})}),[]);var i=[];return t.markers.map((function(e,t){var n=le.a.createElement("div",{key:t,onClick:function(){return e.url?r(e.url):l.push("/en/locations/show/".concat(e.slug))},style:{position:"absolute",top:c>1?(e.y-e.centerOffsetY)/c:e.y/c-e.centerOffsetY,left:c>1?(e.x-e.centerOffsetX)/c:e.x/c-e.centerOffsetX}},le.a.createElement("img",{src:e.img_path,style:{display:"block",maxWidth:"".concat(e.w/c,"px"),maxHeight:"".concat(e.h/c,"px"),width:"auto",height:"auto"}}));i.push(n)})),le.a.createElement(Wn,Object.assign({},dt,{bottomDrawerOpen:a,debug:ge.a.debug,className:"MapPanel"}),le.a.createElement(Hn,null),le.a.createElement(Pn,Object.assign({},dt,{bottomDrawerOpen:a}),le.a.createElement(Tn,{ref:o,style:{width:"".concat(t.w/c,"px"),height:"".concat(t.h/c,"px")}},le.a.createElement("img",{src:t.img_path,style:{width:"".concat(t.w/c,"px"),height:"".concat(t.h/c,"px")}}),i)))},An=function(e){pt(e,"Markers");var t=Object(we.g)(),n=Object(oe.useContext)(bt),a=(n.showUrl,n.setShowUrl),r=[];return e.markers.map((function(e,n){r.push(le.a.createElement("div",{key:n,style:{margin:"10px"},onClick:function(){return function(e){e.url?a(e.url):t.push("/en/locations/show/".concat(e.slug))}(e)}},le.a.createElement("img",{src:e.title_img_path}),le.a.createElement("br",null),e.name))})),le.a.createElement("div",{style:{display:"flex"}},r)},Rn=(n(195),Oe.a.div($||($=Object(ve.a)(["\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n"])))),zn=function(){return le.a.createElement(Rn,null,le.a.createElement("img",{className:"image",src:"/assets/hero.png"}))},Bn=Oe.a.div(ee||(ee=Object(ve.a)(["\n  padding: 0;\n  margin: 0;\n  height: 100vh;\n"]))),Vn=function(e){var t=Object(oe.useState)([]),n=Object(me.a)(t,2),a=n[0],r=n[1],c=Object(oe.useState)(!1),o=Object(me.a)(c,2),l=o[0],i=o[1],s=ye(),u=Object(oe.useRef)("init");return Object(oe.useEffect)((function(){return s.applicationHome().then((function(e){if(!u.current)return null;r(e.newsitems),i(!1)})),function(){u.current=!1}}),[]),le.a.createElement(oe.Fragment,null,le.a.createElement(Bn,null,le.a.createElement(zn,null),le.a.createElement(an,{newsitems:a}),"\xa0"),le.a.createElement(_e.h,{isOpen:l,onDidDismiss:function(){return i(!1)},message:"Please wait...",duration:5e3}))},Gn=n(272),qn=Object(Gn.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),Jn=Oe.a.div(te||(te=Object(ve.a)(["\n  border-bottom: 1px solid red;\n"]))),Yn=function(e){pt(e,"Video");ye();var t=e.item;return le.a.createElement(Jn,{key:e.idx},le.a.createElement("h5",null,"Video ",t.name),le.a.createElement("p",null,"created ",t.created_at),le.a.createElement("video",{controls:!0,preload:"metadata",type:"video/mp4",src:t.video_url,style:{maxWidth:"500px",maxHeight:"90vh"}}))},Xn=function(){pt(ge.a,"Videos component"),console.log(JSON.stringify(ge.a));var e=Object(oe.useState)([]),t=Object(me.a)(e,2),n=t[0],a=t[1],r=localStorage.getItem("jwtToken"),c=qn(),o=ye();return Object(oe.useEffect)((function(){pt("posting..."),at.post(o.myVideosPath,{jwtToken:r}).then((function(e){return e.data})).then((function(e){var t=e.videos;pt(t,"data"),a(t)}))}),[]),le.a.createElement(ht.a,{maxWidth:"md"},le.a.createElement(Ce.a,{container:!0,className:c.root},le.a.createElement(Ce.a,{item:!0,xs:12},le.a.createElement("h2",null,"My Videos")),le.a.createElement(Ce.a,{item:!0,xs:12},n&&n.map((function(e,t){return le.a.createElement(Yn,{key:t,item:e})})))))},Zn=Oe.a.div(ne||(ne=Object(ve.a)(["\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]))),Kn=Object(Oe.a)(ht.a)(ae||(ae=Object(ve.a)(["\n  height: 100vh;\n  overflow: scroll;\n"]))),Qn=function(e){pt(e,"AppDesktop");e.currentUser,e.setCurrentUser,e.loginModalOpen,e.setLoginModalOpen,ye();var t=Object(oe.useState)(it.layout_onecol),n=Object(me.a)(t,2),a=n[0],r=n[1],c=function(e){switch(a){case it.layout_onecol:return le.a.createElement(Kn,Object.assign({maxWidth:"md"},e));case it.layout_mapui:return le.a.createElement(Bt,e)}},o=function(e){return Object(oe.useEffect)((function(){e.layout?r(e.layout):r(it.layout_onecol)}),[e.layout]),le.a.createElement(we.b,e)};return le.a.createElement(Ne.a,null,le.a.createElement(ke.a,null),le.a.createElement(ft,Object.assign({},e,{layout:a,setLayout:r}),a===it.layout_onecol&&le.a.createElement(Lt,{variant:it.variants.floating}),le.a.createElement(Zn,null,le.a.createElement(c,null,le.a.createElement(we.d,{id:"main",main:!0},le.a.createElement(we.a,{exact:!0,from:"/",to:"/en"}),le.a.createElement(o,{exact:!0,path:"/en"},le.a.createElement(Vn,null)),le.a.createElement(o,{exact:!0,path:"/en/account",component:Se}),le.a.createElement(o,{exact:!0,path:"/en/account/my/videos",component:Xn}),le.a.createElement(o,{exact:!0,path:"/en/account/my/galleries",component:bn}),le.a.createElement(o,{exact:!0,path:"/en/cities",component:Yt}),le.a.createElement(o,{path:"/en/cities/travel-to/:name",component:pn}),le.a.createElement(o,{exact:!0,path:"/en/galleries/show/:slug",component:dn}),le.a.createElement(o,{exact:!0,path:"/en/reports/show/:slug",component:jn}),le.a.createElement(o,{exact:!0,path:"/en/locations/show/:slug",component:Nn,layout:it.layout_mapui})))),le.a.createElement(xt,null),le.a.createElement(Rt,null),le.a.createElement(Ie,null)))},$n=Oe.a.div(re||(re=Object(ve.a)(["\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]))),ea=Object(Oe.a)(ht.a)(ce||(ce=Object(ve.a)(["\n  height: 100vh;\n  overflow: scroll;\n"]))),ta=function(e){pt(e,"AppMobile");e.currentUser,e.setCurrentUser;var t=Object(oe.useState)(it.layout_onecol),n=Object(me.a)(t,2),a=n[0],r=n[1],c=le.a.useState(!1),o=Object(me.a)(c,2),l=o[0],i=o[1],s=le.a.useState(!1),u=Object(me.a)(s,2),m=(u[0],u[1],Object(oe.useState)(1)),p=Object(me.a)(m,2),d=(p[0],p[1],ye(),function(e){switch(a){case it.layout_onecol:return le.a.createElement(ea,Object.assign({maxWidth:"md"},e));case it.layout_mapui:return le.a.createElement(Bt,Object.assign({},e,{bottomDrawerOpen:l,setBottomDrawerOpen:i}))}}),b=function(e){return Object(oe.useEffect)((function(){e.layout?r(e.layout):r(it.layout_onecol)}),[e.layout]),le.a.createElement(we.b,e)};return le.a.createElement(Ne.a,null,le.a.createElement(ft,Object.assign({},e,{layout:a,setLayout:r}),le.a.createElement(ut,null,a===it.layout_onecol&&le.a.createElement(Lt,{variant:it.variants.floating}),le.a.createElement($n,{className:"Root"},le.a.createElement(d,{className:"Container"},le.a.createElement(we.d,{id:"main",main:!0},le.a.createElement(we.a,{exact:!0,from:"/",to:"/en"}),le.a.createElement(b,{exact:!0,path:"/en"},le.a.createElement(Vn,null)),le.a.createElement(b,{exact:!0,path:"/en/account",component:Se}),le.a.createElement(b,{exact:!0,path:"/en/account/my/videos",component:Xn}),le.a.createElement(b,{exact:!0,path:"/en/account/my/galleries",component:bn}),le.a.createElement(b,{exact:!0,path:"/en/cities",component:Yt}),le.a.createElement(b,{path:"/en/cities/travel-to/:name",component:pn}),le.a.createElement(b,{exact:!0,path:"/en/galleries/show/:slug",component:dn}),le.a.createElement(b,{exact:!0,path:"/en/reports/show/:slug",component:jn}),le.a.createElement(b,{exact:!0,path:"/en/locations/show/:slug",component:Mn})))),le.a.createElement(xt,null),le.a.createElement(Rt,null),le.a.createElement(Ie,null))))},na=function(e){pt(e,"AppWrapper");var t=ye(),n=Object(oe.useState)(!1),a=Object(me.a)(n,2),r=a[0],c=a[1],o=Object(oe.useState)(!1),l=Object(me.a)(o,2),i=l[0],s=l[1],u=Object(oe.useRef)("init");Object(oe.useEffect)((function(){return function(){var e=Object(ue.a)(de.a.mark((function e(){var n;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(it.jwt_token),e.next=3,at.get("".concat(ge.a.apiOrigin).concat(t.myAccount(),"?jwt_token=").concat(n)).then((function(e){u.current&&c(e.data)})).catch((function(e){pt(e,"e12"),"Request failed with status code 401"===e.message&&(ge.a.requireLogin||"undefined"===typeof ge.a.requireLogin)&&s(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return u.current=null}}),[r]);var m=Object(oe.useState)(null),p=Object(me.a)(m,2),d=p[0],b=p[1];(function(){var e=Object(ue.a)(de.a.mark((function e(){var t;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.getInfo();case 2:t=e.sent,b(t.operatingSystem);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();var f={currentUser:r,setCurrentUser:c,loginModalOpen:i,setLoginModalOpen:s};return d?"ios android".includes(d)?le.a.createElement(ta,f):le.a.createElement(Qn,f):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));se.a.render(le.a.createElement(na,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,n){},74:function(e,t,n){}},[[151,3,4]]]);
//# sourceMappingURL=main.c5b9620d.chunk.js.map