(this.webpackJsonpguyd=this.webpackJsonpguyd||[]).push([[1],{128:function(e,t,n){},129:function(e,t,n){},155:function(e,t,n){e.exports=n(202)},161:function(e,t,n){var a={"./ion-action-sheet.entry.js":[207,5],"./ion-alert.entry.js":[208,6],"./ion-app_8.entry.js":[209,7],"./ion-avatar_3.entry.js":[210,17],"./ion-back-button.entry.js":[211,18],"./ion-backdrop.entry.js":[212,44],"./ion-button_2.entry.js":[213,19],"./ion-card_5.entry.js":[214,20],"./ion-checkbox.entry.js":[215,21],"./ion-chip.entry.js":[216,22],"./ion-col_3.entry.js":[217,45],"./ion-datetime_3.entry.js":[218,10],"./ion-fab_3.entry.js":[219,23],"./ion-img.entry.js":[220,46],"./ion-infinite-scroll_2.entry.js":[221,47],"./ion-input.entry.js":[222,24],"./ion-item-option_3.entry.js":[223,25],"./ion-item_8.entry.js":[224,26],"./ion-loading.entry.js":[225,27],"./ion-menu_3.entry.js":[226,28],"./ion-modal.entry.js":[227,8],"./ion-nav_2.entry.js":[228,14],"./ion-popover.entry.js":[229,9],"./ion-progress-bar.entry.js":[230,29],"./ion-radio_2.entry.js":[231,30],"./ion-range.entry.js":[232,31],"./ion-refresher_2.entry.js":[233,11],"./ion-reorder_2.entry.js":[234,16],"./ion-ripple-effect.entry.js":[235,48],"./ion-route_4.entry.js":[236,32],"./ion-searchbar.entry.js":[237,33],"./ion-segment_2.entry.js":[238,34],"./ion-select_3.entry.js":[239,35],"./ion-slide_2.entry.js":[240,49],"./ion-spinner.entry.js":[241,13],"./ion-split-pane.entry.js":[242,50],"./ion-tab-bar_2.entry.js":[243,36],"./ion-tab_2.entry.js":[244,15],"./ion-text.entry.js":[245,37],"./ion-textarea.entry.js":[246,38],"./ion-toast.entry.js":[247,39],"./ion-toggle.entry.js":[248,12],"./ion-virtual-scroll.entry.js":[249,51]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=161,e.exports=r},163:function(e,t,n){var a={"./ion-icon.entry.js":[250,58]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=163,e.exports=r},164:function(e,t,n){},19:function(e,t){e.exports={apiOrigin:"https://manager.piousbox.com",domain:"tgm.piousbox.com",appIndexPath:"src/index"}},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){"use strict";n.r(t);var a,r,c,o,l,i,s,u,m,p,d,f,b,g,E,h,v,j,O,y,w,k,x,_,N,C,S,U,I,D,L,M,T,P,W,F,H,A,R,z,B,V,J,G,Y,q,Z,X,K,Q,$,ee,te,ne,ae,re,ce=n(0),oe=n.n(ce),le=n(17),ie=n.n(le),se=n(11),ue=n(5),me=n(15),pe=n.n(me),de=n(144),fe=n(19),be=n.n(fe),ge=n(4),Ee=n(278),he=n(3),ve=function(){var e=Object(ce.useContext)(dt),t=(e.currentUser,e.setCurrentUser,localStorage.getItem(it.jwt_token));return{doUnlock:function(e){var t=e.kind,n=e.id,a=localStorage.getItem("jwt_token");return"/api/payments/unlock?kind=".concat(t,"&id=").concat(n,"&jwt_token=").concat(a)},getMyAccount:function(){var e=localStorage.getItem("jwt_token");return ct.post("/api/my/account",{jwt_token:e})},loginPath:"/api/users/login.json",longTermTokenPath:"/api/users/long_term_token",myAccount:function(){return"/api/my/account"},myVideosPath:"/api/my/videos",paymentsPath:"/api/payments2",reportsGet:function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},n="";return t&&(n="jwt_token=".concat(t.jwt_token)),"".concat(be.a.apiOrigin,"/api/reports/view/").concat(e,"?").concat(n)},getCities:function(){return ct.get("".concat(be.a.apiOrigin,"/api/cities")).then((function(e){return e.data}))},getCity:function(e){return ct.get("".concat(be.a.apiOrigin,"/api/cities/view/").concat(e))},applicationHome:function(){var e=Object(se.a)(pe.a.mark((function e(){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.get("".concat(be.a.apiOrigin,"/api/sites/view/").concat(be.a.domain),{params:{jwt_token:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},je=(n(33),n(26)),Oe=n(74),ye=(n(160),n(83)),we=(n(105),n(7)),ke=n(271),xe=n(270),_e=n(20),Ne=(n(164),Object(xe.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}}))),Ce=function(e){var t=Ne(),n=Object(ce.useContext)(dt),a=n.currentUser;n.setCurrentUser;return oe.a.createElement(ce.Fragment,null,oe.a.createElement(ke.a,{container:!0,spacing:2,className:t.root},oe.a.createElement(ke.a,{item:!0,xs:12},oe.a.createElement(ke.a,{container:!0},oe.a.createElement(ke.a,{item:!0,xs:6},oe.a.createElement("img",{src:"/assets/accounts/default-avatar.png",alt:"profile pic"})),oe.a.createElement(ke.a,{item:!0,xs:6},!!a&&oe.a.createElement(ce.Fragment,null,oe.a.createElement("h4",null,a.email),oe.a.createElement("ul",null,oe.a.createElement("li",null,oe.a.createElement(_e.b,{to:"/en/account/my/galleries"},"My Galleries")),oe.a.createElement("li",null,oe.a.createElement("a",{onClick:function(){return e.history.push("/en/account/my/videos")}},"My Videos")),oe.a.createElement("li",null,oe.a.createElement(Be,null))))||oe.a.createElement(ce.Fragment,null,oe.a.createElement("h4",null,"Not logged in"),oe.a.createElement(ze,null),oe.a.createElement("br",null),oe.a.createElement("br",null),oe.a.createElement(Ve,null)))))))},Se=n(37),Ue=n.n(Se),Ie=function(e){mt(e,"LoginModal");var t=Object(ce.useContext)(dt),n=t.loginModalOpen,a=t.setLoginModalOpen;return oe.a.createElement(Ue.a,{style:{zIndex:3},isOpen:n},oe.a.createElement("h1",null,"Please Login",oe.a.createElement("button",{onClick:function(){return a(!1)}},"[x]")),oe.a.createElement(ze,null),oe.a.createElement(Ve,null))},De=n(52),Le=n(137),Me=Object(Le.a)("pk_test_qr1QPmSpLdBFt1F7itdWJOj3"),Te=function(e){return oe.a.createElement(ce.Fragment,null,oe.a.createElement("button",null,"do login"))},Pe=he.a.div(a||(a=Object(ge.a)(["\n  // border: 1px solid red;\n\n  background: white;\n  height: 100px;\n  width: calc(100vw - ","px);\n  padding: 1em;\n  margin-bottom: ","px;\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.borderWidth})),We=he.a.div(r||(r=Object(ge.a)(["\n  display: flex;\n  justify-content: center;\n  background: #dedede;\n"]))),Fe=function(e){var t=ve(),n=Object(ce.useContext)(dt),a=n.currentUser,r=(n.setCurrentUser,Object(De.useStripe)()),c=Object(De.useElements)(),o=Object(ce.useState)(!1),l=Object(ue.a)(o,2),i=l[0],s=l[1],u=function(){var e=Object(se.a)(pe.a.mark((function e(n){var a,o,l,i;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),mt("purchasing..."),r&&c){e.next=4;break}return e.abrupt("return");case 4:return c.getElement(De.CardElement),a=localStorage.getItem("jwt_token"),e.next=8,ct.get("".concat(be.a.apiOrigin).concat(t.paymentsPath,"?jwt_token=").concat(a));case 8:return o=(o=e.sent).data.client_secret,mt(o,"client_secret"),e.next=13,r.confirmCardPayment(o,{payment_method:{card:c.getElement(De.CardElement)}});case 13:if(l=e.sent,mt(l,"result"),!l.error){e.next=19;break}mt(l.error.message,"error message"),e.next=27;break;case 19:if("succeeded"!==l.paymentIntent.status){e.next=26;break}return e.next=22,ct.get("".concat(be.a.apiOrigin).concat(t.myAccount(),"?jwt_token=").concat(a));case 22:i=e.sent,mt(i,"ze3response"),e.next=27;break;case 26:mt("something else");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=pt.borderWidth;return a?oe.a.createElement(We,null,oe.a.createElement(Pe,{borderWidth:m},a.email?a.email:oe.a.createElement(Te,null)," \xa0 [\xa0","number"===typeof a.n_unlocks?a.n_unlocks:"?"," coins\xa0]\xa0 \xa0",oe.a.createElement("button",{onClick:function(){return s(!0)}},"buy"),oe.a.createElement(Ue.a,{isOpen:i,ariaHideApp:!1,style:{width:"500px"}},oe.a.createElement("h1",null,"Purchase this",oe.a.createElement("span",{onClick:function(){mt("clicking..."),s(!1)}},"[x]")),oe.a.createElement("form",{onSubmit:u},oe.a.createElement(De.CardElement,null),oe.a.createElement("button",{type:"submit",disabled:!r},"Pay"))))):null},He=function(e){return oe.a.createElement(De.Elements,{stripe:Me},oe.a.createElement(Fe,e))},Ae=Oe.a.FacebookLogin,Re=["email"],ze=function(e){var t=ve(),n=Object(ce.useContext)(dt),a=(n.currentUser,n.setCurrentUser),r=function(){var e=Object(se.a)(pe.a.mark((function e(){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.login({permissions:Re});case 2:(n=e.sent).accessToken?ct.post("".concat(be.a.apiOrigin).concat(t.longTermTokenPath),{accessToken:n.accessToken.token}).then((function(e){localStorage.setItem(it.jwt_token,e.data.jwt_token),localStorage.setItem(it.current_user,JSON.stringify(e.data)),a(e.data)})).catch((function(e){mt(e,"Could not post request to ".concat(be.a.apiOrigin).concat(t.longTermTokenPath))})):mt("canceled");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return oe.a.createElement(lt,{onClick:r},"FB Login")},Be=function(){var e=Object(ce.useContext)(dt),t=(e.currentUser,e.setCurrentUser);return oe.a.createElement(lt,{onClick:function(){localStorage.removeItem(it.jwt_token),localStorage.removeItem(it.current_user),t(null)}},"Logout")},Ve=function(e){var t=ve(),n=Object(ce.useContext)(dt),a=(n.currentUser,n.setCurrentUser),r=(n.loginModalOpen,n.setLoginModalOpen),c=Object(ce.useState)(""),o=Object(ue.a)(c,2),l=o[0],i=o[1],s=Object(ce.useState)(""),u=Object(ue.a)(s,2),m=u[0],p=u[1],d=function(){var e=Object(se.a)(pe.a.mark((function e(n,c){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ct.post("".concat(be.a.apiOrigin).concat(t.loginPath),{email:n,password:c}).then((function(e){return e.data})).then((function(e){a(e),localStorage.setItem("jwt_token",e.jwt_token),localStorage.setItem("current_user",JSON.stringify(e)),r(!1)})).catch((function(e){mt(e,"e322"),Object(ye.b)("Login failed"),a(null)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return oe.a.createElement(ce.Fragment,null,oe.a.createElement("input",{type:"email",value:l,onChange:function(e){return i(e.target.value)}}),oe.a.createElement("br",null),oe.a.createElement("input",{type:"password",value:m,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&d(l,m)}}),oe.a.createElement("br",null),oe.a.createElement(lt,{onClick:function(){return d(l,m)}},"Password Login"))},Je={cityPath:function(e){return"/en/cities/travel-to/".concat(e)}},Ge=n(27),Ye=n(94),qe=n(85),Ze=["children"],Xe=function(){return oe.a.createElement("span",null,"\xa0>\xa0\xa0")},Ke=function(){return oe.a.createElement("span",null,"\xa0<\xa0\xa0")},Qe=he.a.div(c||(c=Object(ge.a)(["\n  display: flex;\n"]))),$e=he.a.div(o||(o=Object(ge.a)(["\n  background: #dedede;\n  margin: .5em;\n  padding: .5em;\n\n  margin-bottom: 1em;\n"]))),et=he.a.div(l||(l=Object(ge.a)(["\n  // border: 2px solid red;\n\n  max-height: 100vh;\n"]))),tt=function(e){var t=e.children,n=Object(qe.a)(e,Ze);mt(n,"Collapsible");var a=Object(ce.useContext)(st);if(mt(a,"ctx"),!a)return null;var r=a.collapsibles,c=a.setCollapsibles,o=!!r[n.slug];return oe.a.createElement($e,null,oe.a.createElement(Qe,{onClick:function(){c(Object(Ye.a)(Object(Ye.a)({},r),{},Object(Ge.a)({},n.slug,!r[n.slug])))}},o?oe.a.createElement(Ke,null):oe.a.createElement(Xe,null)," ",n.label," "),!o&&oe.a.createElement(et,null,t))},nt=n(141),at=n.n(nt),rt={baseURL:be.a.apiOrigin},ct=at.a.create(rt),ot=Object(he.a)(Ee.a)(i||(i=Object(ge.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ",";\n\n  display: flex;\n  flex-direction: column;\n"])),(function(e){return e.cursor?e.cursor:"auto"})),lt=he.a.div(s||(s=Object(ge.a)(["\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  padding: .3em 1em;\n  cursor: pointer;\n"]))),it={current_user:"current_user",jwt_token:"jwt_token",item_types:{gallery:"Gallery",report:"Report",video:"Video"},layout_onecol:"onecol",layout_mapui:"mapui"},st=oe.a.createContext({}),ut=(he.a.div(u||(u=Object(ge.a)(["\n"]))),function(e){switch(e){case"Gallery":return"galleries";default:return"".concat(e.toLowerCase(),"s")}}),mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(n="string"===typeof n?n:t.replace(/\W/g,"")).length>0&&(window[n]=e),console.log("+++ ".concat(t,":"),e)},pt={borderWidth:10,bottomDrawerHeight:100},dt=oe.a.createContext({}),ft=he.a.div(m||(m=Object(ge.a)(["\n  height: 100vh;\n"]))),bt=n(276),gt=(n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(277)),Et=n(273),ht=n(84),vt=n.n(ht),jt=he.a.div(p||(p=Object(ge.a)(["\n  // height: 100px;\n  // position: absolute;\n  // bottom: 0;\n"]))),Ot=he.a.div(d||(d=Object(ge.a)(["\n  // border: 1px solid yellow;\n  position: absolute;\n  bottom: -10px;\n  left: 10px;\n"]))),yt=function(e){var t=Object(ce.useContext)(dt),n=t.bottomDrawerOpen,a=t.layout,r=t.setBottomDrawerOpen;return a===it.layout_onecol?null:oe.a.createElement(ce.Fragment,null,oe.a.createElement(jt,null,oe.a.createElement(Ot,null,oe.a.createElement(Et.a,{"aria-label":"open drawer",onClick:function(){return r(!0)},edge:"start",className:"menu-btn"},oe.a.createElement(vt.a,{fontSize:"small",style:{color:"white"}}))),oe.a.createElement(_t,null)),oe.a.createElement(gt.a,{anchor:"bottom",elevation:1,open:n,onClose:function(){return r(!1)},BackdropProps:{invisible:!0},variant:"persistent"},oe.a.createElement("div",null,oe.a.createElement(He,null),oe.a.createElement("div",{onClick:function(){return r(!1)},style:{position:"absolute",left:0,bottom:0}},"[X]"))))},wt=n(12),kt=(n(71),[{title:"Homefeed",icon:wt.n,url:"/en"},{title:"Cities",icon:wt.c,url:"/en/cities"},{title:"My Account",icon:wt.o,url:"/en/account"},{title:"Account2",icon:wt.o,url:"/en/account2"},{title:"Login",icon:wt.q}]),xt=function(){return oe.a.createElement(we.i,{contentId:"main",type:"overlay"},oe.a.createElement(we.b,null,oe.a.createElement(we.l,{color:"primary"},oe.a.createElement(we.k,null,"Menu"))),oe.a.createElement(we.a,null,oe.a.createElement("img",{src:"/assets/hero.png"}),oe.a.createElement(we.g,{id:"inbox-list"},kt.map((function(e,t){return oe.a.createElement(we.j,{key:t,autoHide:!1},oe.a.createElement(we.e,{routerLink:e.url,routerDirection:"none",lines:"none",detail:!1},oe.a.createElement(we.c,{slot:"start",ios:e.icon,md:e.icon}),oe.a.createElement(we.f,null,e.title)))})))))},_t=function(){return oe.a.createElement(we.i,{type:"overlay"},oe.a.createElement(we.b,null,oe.a.createElement(we.l,{color:"primary"},oe.a.createElement(we.k,null,"Menu"))),oe.a.createElement(we.a,null,oe.a.createElement("img",{src:"/assets/hero.png"}),oe.a.createElement("h1",null,"what's here?")))},Nt=n(274),Ct=n(275),St=he.a.div(f||(f=Object(ge.a)(["\n  // border: 1px solid green;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  background: white;\n"]))),Ut=he.a.div(b||(b=Object(ge.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n"]))),It=he.a.div(g||(g=Object(ge.a)(["\n"]))),Dt=function(e){var t=oe.a.useState(!1),n=Object(ue.a)(t,2),a=n[0],r=n[1],c=Object(ce.useState)(!1),o=Object(ue.a)(c,2),l=o[0],i=(o[1],Object(je.g)()),s=Object(ce.useContext)(dt),u=s.currentUser;s.setCurrentUser;return oe.a.createElement(ce.Fragment,null,oe.a.createElement(St,null,oe.a.createElement(Et.a,{"aria-label":"open drawer",onClick:function(){return r(!0)},edge:"start",className:"menu-btn"},oe.a.createElement(vt.a,null)),oe.a.createElement(xt,null)),oe.a.createElement(gt.a,{anchor:"left",open:a,onClose:function(){return r(!1)}},oe.a.createElement(Ut,null,oe.a.createElement(Nt.a,null,oe.a.createElement(Ct.a,{button:!0,key:"newsfeed",onClick:function(){r(!1),i.push("/en")}},"Newsfeed"),oe.a.createElement(Ct.a,{button:!0,key:"cities",onClick:function(){r(!1),i.push("/en/cities")}},oe.a.createElement("span",null,"Cities")),u&&u.bookmarks.map((function(e,t){return oe.a.createElement(Ct.a,{button:!0,key:t,onClick:function(){r(!1),i.push("/en/locations/show/".concat(e.slug))}},oe.a.createElement("span",null,e.name))})),oe.a.createElement(Ct.a,{button:!0,key:"account",onClick:function(){r(!1),i.push("/en/account")}},oe.a.createElement("span",null,"Account"))),oe.a.createElement(It,null,l&&"Loading...",u&&oe.a.createElement(ce.Fragment,null,u.email,oe.a.createElement("br",null),u.n_stars,oe.a.createElement("br",null),"some action")))))},Lt=he.a.div(E||(E=Object(ge.a)(["\n  margin-top: .5em;\n"]))),Mt=Object(je.i)((function(e){var t=e.created_at,n=e.username,a=e.city,r=e.tags,c=void 0===r?[]:r;return oe.a.createElement(Lt,null,oe.a.createElement("span",{className:"date"}," On ",(t||"").substring(0,10)," "),n&&oe.a.createElement(oe.a.Fragment,null,"by ",oe.a.createElement("span",{className:"user"}," ",n," ")),a&&oe.a.createElement(oe.a.Fragment,null,"in ",oe.a.createElement("span",{className:"city",onClick:function(){e.history.push("/en/cities/travel-to/".concat(a.slug,"/show/newsfeed"))}}," ",a.name," ")),c&&c.map((function(e,t){return oe.a.createElement("span",{key:t,className:"tags"},e.name)})))})),Tt=function(e){var t=e.rate,n=Object(ce.useState)([]),a=Object(ue.a)(n,2),r=a[0],c=a[1],o={0:wt.x,1:wt.w,2:wt.v};return Object(ce.useEffect)((function(){for(var e=new Array(5).fill(0),n=0;t>0;)e[n]=t<1?1:2,t--,n++;c(e)}),[]),oe.a.createElement("span",{className:"rating"},r.map((function(e,t){return oe.a.createElement(we.c,{key:t,className:"stars",icon:o[e]})})))},Pt=(n(198),he.a.div(h||(h=Object(ge.a)(["\n  display: inline;\n  cursor: pointer;\n"])))),Wt=he.a.div(v||(v=Object(ge.a)(["\n  display: flex;\n  justify-content: space-around;\n"]))),Ft=he.a.div(j||(j=Object(ge.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),Ht={overlay:{},content:{margin:"auto",width:"400px"}},At=function(e){mt(e,"UnlockModal");var t=Object(ce.useContext)(dt),n=t.currentUser,a=t.setCurrentUser,r=t.itemToUnlock,c=t.setItemToUnlock,o=(t.loginModalOpen,t.setLoginModalOpen),l=(Object(ce.useContext)(dt),ve()),i=function(){var e=Object(se.a)(pe.a.mark((function e(){var t;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.doUnlock({kind:r.item_type,id:r.id}),e.next=3,ct.post("".concat(be.a.apiOrigin).concat(t)).then((function(e){c({})})).catch((function(e){mt(e,"e19")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=Object(ce.useRef)("init");return Object(ce.useEffect)((function(){return function(){var e=Object(se.a)(pe.a.mark((function e(){var t;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem(it.jwt_token),e.next=3,ct.get("".concat(be.a.apiOrigin).concat(l.myAccount(),"?jwt_token=").concat(t)).then((function(e){s.current&&a(e.data)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return s.current=null}}),[r.id]),r.id?oe.a.createElement(Ue.a,{style:Ht,ariaHideApp:!1,isOpen:!!r.id},oe.a.createElement(Ft,null,oe.a.createElement("h1",null,"Unlock this item?"),oe.a.createElement(Pt,{onClick:function(){return c(!1)}},"\xd7")),oe.a.createElement("p",null,"To access this content, please unlock it first. It costs 1 (one) coin to unlock."),!!n&&oe.a.createElement("p",null,"You have ",oe.a.createElement("b",null,n.n_unlocks)," unlocks.")||oe.a.createElement("p",null,"You have to be logged in to unlock content. ",oe.a.createElement("a",{onClick:function(){o(!0),c(!1)}},"Please login.")),oe.a.createElement(Wt,null,!!n&&oe.a.createElement(lt,{onClick:i},"Unlock"))):null},Rt=he.a.div(O||(O=Object(ge.a)(["\n  background: white;\n\n  overflow: hidden;\n  margin: 10px;\n  height: calc(100vh - ","px - ",");\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth/2,"px"):"0px"})),zt=function(e){return oe.a.createElement(Rt,Object.assign({},e,{bottomDrawerHeight:100,borderWidth:20}))},Bt=(n(129),function(e){var t=Object(ce.useState)([]),n=Object(ue.a)(t,2),a=n[0],r=n[1],c=Object(ce.useState)([]),o=Object(ue.a)(c,2),l=o[0],i=o[1],s=Object(ce.useState)(!1),u=Object(ue.a)(s,2),m=u[0],p=u[1],d=ve(),f=Object(je.g)();Object(ce.useEffect)((function(){p(!0),d.getCities().then((function(e){p(!1),i(e),r(e)}))}),[]);return oe.a.createElement(ce.Fragment,null,oe.a.createElement(ft,{className:"cities"},oe.a.createElement("h1",{className:"heading"},"Cities"),oe.a.createElement(_e.b,{to:"/en/account"},"Account"),oe.a.createElement("div",{className:"filter-section"},oe.a.createElement("input",{className:"filter-input",onChange:function(e){var t=a.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.trim().toLowerCase())>-1}));i(t)}}),oe.a.createElement(we.c,{className:"filter-icon",icon:wt.j})),oe.a.createElement("div",{className:"bookmark-section"},oe.a.createElement("label",{className:"switch"},oe.a.createElement("input",{type:"checkbox",onChange:function(){},checked:!0}),oe.a.createElement("span",{className:"slider round"})),oe.a.createElement("span",{className:"bookmark-text"},"Show only bookmarked")),oe.a.createElement("div",{className:"container"},l.map((function(e,t){return oe.a.createElement("div",{key:t,className:"cities",onClick:function(){return f.push(Je.cityPath(e.slug))}},oe.a.createElement("div",{className:"img-section"},oe.a.createElement("span",{className:"bookmark"},oe.a.createElement(we.c,{className:"bookmark-icon",icon:wt.b})),oe.a.createElement("img",{className:"city-img",src:e.photo}),oe.a.createElement("span",{className:"city-title"},e.name)),oe.a.createElement("div",{className:"content-section"},oe.a.createElement("div",{className:"content-item"},oe.a.createElement(we.c,{className:"icon",icon:wt.n}),oe.a.createElement("span",{className:"count"},e.n_reports)),oe.a.createElement("div",{className:"content-item"},oe.a.createElement(we.c,{className:"icon",icon:wt.k}),oe.a.createElement("span",{className:"count"},e.n_galleries)),oe.a.createElement("div",{className:"content-item"},oe.a.createElement(we.c,{className:"icon",icon:wt.y}),oe.a.createElement("span",{className:"count"},e.n_videos))))}))),"\xa0"),oe.a.createElement(we.h,{isOpen:m,onDidDismiss:function(){return p(!1)},message:"Please wait...",duration:5e3}))}),Vt=(n(72),he.a.div(y||(y=Object(ge.a)(["\n  position: relative;\n  padding-top: 100%;\n  overflow: hidden;\n  z-index: 10;\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n\n  width: 100px;\n  height: 100px;\n"]))),he.a.div(w||(w=Object(ge.a)(["\n"]))),he.a.div(k||(k=Object(ge.a)(["\n  position: relative;\n"])))),Jt=he.a.img(x||(x=Object(ge.a)(["\n  width: 200px;\n"]))),Gt=he.a.img(_||(_=Object(ge.a)(["\n  position: absolute;\n  left: 200px;\n  top: 0;\n"]))),Yt=he.a.img(N||(N=Object(ge.a)(["\n  position: absolute;\n  left: 200px;\n  top: 100px;\n"]))),qt=function(e){var t=e.item;Object(je.g)();return oe.a.createElement(rn,{item:t},oe.a.createElement(Vt,null,!1,t.photos[0]&&oe.a.createElement(Jt,{src:t.photos[0].thumb_url}),t.photos[1]&&oe.a.createElement(Gt,{src:t.photos[1].thumb_url}),t.photos[2]&&oe.a.createElement(Yt,{src:t.photos[2].thumb_url}),!1))},Zt=function(e){var t=e.item;return oe.a.createElement(rn,{item:t})},Xt=function(e){mt(e,"NewsitemVideo");var t=e.item;return oe.a.createElement(rn,{item:t},oe.a.createElement("div",{className:"image-section"},t.youtube_id?oe.a.createElement("iframe",{className:"iframe",width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(t.youtube_id),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):oe.a.createElement("video",{width:"100%",preload:"metadata",height:"auto",controls:!0},oe.a.createElement("source",{src:t.url,type:"video/mp4"}))))},Kt=he.a.div(C||(C=Object(ge.a)(["\n  margin-bottom: 2em;\n"]))),Qt=function(e){mt(e,"Newsitems");var t=e.newsitems;return t&&t.length?oe.a.createElement(Kt,null,t.map((function(e,t){var n=e.premium_tier||0;return oe.a.createElement("div",{key:t,className:"items premium-".concat(n)},e.item_type===it.item_types.gallery&&oe.a.createElement(qt,{item:e}),e.item_type===it.item_types.report&&oe.a.createElement(Zt,{item:e}),e.item_type===it.item_types.video&&oe.a.createElement(Xt,{item:e}))}))):oe.a.createElement("div",null,"No Newsitems")},$t=function(e){var t=e.is_purchased,n=e.item_type,a=e.premium_tier;if(t)return oe.a.createElement("img",{className:"icon",src:"/assets/icons/glasses.png",alt:""});if(a>0)return oe.a.createElement("img",{className:"icon",src:"/assets/icons/gem.png",alt:""});switch(n){case it.item_types.gallery:return oe.a.createElement("img",{className:"icon",src:"/assets/icons/gallery.png",alt:""});case it.item_types.report:return oe.a.createElement("img",{className:"icon",src:"/assets/icons/report.png",alt:""});case it.item_types.video:return oe.a.createElement("img",{className:"icon",src:"/assets/newsfeed/video_icon.svg",alt:""});default:return"unknown kind"}},en=["children"],tn=he.a.div(S||(S=Object(ge.a)(["\n  display: flex;\n  flex-direction: column;\n\n  margin-left: 0.5em;\n"]))),nn=he.a.div(U||(U=Object(ge.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n\n  // padding: 0 1em;\n"]))),an=he.a.h2(I||(I=Object(ge.a)(["\n  margin-top: 0;\n"]))),rn=function(e){var t=e.children,n=Object(qe.a)(e,en),a=n.item,r=a.item_type,c=a.slug,o=Object(je.g)(),l=Object(ce.useContext)(dt),i=(l.itemToUnlock,l.setItemToUnlock),s=l.layout,u=(l.showItem,l.setShowItem);return oe.a.createElement(ot,Object.assign({boxShadow:2},n,{onClick:function(){a.is_premium&&!a.is_purchased?i(a):s===it.layout_mapui?u(a):o.push("/en/".concat(ut(r),"/show/").concat(c))},cursor:"pointer"}),t,oe.a.createElement(nn,null,oe.a.createElement($t,a),oe.a.createElement(tn,null,oe.a.createElement(an,null,a.name),oe.a.createElement(Mt,a))),oe.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:a.subhead}}))},cn=(n(199),function(e){var t=Object(ce.useState)(JSON.parse(JSON.stringify(e.data||[]))),n=Object(ue.a)(t,2),a=n[0],r=n[1];return oe.a.createElement("div",{className:"venues-section"},oe.a.createElement("div",null,oe.a.createElement("div",{className:"filter-section"},oe.a.createElement("input",{className:"filter-input",onChange:function(t){var n=e.data.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));r(n)}}),oe.a.createElement(we.c,{className:"filter-icon",icon:wt.j}))),oe.a.createElement("div",{className:"container"},a.map((function(e,t){return oe.a.createElement("div",{key:t,className:"venues"},oe.a.createElement("div",{className:"image-section"},oe.a.createElement("img",{src:e.photo})),oe.a.createElement("div",{className:"info-section"},oe.a.createElement("h4",{className:"title"},e.name),oe.a.createElement("div",{className:"rating-section"},oe.a.createElement(Tt,{rate:3.5}),oe.a.createElement("span",{className:"reviews"},"5 reviews")),oe.a.createElement("div",{className:"tags-section"},e.tags.map((function(e,t){return oe.a.createElement("span",{key:t,className:"tags"},e.name)}))),oe.a.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.subhead}}),oe.a.createElement("p",{className:"address"},"111 N Main St., New York, NY 11223")),oe.a.createElement("img",{className:"forward-arrow",src:"/assets/16x16/arrow-right.png"}))}))))}),on=function(e){mt(e,"CitiesShow");var t=e.match,n=Object(je.g)();mt(n,"production history");var a=Object(je.h)(),r=Object(ce.useState)(null),c=Object(ue.a)(r,2),o=c[0],l=c[1],i=Object(ce.useState)(!1),s=Object(ue.a)(i,2),u=s[0],m=s[1],p=ve(),d=Object(ce.useRef)("init");return Object(ce.useEffect)((function(){return m(!0),p.getCity(t.params.name).then((function(e){d.current&&(l(e.data.city),m(!1))})),function(){return d.current=!1}}),[t.params.name]),oe.a.createElement(ft,null,o&&oe.a.createElement("div",{className:"wrapper"},oe.a.createElement("div",{className:"city-show"},oe.a.createElement("header",{style:{backgroundImage:"url(".concat(o.hero_img,"}"),backgroundSize:"contain"}}),oe.a.createElement("section",{className:"section-one"},oe.a.createElement(we.c,{icon:wt.p,className:"location"}),oe.a.createElement("h1",{className:"city-name"},o.name),oe.a.createElement("div",{className:"status"},oe.a.createElement("div",{className:"status-grid"},oe.a.createElement(we.c,{className:"info-icon",icon:wt.n}),oe.a.createElement("span",{className:"numbers"},o.n_reports)),oe.a.createElement("div",{className:"status-grid"},oe.a.createElement(we.c,{className:"info-icon",icon:wt.k}),oe.a.createElement("span",{className:"numbers"},o.n_galleries)),oe.a.createElement("div",{className:"status-grid mid"},oe.a.createElement(we.c,{className:"info-icon",icon:wt.y}),oe.a.createElement("span",{className:"numbers "},o.n_videos)))),o.tags&&oe.a.createElement("section",{className:"tags-section"},oe.a.createElement("span",{className:"btn delete-btn"},oe.a.createElement(we.c,{name:"close"}," ")," deselect all"),o.tags.map((function(e,t){return oe.a.createElement("span",{className:"btn",key:t},e.name)}))),oe.a.createElement("section",{className:"section-three"},oe.a.createElement("div",{className:"menu-option",onClick:function(){}},oe.a.createElement("img",{src:"/assets/newsfeed-icon.svg",alt:"Newsfeed"}),oe.a.createElement("p",{className:"".concat(a.pathname.includes("newsfeed")?"selected":""," menu-item")},"Newsfeed")),oe.a.createElement("div",{className:"menu-option",onClick:function(){}},oe.a.createElement("img",{src:"/assets/venue-icon.svg",alt:"Venues"}),oe.a.createElement("p",{className:"".concat(a.pathname.includes("venues")?"selected":""," menu-item")},"Venues"))),oe.a.createElement(je.d,null,oe.a.createElement(je.b,{exact:!0,path:"".concat(t.url,"/venues"),render:function(){return oe.a.createElement(cn,{data:o.venues})}}),oe.a.createElement(je.b,{exact:!0,path:t.url,render:function(){return oe.a.createElement(Qt,{newsitems:o.newsitems})}})))),oe.a.createElement(we.h,{isOpen:u,onDidDismiss:function(){return m(!1)},message:"Please wait...",duration:5e3}),"\xa0")},ln=(n(200),function(e){mt(e,"GalleriesShow");var t=e.match,n=Object(ce.useState)(!1),a=Object(ue.a)(n,2),r=(a[0],a[1],Object(ce.useState)({})),c=Object(ue.a)(r,2),o=c[0],l=c[1],i=Object(ce.useContext)(dt),s=(i.currentUser,i.setCurrentUser,i.itemToUnlock),u=i.setItemToUnlock,m=(i.loginModalOpen,i.setLoginModalOpen,Object(ce.useRef)("init")),p=function(){var e=Object(se.a)(pe.a.mark((function e(){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(it.jwt_token),e.next=3,ct.get("/api/galleries/view/".concat(t.params.slug),{params:{jwt_token:n}}).then((function(e){if(m.current){var t=e.data.gallery;t.is_premium&&!t.is_purchased?u(t):l(e.data.gallery)}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ce.useEffect)((function(){return p(),function(){m.current=null}}),[o.id,s.id]),oe.a.createElement(ce.Fragment,null,oe.a.createElement("div",{className:"gallery-show"},oe.a.createElement("div",{className:"narrow"},oe.a.createElement("h1",{className:"heading"},oe.a.createElement("img",{src:"/assets/newsfeed/photos_icon.png"}),oe.a.createElement("span",{className:"title"},o.name)),oe.a.createElement(Mt,{item:o}),oe.a.createElement("div",{className:"thumbs"},o.photos&&o.photos.map((function(e,t){return oe.a.createElement("div",{className:"card",key:t},oe.a.createElement("div",{className:"card-inner"},oe.a.createElement(we.d,{src:e.thumb_url})))})))),oe.a.createElement("div",{className:"full-img-section"},o.photos&&o.photos.map((function(e,t){return oe.a.createElement("div",{className:"item",key:t},oe.a.createElement("img",{src:e.large_url}))})))))}),sn=function(e){var t=Object(ce.useState)(null),n=Object(ue.a)(t,2),a=n[0],r=n[1],c=Object(ce.useState)(!1),o=Object(ue.a)(c,2),l=o[0],i=o[1];return Object(ce.useEffect)((function(){i(!0);var e=localStorage.getItem("jwtToken");ct.get("/api/my/galleries",{params:{jwt_token:e}}).then((function(e){mt(e.data,"MyGalleries data"),r(e.data),i(!1)}))}),[]),oe.a.createElement(oe.a.Fragment,null,oe.a.createElement(we.h,{isOpen:l,onDidDismiss:function(){return i(!1)},message:"Please wait...",duration:5e3}),a&&a.length&&a.map((function(e){return oe.a.createElement(qt,{key:e.id,data:e})})))},un=he.a.div(D||(D=Object(ge.a)(["\n  padding: 0.5em;\n"]))),mn=he.a.div(L||(L=Object(ge.a)(["\n  padding: 0.5em 0;\n"]))),pn=he.a.div(M||(M=Object(ge.a)(["\n  display: flex;\n  z-index: 50;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: white;\n"]))),dn=function(e){mt(e,"Breakcrumbs");var t=Object(je.g)(),n=[];return e.breadcrumbs.map((function(a,r){r+1===e.breadcrumbs.length?n.push(oe.a.createElement(un,{key:r},a.name)):(n.push(oe.a.createElement(un,{key:r,style:{textDecoration:"underline"},onClick:function(){return t.push("/en/locations/show/".concat(a.slug))}},a.name)),n.push(oe.a.createElement(mn,{key:"".concat(r,"-divider")},">")))})),oe.a.createElement(pn,null,n)},fn=he.a.div(T||(T=Object(ge.a)(["\n  padding: 2em 0;\n"]))),bn=function(e){mt(e,"ReportsShow");var t=Object(ce.useState)({}),n=Object(ue.a)(t,2),a=n[0],r=n[1],c=ve(),o=(JSON.parse(localStorage.getItem("current_user")),function(){var t=Object(se.a)(pe.a.mark((function t(){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:mt(null,"getting report..."),ct.get(c.reportsGet(e.match.params.slug)).then((function(e){return e.data})).then((function(e){mt(e,"got report"),r(e.report)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(ce.useEffect)((function(){o()}),[]),oe.a.createElement(fn,null,oe.a.createElement(ot,{boxShadow:2},oe.a.createElement("h1",null,"Report ",a.name),oe.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:a.description}})))},gn=function(e){mt(e,"ItemModal");var t=e.item,n=Object(ce.useContext)(dt),a=n.showItem,r=n.setShowItem;return oe.a.createElement(Ue.a,{isOpen:!!a},oe.a.createElement("h1",{onClick:function(){return r(!1)}},"[x]"),"report"===t.item_type&&oe.a.createElement(bn,{match:{params:{slug:t.reportname}}}))},En=he.a.div(P||(P=Object(ge.a)(["\n  // border: 1px solid blue;\n\n  background: #dedede;\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh - 40px - ",");\n"])),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth,"px"):"0px"})),hn=he.a.div(W||(W=Object(ge.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]))),vn=function(e){var t=e.item;return oe.a.createElement(hn,{dangerouslySetInnerHTML:{__html:t.description}})},jn=(he.a.div(F||(F=Object(ge.a)(["\n  padding: 0.5em;\n"]))),he.a.div(H||(H=Object(ge.a)(["\n  padding: 0.5em 0;\n"]))),function(e){var t=Object(ce.useContext)(dt),n=t.showUrl,a=t.setShowUrl;return oe.a.createElement(Ue.a,{ariaHideApp:!1,isOpen:!!n},oe.a.createElement("span",{onClick:function(){a(!1)}},"[x]"),oe.a.createElement("iframe",{height:"100%",style:{width:"100%",height:"100%"},scrolling:"yes",src:e.src,frameBorder:"no",allowtransparency:"true",allowFullScreen:!0}))}),On=he.a.div(A||(A=Object(ge.a)(["\n  // border: 1px solid green;\n\n  background: #dedede;\n\n  padding: 1em;\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh - ","px - ","px);\n"])),(function(e){return e.bottomDrawerOpen?e.bottomDrawerHeight:e.borderWidth}),(function(e){return 3*e.borderWidth})),yn=he.a.div(R||(R=Object(ge.a)(["\n  display: flex;\n  position: relative;\n"]))),wn=function(e){mt(e,"LocationsShow");var t=e.match,n=Object(ce.useState)(!1),a=Object(ue.a)(n,2),r=a[0],c=a[1],o=Object(ce.useState)(null),l=Object(ue.a)(o,2),i=l[0],s=l[1],u=Object(ce.useContext)(dt),m=u.showItem,p=(u.setShowItem,u.showUrl),d=(u.setShowUrl,Object(ce.useRef)("init"));Object(ce.useEffect)((function(){c(!0);var e=localStorage.getItem("jwt_token");return ct.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(d.current===t.params.slug)return null;s(e.data.map),c(!1)})).finally((function(){})),function(){d.current=t.params.slug}}),[t.params.slug]);var f=pt.borderWidth,b=pt.bottomDrawerHeight,g=Object(ce.useContext)(dt).bottomDrawerOpen;return oe.a.createElement(yn,null,oe.a.createElement(En,{borderWidth:f,bottomDrawerOpen:g,bottomDrawerHeight:b},r&&oe.a.createElement("i",null,"Loading Left..."),i&&oe.a.createElement(dn,i),i&&oe.a.createElement(Mn,{map:i.map?i.map:i})),oe.a.createElement(On,{borderWidth:f,bottomDrawerOpen:g,bottomDrawerHeight:b},r&&oe.a.createElement("i",null,"Loading Right..."),i&&oe.a.createElement(ce.Fragment,null,oe.a.createElement(Tn,{markers:i.markers}),oe.a.createElement(vn,{item:i}),i.newsitems&&i.newsitems.length&&oe.a.createElement(Qt,{newsitems:i.newsitems})||null)),p&&oe.a.createElement(jn,{src:p}),m&&oe.a.createElement(gn,{item:m}))},kn=he.a.div(z||(z=Object(ge.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]))),xn=function(e){var t=e.item;return oe.a.createElement(kn,{dangerouslySetInnerHTML:{__html:t.description}})},_n=(he.a.div(B||(B=Object(ge.a)(["\n  position: relative;\n"]))),he.a.div(V||(V=Object(ge.a)(["\n  // border: 1px solid orange;\n\n  position: absolute;\n  top: 0;\n  left: calc(100vw - 80px);\n  background: white;\n  padding: 5px;\n\n  display: flex;\n  flex-direction: column;\n  z-index: 10;\n"]))),he.a.div(J||(J=Object(ge.a)(["\n  // border: 2px solid brown;\n\n  text-align: center;\n  display: block;\n\n  position: relative; /* required for mobile, so that zoomCtrl, etc are inside the collapsible div */\n\n  overflow: scroll;\n  max-height: 80vh;\n"]))),he.a.div(G||(G=Object(ge.a)([""]))),he.a.div(Y||(Y=Object(ge.a)(["\n  margin: 10px;\n  width: 20vw;\n"])))),Nn=function(e){mt(e,"Markers");var t=Object(je.g)(),n=[];return e.markers.map((function(e,a){n.push(oe.a.createElement(_n,{key:a,onClick:function(){return e.url?window.location.href=e.url:t.push("/en/locations/show/".concat(e.slug))}},oe.a.createElement("img",{src:e.title_img_path}),oe.a.createElement("br",null),e.name))})),oe.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},n)},Cn=he.a.div(q||(q=Object(ge.a)(["\n  // border: 2px solid cyan;\n\n  display: flex;\n  flex-direction: column;\n\n  overflow: scroll;\n  height: calc(100vh - 40px); /* @TODO: why 40px?! */\n"]))),Sn=function(e){mt(e,"LocationsShow");var t=e.match,n=Object(ce.useState)(!1),a=Object(ue.a)(n,2),r=a[0],c=a[1],o=Object(ce.useState)(null),l=Object(ue.a)(o,2),i=l[0],s=l[1],u=Object(ce.useRef)("init");return Object(ce.useEffect)((function(){c(!0);var e=localStorage.getItem("jwt_token");return ct.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(!u.current)return null;s(e.data.map),c(!1)})).finally((function(){})),function(){}}),[t.params.slug]),oe.a.createElement(Cn,null,r&&oe.a.createElement("i",null,"Loading..."),i&&oe.a.createElement(dn,i),oe.a.createElement(tt,{slug:"descr-sec",label:"Description"},i&&oe.a.createElement(xn,{item:i})),i&&i.markers.length&&oe.a.createElement(tt,{slug:"markers-sec",label:"Markers"},oe.a.createElement(Nn,{markers:i.markers}))||null,i&&i.newsitems.length&&oe.a.createElement(tt,{slug:"news-sec",label:"Newsitems"},oe.a.createElement(Qt,{newsitems:i.newsitems}))||null)},Un=he.a.div(Z||(Z=Object(ge.a)(["\n  // border: 3px solid green;\n\n  text-align: center;\n  display: block;\n\n  position: relative;\n"]))),In=he.a.div(X||(X=Object(ge.a)(["\n"]))),Dn=he.a.div(K||(K=Object(ge.a)(["\n  // position: relative;\n"]))),Ln=function(e){var t=Object(ce.useContext)(dt),n=t.zoom,a=t.setZoom;return oe.a.createElement("div",{style:{position:"absolute",top:0,left:"calc(50% - 20px)",zIndex:1,background:"white",padding:"5px",display:"flex",flexDirection:"column"}},oe.a.createElement("span",{onClick:function(){a(n/2)}},"[+]"),oe.a.createElement("span",{onClick:function(){a(2*n)}},"[-]"),oe.a.createElement("span",{onClick:function(){a(1)}},"[1]"))},Mn=function(e){var t=e.map,n=Object(ce.useContext)(dt),a=(n.showUrl,n.setShowUrl),r=n.zoom,c=(n.setZoom,Object(ce.useRef)(null)),o=Object(je.g)();Object(ce.useEffect)((function(){c.current.scrollIntoView({block:"end"})}),[]);var l=[];return t.markers.map((function(e,t){var n=oe.a.createElement("div",{key:t,onClick:function(){return e.url?a(e.url):o.push("/en/locations/show/".concat(e.slug))},style:{position:"absolute",top:r>1?(e.y-e.centerOffsetY)/r:e.y/r-e.centerOffsetY,left:r>1?(e.x-e.centerOffsetX)/r:e.x/r-e.centerOffsetX}},oe.a.createElement("img",{src:e.img_path,style:{display:"block",maxWidth:"".concat(e.w/r,"px"),maxHeight:"".concat(e.h/r,"px"),width:"auto",height:"auto"}}));l.push(n)})),oe.a.createElement(Dn,null,oe.a.createElement(Ln,null),oe.a.createElement(Un,{ref:c},oe.a.createElement(In,{style:{display:"inline-block",position:"relative",width:"".concat(t.w/r,"px"),height:"".concat(t.h/r,"px")}},oe.a.createElement("img",{src:t.img_path,style:{width:"".concat(t.w/r,"px"),height:"".concat(t.h/r,"px")}}),l)))},Tn=function(e){mt(e,"Markers");var t=Object(je.g)(),n=Object(ce.useContext)(dt),a=(n.showUrl,n.setShowUrl),r=[];return e.markers.map((function(e,n){r.push(oe.a.createElement("div",{key:n,style:{margin:"10px"},onClick:function(){return function(e){e.url?a(e.url):t.push("/en/locations/show/".concat(e.slug))}(e)}},oe.a.createElement("img",{src:e.title_img_path}),oe.a.createElement("br",null),e.name))})),oe.a.createElement("div",{style:{display:"flex"}},r)},Pn=(n(201),he.a.div(Q||(Q=Object(ge.a)(["\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n"])))),Wn=function(){return oe.a.createElement(Pn,null,oe.a.createElement("img",{className:"image",src:"/assets/hero.png"}))},Fn=he.a.div($||($=Object(ge.a)(["\n  padding: 0;\n  margin: 0;\n  height: 100vh;\n"]))),Hn=function(e){var t=Object(ce.useState)([]),n=Object(ue.a)(t,2),a=n[0],r=n[1],c=Object(ce.useState)(!1),o=Object(ue.a)(c,2),l=o[0],i=o[1],s=ve(),u=Object(ce.useRef)("init");return Object(ce.useEffect)((function(){return s.applicationHome().then((function(e){if(!u.current)return null;r(e.newsitems),i(!1)})),function(){u.current=!1}}),[]),oe.a.createElement(ce.Fragment,null,oe.a.createElement(Fn,null,oe.a.createElement(Wn,null),oe.a.createElement(Qt,{newsitems:a}),"\xa0"),oe.a.createElement(we.h,{isOpen:l,onDidDismiss:function(){return i(!1)},message:"Please wait...",duration:5e3}))},An=Object(xe.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),Rn=he.a.div(ee||(ee=Object(ge.a)(["\n  border-bottom: 1px solid red;\n"]))),zn=function(e){mt(e,"Video");ve();var t=e.item;return oe.a.createElement(Rn,{key:e.idx},oe.a.createElement("h5",null,"Video ",t.name),oe.a.createElement("p",null,"created ",t.created_at),oe.a.createElement("video",{controls:!0,preload:"metadata",type:"video/mp4",src:t.video_url,style:{maxWidth:"500px",maxHeight:"90vh"}}))},Bn=function(){mt(be.a,"Videos component"),console.log(JSON.stringify(be.a));var e=Object(ce.useState)([]),t=Object(ue.a)(e,2),n=t[0],a=t[1],r=localStorage.getItem("jwtToken"),c=An(),o=ve();return Object(ce.useEffect)((function(){mt("posting..."),ct.post(o.myVideosPath,{jwtToken:r}).then((function(e){return e.data})).then((function(e){var t=e.videos;mt(t,"data"),a(t)}))}),[]),oe.a.createElement(bt.a,{maxWidth:"md"},oe.a.createElement(ke.a,{container:!0,className:c.root},oe.a.createElement(ke.a,{item:!0,xs:12},oe.a.createElement("h2",null,"My Videos")),oe.a.createElement(ke.a,{item:!0,xs:12},n&&n.map((function(e,t){return oe.a.createElement(zn,{key:t,item:e})})))))},Vn=he.a.div(te||(te=Object(ge.a)(["\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]))),Jn=Object(he.a)(bt.a)(ne||(ne=Object(ge.a)(["\n  height: 100vh;\n  overflow: scroll;\n"]))),Gn=function(e){mt(e,"AppDesktop renders");var t=e.currentUser,n=e.setCurrentUser,a=e.loginModalOpen,r=e.setLoginModalOpen,c=Object(ce.useState)(!1),o=Object(ue.a)(c,2),l=o[0],i=o[1],s=Object(ce.useState)({}),u=Object(ue.a)(s,2),m=u[0],p=u[1],d=Object(ce.useState)(it.layout_onecol),f=Object(ue.a)(d,2),b=f[0],g=f[1],E=Object(ce.useState)(!1),h=Object(ue.a)(E,2),v=h[0],j=h[1],O=Object(ce.useState)(!1),y=Object(ue.a)(O,2),w=y[0],k=y[1],x=Object(ce.useState)(1),_=Object(ue.a)(x,2),N=_[0],C=_[1],S=(ve(),function(e){switch(b){case it.layout_onecol:return oe.a.createElement(Jn,Object.assign({maxWidth:"md"},e));case it.layout_mapui:return oe.a.createElement(zt,Object.assign({},e,{bottomDrawerOpen:l,setBottomDrawerOpen:i}))}}),U=function(e){return Object(ce.useEffect)((function(){e.layout?g(e.layout):g(it.layout_onecol)}),[e.layout]),oe.a.createElement(je.b,e)};return oe.a.createElement(_e.a,null,oe.a.createElement(ye.a,null),oe.a.createElement(dt.Provider,{value:{bottomDrawerOpen:l,setBottomDrawerOpen:i,currentUser:t,setCurrentUser:n,itemToUnlock:m,setItemToUnlock:function(e){m.id===e.id||a||p(e)},layout:b,setLayout:g,loginModalOpen:a,setLoginModalOpen:r,showItem:v,setShowItem:j,showUrl:w,setShowUrl:k,zoom:N,setZoom:C}},oe.a.createElement(Dt,null),oe.a.createElement(Vn,null,oe.a.createElement(S,null,oe.a.createElement(je.d,{id:"main",main:!0},oe.a.createElement(je.a,{exact:!0,from:"/",to:"/en"}),oe.a.createElement(U,{exact:!0,path:"/en"},oe.a.createElement(Hn,null)),oe.a.createElement(U,{exact:!0,path:"/en/account",component:Ce}),oe.a.createElement(U,{exact:!0,path:"/en/account/my/videos",component:Bn}),oe.a.createElement(U,{exact:!0,path:"/en/account/my/galleries",component:sn}),oe.a.createElement(U,{exact:!0,path:"/en/cities",component:Bt}),oe.a.createElement(U,{path:"/en/cities/travel-to/:name",component:on}),oe.a.createElement(U,{exact:!0,path:"/en/galleries/show/:slug",component:ln}),oe.a.createElement(U,{exact:!0,path:"/en/reports/show/:slug",component:bn}),oe.a.createElement(U,{exact:!0,path:"/en/locations/show/:slug",component:wn,layout:it.layout_mapui})))),oe.a.createElement(yt,null),oe.a.createElement(At,null),oe.a.createElement(Ie,null)))},Yn=he.a.div(ae||(ae=Object(ge.a)(["\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]))),qn=Object(he.a)(bt.a)(re||(re=Object(ge.a)(["\n  height: 100vh;\n  overflow: scroll;\n"]))),Zn=function(e){mt(e,"AppMobile renders");var t=e.currentUser,n=e.setCurrentUser,a=Object(ce.useState)(it.layout_onecol),r=Object(ue.a)(a,2),c=r[0],o=r[1],l=oe.a.useState(!1),i=Object(ue.a)(l,2),s=i[0],u=i[1],m=oe.a.useState(!1),p=Object(ue.a)(m,2),d=p[0],f=p[1],b=Object(ce.useState)(1),g=Object(ue.a)(b,2),E=g[0],h=g[1],v=ve(),j=function(e){switch(c){case it.layout_onecol:return oe.a.createElement(qn,Object.assign({maxWidth:"md"},e));case it.layout_mapui:return oe.a.createElement(zt,Object.assign({},e,{bottomDrawerOpen:s,setBottomDrawerOpen:u}))}},O=function(e){return Object(ce.useEffect)((function(){e.layout?o(e.layout):o(it.layout_onecol)}),[e.layout]),oe.a.createElement(je.b,e)},y=function(){var e=Object(se.a)(pe.a.mark((function e(){var t,n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.doUnlock({kind:"Report",id:d.report_id}),e.next=3,ct.post("".concat(be.a.apiOrigin).concat(t));case 3:n=e.sent,mt(n,"result of unlocking");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(ce.useState)({"descr-sec":!0}),k=Object(ue.a)(w,2),x=k[0],_=k[1];return oe.a.createElement(_e.a,null,oe.a.createElement(dt.Provider,{value:{bottomDrawerOpen:s,setBottomDrawerOpen:u,currentUser:t,setCurrentUser:n,itemToUnlock:d,setItemToUnlock:f,layout:c,setLayout:o,zoom:E,setZoom:h}},oe.a.createElement(st.Provider,{value:{collapsibles:x,setCollapsibles:_}},oe.a.createElement(Dt,null),oe.a.createElement(Yn,null,oe.a.createElement(j,null,oe.a.createElement(je.d,{id:"main",main:!0},oe.a.createElement(je.a,{exact:!0,from:"/",to:"/en"}),oe.a.createElement(O,{exact:!0,path:"/en"},oe.a.createElement(Hn,null)),oe.a.createElement(O,{exact:!0,path:"/en/account",component:Ce}),oe.a.createElement(O,{exact:!0,path:"/en/account/my/videos",component:Bn}),oe.a.createElement(O,{exact:!0,path:"/en/account/my/galleries",component:sn}),oe.a.createElement(O,{exact:!0,path:"/en/cities",component:Bt}),oe.a.createElement(O,{path:"/en/cities/travel-to/:name/show",component:on}),oe.a.createElement(O,{exact:!0,path:"/en/galleries/show/:slug",component:ln}),oe.a.createElement(O,{exact:!0,path:"/en/reports/show/:slug",component:bn}),oe.a.createElement(O,{exact:!0,path:"/en/locations/show/:slug",component:Sn,layout:it.layout_mapui})))),oe.a.createElement(yt,null),oe.a.createElement(Ue.a,{ariaHideApp:!1,isOpen:!!d},oe.a.createElement("h1",null,"Unlock this item? ",oe.a.createElement("button",{onClick:function(){return f(!1)}},"[x]")),oe.a.createElement("button",{onClick:y},"Do it")))))},Xn=function(e){mt(e,"AppWrapper");var t=ve(),n=Object(ce.useState)(!1),a=Object(ue.a)(n,2),r=a[0],c=a[1],o=Object(ce.useState)(!1),l=Object(ue.a)(o,2),i=l[0],s=l[1],u=Object(ce.useRef)("init");Object(ce.useEffect)((function(){return function(){var e=Object(se.a)(pe.a.mark((function e(){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(it.jwt_token),e.next=3,ct.get("".concat(be.a.apiOrigin).concat(t.myAccount(),"?jwt_token=").concat(n)).then((function(e){u.current&&c(e.data)})).catch((function(e){mt(e,"e12"),"Request failed with status code 401"===e.message&&s(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return u.current=null}}),[r]);var m=Object(ce.useState)(null),p=Object(ue.a)(m,2),d=p[0],f=p[1];(function(){var e=Object(se.a)(pe.a.mark((function e(){var t;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.a.getInfo();case 2:t=e.sent,f(t.operatingSystem);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();var b={currentUser:r,setCurrentUser:c,loginModalOpen:i,setLoginModalOpen:s};return d?"ios android".includes(d)?oe.a.createElement(Zn,b):oe.a.createElement(Gn,b):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ie.a.render(oe.a.createElement(Xn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t,n){},72:function(e,t,n){}},[[155,3,4]]]);
//# sourceMappingURL=main.b69e8bff.chunk.js.map