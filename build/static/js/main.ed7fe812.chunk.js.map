{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../config/environments/production/config.js","shared/Api.jsx","components/users/Account.jsx","components/users/LoginModal.jsx","components/users/MyAccountWidget.jsx","components/users/index.js","shared/AppRouter.jsx","shared/Collapsible.jsx","shared/request.jsx","shared/useWindowSize.jsx","shared/index.jsx","components/application/BottomDrawer.jsx","components/application/MainHeader.jsx","components/application/MapuiLayout.jsx","components/application/MapuiMobileLayout.jsx","components/application/MenuBottom.jsx","components/application/Menu.jsx","components/application/MenuLeft.jsx","components/application/Metaline.jsx","components/application/Rating.jsx","components/application/UnlockModal.jsx","components/cities/CitiesList.jsx","components/newsitems/NewsitemGallery.jsx","components/newsitems/NewsitemReport.jsx","components/newsitems/NewsitemVideo.jsx","components/newsitems/Newsitems.jsx","components/newsitems/NewsitemContainer.jsx","components/newsitems/ItemIcon.jsx","components/newsitems/index.js","components/venues/Venues.jsx","components/cities/CitiesShow.jsx","components/galleries/GalleriesShow.jsx","components/galleries/MyGalleries.jsx","components/locations/Breadcrumbs.jsx","components/reports/ReportsShow.jsx","components/locations/ItemModal.jsx","components/locations/LocationsShow.jsx","components/locations/LocationsShowMobile.jsx","components/locations/MapPanelNoZoom.jsx","components/locations/MapPanel.jsx","components/locations/MarkersList.jsx","components/sites/Features.jsx","components/sites/SitesShow.jsx","components/sites/SitesShow1.jsx","components/videos/Videos.jsx","AppDesktop.jsx","AppMobile.jsx","AppWrapper.jsx","serviceWorker.js","index.jsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","useApi","useContext","TwofoldContext","token","currentUser","setCurrentUser","localStorage","getItem","C","jwt_token","doUnlock","kind","getMyAccount","request","post","loginPath","longTermTokenPath","myAccount","myVideosPath","paymentsPath","reportsGet","a","JSON","parse","jwt","config","apiOrigin","getCities","get","r","data","getCity","slug","getTag","tag","applicationHome","domain","params","out","isPushNotificationsAvailable","Capacitor","isPluginAvailable","greeterAddress","tokenAddress","Account","props","logg","useState","greeting","setGreetingValue","notifications","setNotifications","register","PushNotifications","addListener","showToast","error","alert","stringify","n","nofitication","ns","title","body","type","msg","Toast","show","text","requestAccount","window","ethereum","method","fetchGreeting","provider","ethers","providers","Web3Provider","contract","Contract","Greeter","abi","greet","console","log","account","Token","balanceOf","balance","toString","signer","getSigner","setGreeting","transaction","wait","transfer","userAccount","amount","transation","useEffect","checkPermissions","res","receive","requestPermissions","color","slot","className","Grid","container","spacing","item","xs","src","alt","onClick","value","onChange","target","placeholder","setUserAccount","setAmount","email","to","history","push","length","notif","key","expand","LoginModal","loginModalOpen","setLoginModalOpen","style","zIndex","isOpen","stripePromise","loadStripe","Login","Root","styled","div","p","borderWidth","MyAccountWidget","api","stripe","useStripe","elements","useElements","purchaseModalIsOpen","setPurchaseModalIsOpen","handleSubmit","event","preventDefault","getElement","CardElement","jwtToken","client_secret","confirmCardPayment","payment_method","card","result","message","paymentIntent","status","response","S","n_unlocks","ariaHideApp","width","onSubmit","disabled","WrappedMyAccountWidget","FacebookLogin","Plugins","FACEBOOK_PERMISSIONS","FbLogin","doFbLogin","login","permissions","accessToken","resp","setItem","current_user","err","Btn","Logout","removeItem","PasswordLogin","setEmail","password","setPassword","doPasswordLogin","toast","onKeyDown","AppRouter","cityVenuesPath","cityPath","Gt","Inner","Lt","Label","Collapsible","children","ctx","CollapsibleContext","collapsibles","setCollapsibles","collapsible","folded","label","settings","baseURL","axios","create","useWindowSize","size","setSize","useLayoutEffect","updateSize","innerWidth","innerHeight","addEventListener","removeEventListener","Box","_Box","cursor","descr","item_types","gallery","report","video","layout_onecol","layout_mapui","variants","floating","inline","React","createContext","CollapsibleContextProvider","Provider","inflector","m","toLowerCase","b","c","replace","bottomDrawerHeight","breadcrumbsHeight","blue","darkGrey","lightGrey","red","TwofoldContextProvider","layout","setLayout","bottomDrawerOpen","setBottomDrawerOpen","itemToUnlock","_setItemToUnlock","showItem","setShowItem","showUrl","setShowUrl","zoom","setZoom","setItemToUnlock","Wrapper","BottomWrapper","ButtonWrapper","BottomDrawer","IconButton","aria-label","edge","fontSize","Drawer","anchor","elevation","open","onClose","BackdropProps","invisible","variant","position","left","bottom","Header","MainHeader","MapuiContainer","MapuiLayout","MapuiMobileLayout","MenuBottom","newspaperOutline","bus","person","powerOutline","W1","MenuLeft","drawerOpen","setDrawerOpen","useHistory","Fab","top","margin","List","ListItem","button","bookmarks","idx","name","W","withRouter","created_at","username","city","tags","substring","i","Rating","rate","rating","setRating","iconMapping","0","starOutline","1","starHalf","2","star","Array","fill","icon","Btn0","BtnRow","modalStyle","overlay","content","maxWidth","UnlockModal","path","item_type","mountedRef","useRef","current","fn","Counts","Count","IonIcon","_IonIcon","theme","Number","Cities","cities","setCities","filteredCities","setFilteredCities","showLoading","setShowLoading","ev","filter","indexOf","trim","funnel","bookmark","photo","n_reports","n_galleries","image","n_videos","videocam","onDidDismiss","duration","Images","ImageLarge","img","ImageThumb1","ImageThumb2","NewsitemGallery","photos","thumb_url","NewsitemReport","NewsitemVideo","youtube_id","height","frameBorder","allow","allowFullScreen","preload","controls","url","Newsitems","newsitems","newsitem","premium_tier","Col","Row","Title","h2","NewsitemContainer","boxShadow","is_premium","is_purchased","dangerouslySetInnerHTML","__html","subhead","ItemIcon","GenericNewsitem","description","Address","_Ra","RightArrow","Venue","Venues","venues","filteredVenues","setFilteredVenues","venue","includes","paddingRight","address","CitiesShow","match","thisPath","location","useLocation","setCity","backgroundImage","hero_img","backgroundSize","pin","pathname","exact","render","GalleriesShow","setGallery","getGallery","ph","large_url","MyGalleries","galleries","setGalleries","g","B","B1","debug","Breadcrumbs","breadcrumbs","textDecoration","ReportsShow","getReport","ItemModal","reportname","_Description","Description","IframeModal","scrolling","allowtransparency","Left","Right","LocationsShow","loading","setLoading","setLocation","markers","CollapsibleNoMargins","LocationsShowMobile","labels","MapPanelNoZoom","marker","Div3","MapWrapperNoZoom","MapNoZoom","windowWidth","ref","w","offsetWidth","y","x","img_path","display","maxHeight","h","Div1","ZoomCtrl","right","background","padding","flexDirection","MapPanel","div1Ref","scroll","behavior","centerOffsetY","centerOffsetX","Marker","MarkersList","goto","title_img_path","flexWrap","Features","features","f","inner_html","sm","marginBottom","SitesShow","site","setSite","SitesShow1","artTag","setArtTag","homeRow1Tag","setHomeRow1Tag","interestingLocationsTag","setInterestingLocationsTag","useStyles","makeStyles","paper","textAlign","palette","secondary","redBorder","border","root","flexGrow","overflow","VideoItem","Video","video_url","Videos","videos","setVideos","classes","v","AppDesktop","Container","Route","main","from","component","CitiesList","__Container","_Container","AppMobile","AppWrapper","requireLogin","os","setOs","Device","getInfo","info","operatingSystem","childProps","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"u2nBAAA,IAAIA,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC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","file":"static/js/main.ed7fe812.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t241,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t242,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t243,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t244,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t245,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t246,\n\t\t46\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t247,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t248,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t249,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t250,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t251,\n\t\t47\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t252,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t253,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t254,\n\t\t48\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t255,\n\t\t49\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t256,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t257,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t258,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t259,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t260,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t261,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t262,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t263,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t264,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t265,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t266,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t267,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t268,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t269,\n\t\t50\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t270,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t271,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t272,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t273,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t274,\n\t\t51\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t275,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t276,\n\t\t52\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t277,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t278,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t279,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t280,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t281,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t282,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t283,\n\t\t53\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 185;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t284,\n\t\t60\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 187;\nmodule.exports = webpackAsyncContext;","\nmodule.exports = {\n  \"apiOrigin\": \"https://manager.piousbox.com\",\n  \"domain\": \"tgm.piousbox.com\", // required! 20210831\n  \"appIndexPath\": \"src/index\",\n  \"requireLogin\": false,\n};\n","import React, { useContext } from 'react'\n\nimport config from \"config\"\nimport { C, logg, request, TwofoldContext } from \"$shared\"\n\nconst useApi = () => {\n  const { currentUser, setCurrentUser } = useContext(TwofoldContext)\n  const token = localStorage.getItem(C.jwt_token);\n\n  return {\n    doUnlock: ({ kind, id }) => {\n      const jwt_token = localStorage.getItem('jwt_token')\n      return `/api/payments/unlock?kind=${kind}&id=${id}&jwt_token=${jwt_token}`;\n    },\n\n    getMyAccount: () => {\n      const jwt_token = localStorage.getItem('jwt_token')\n      return request.post(`/api/my/account`, {\n        jwt_token: jwt_token,\n      })\n    },\n\n    loginPath: '/api/users/login.json',\n    longTermTokenPath: '/api/users/long_term_token',\n\n    myAccount: () => \"/api/my/account\",\n    myVideosPath: \"/api/my/videos\",\n\n    paymentsPath: \"/api/payments2\",\n\n    reportsGet: (a) => {\n      const currentUser = JSON.parse(localStorage.getItem(\"current_user\")) || {};\n      let jwt = \"\";\n      if (currentUser) {\n        jwt = `jwt_token=${currentUser.jwt_token}`\n      }\n      return `${config.apiOrigin}/api/reports/view/${a}?${jwt}`;\n    },\n\n    getCities: ()   => request.get(`${config.apiOrigin}/api/cities`).then((r) => r.data),\n    getCity: (slug) => request.get(`${config.apiOrigin}/api/cities/view/${slug}`),\n    getTag: (tag) => request.get(`${config.apiOrigin}/api/tags/view/${tag.slug}`).then((r) => r.data),\n\n    applicationHome: async () => {\n      const out = await request.get(`${config.apiOrigin}/api/sites/view/${config.domain}`, { params: { jwt_token: token } })\n      return out.data\n    }\n  }\n\n}\n\nexport default useApi\n","\nimport { Capacitor } from '@capacitor/core'\nimport { PushNotifications } from '@capacitor/push-notifications'\nimport { Toast } from \"@capacitor/toast\"\nimport { ethers } from 'ethers'\nimport React, { Fragment as F, useContext, useEffect, useState } from \"react\"\nimport {\n  IonButton, IonButtons,\n  IonCard, IonCardContent, IonContent,\n  IonFooter,\n  IonHeader,\n  IonItem,\n  IonLabel, IonListHeader, IonList,\n  IonMenuButton,\n  IonPage,\n  IonText, IonTitle, IonToolbar,\n} from '@ionic/react'\nimport { Container, Grid } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Link } from 'react-router-dom'\n\nimport { FbLogin, Logout, PasswordLogin } from \"./\"\nimport { C, logg, TwofoldContext } from \"$shared\"\nimport Greeter from '$src/artifacts/contracts/Greeter.sol/Greeter.json'\nimport Token from '$src/artifacts/contracts/Token.sol/Token.json'\n\nconst isPushNotificationsAvailable = Capacitor.isPluginAvailable('PushNotifications')\n\n// Update with the contract address logged out to the CLI when it was deployed\nconst greeterAddress = \"0x4bE9765Ca063E73E0aaEd227fd6731473508DbE0\"\nconst tokenAddress = \"0xffa52d00685aC60e65457922aEae2c2783c0cB0E\"\n\n\nconst Account = (props) => {\n  logg(props, 'Account')\n\n  const { currentUser, setCurrentUser } = useContext(TwofoldContext)\n  const [ greeting, setGreetingValue ] = useState(\"\")\n  const [notifications, setNotifications] = useState([])\n\n  const register = () => {\n    // Register with Apple / Google to receive push via APNS/FCM\n    PushNotifications.register()\n\n    // On success, we should be able to receive notifications\n    PushNotifications.addListener('registration', (token) => {\n      showToast('Push registration success')\n    })\n\n    // Some issue with our setup and push will not work\n    PushNotifications.addListener('registrationError', (error) => {\n      alert('Error on registration: ' + JSON.stringify(error))\n    })\n\n    // Show us the notification payload if the app is open on our device\n    PushNotifications.addListener('pushNotificationReceived', ({ nofitication: n }) => {\n      setNotifications((ns) =>\n        [...ns, { id: n.data.id, title: n.data.title, body: n.data.body, type: 'foreground' }]\n      )\n    })\n\n    // Method called when tapping on a notification\n    PushNotifications.addListener('pushNotificationActionPerformed', ({ nofitication: n }) => {\n      setNotifications((ns) =>\n        [...ns, { id: n.data.id, title: n.data.title, body: n.data.body, type: 'action' }]\n      )\n    })\n  }\n\n  const showToast = async (msg) => await Toast.show({ text: msg })\n\n  useEffect(() => {\n    if (!isPushNotificationsAvailable) { return }\n\n    PushNotifications.checkPermissions().then((res) => {\n        if (res.receive === 'granted') {\n          register()\n        } else {\n          PushNotifications.requestPermissions().then((res) => {\n            if (res.receive === 'denied') {\n              showToast('Push Notification permission denied')\n            } else {\n              showToast('Push Notification permission granted')\n              register()\n            }\n          })\n        }\n      })\n  }, [])\n\n  // request access to the user's MetaMask account\n  async function requestAccount() {\n    await window.ethereum.request({ method: 'eth_requestAccounts' });\n  }\n\n  // call the smart contract, read the current greeting value\n  async function fetchGreeting() {\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum)\n      const contract = new ethers.Contract(greeterAddress, Greeter.abi, provider)\n      try {\n        const data = await contract.greet()\n        setGreetingValue(data)\n        // console.log('data: ', data)\n      } catch (err) {\n        console.log(\"Error: \", err)\n      }\n    }\n  }\n\n  async function getBalance() {\n    if (typeof window.ethereum !== 'undefined') {\n      const [account] = await window.ethereum.request({ method: 'eth_requestAccounts' })\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const contract = new ethers.Contract(tokenAddress, Token.abi, provider)\n      const balance = await contract.balanceOf(account);\n      console.log(\"Balance: \", balance.toString());\n    }\n  }\n\n  // call the smart contract, send an update\n  async function setGreeting() {\n    if (!greeting) return\n    if (typeof window.ethereum !== 'undefined') {\n      await requestAccount()\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner()\n      const contract = new ethers.Contract(greeterAddress, Greeter.abi, signer)\n      const transaction = await contract.setGreeting(greeting)\n      await transaction.wait()\n      fetchGreeting()\n    }\n  }\n\n  async function sendCoins() {\n    if (typeof window.ethereum !== 'undefined') {\n      await requestAccount()\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const contract = new ethers.Contract(tokenAddress, Token.abi, signer);\n      const transation = await contract.transfer(userAccount, amount);\n      await transation.wait();\n      console.log(`${amount} Coins successfully sent to ${userAccount}`);\n    }\n  }\n\n  return <IonPage>\n    <IonHeader>\n      <IonToolbar color=\"primary\">\n          <IonTitle slot=\"start\"> Push Notifications</IonTitle>\n      </IonToolbar>\n    </IonHeader>\n    <IonContent className=\"ion-padding\">\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Grid container>\n            <Grid item xs={6}>\n              <img src=\"/assets/accounts/default-avatar.png\" alt=\"profile pic\" />\n\n              { /* NFT */ }\n              <div>\n                <button onClick={fetchGreeting}>Fetch Greeting</button>\n                <br />\n                <button onClick={setGreeting}>Set Greeting</button>\n                <br />\n                <input value={greeting} onChange={e => setGreetingValue(e.target.value)} placeholder=\"Set greeting\" />\n              </div>\n              <hr />\n              <div>\n                <button onClick={getBalance}>Get Balance</button>\n                <br />\n                <button onClick={sendCoins}>Send Coins</button>\n                <br />\n                <input onChange={e => setUserAccount(e.target.value)} placeholder=\"Account ID\" />\n                <br />\n                <input onChange={e => setAmount(e.target.value)} placeholder=\"Amount\" />\n              </div>\n\n            </Grid>\n            <Grid item xs={6}>\n              { !!currentUser\n                && <F>\n                  <h4>{currentUser.email}</h4>\n                  <ul>\n                    <li><Link to={\"/en/account/my/galleries\"} >My Galleries</Link></li>\n                    <li><a onClick={() => props.history.push(\"/en/account/my/videos\")}>My Videos</a></li>\n                    <li><Logout /></li>\n                  </ul>\n                </F>\n                || <F>\n                  <h4>Not logged in 2</h4>\n                  <FbLogin />\n                  <br /><br />\n                  <PasswordLogin />\n\n                </F> }\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n\n      <hr />\n      { /* push notifications */ }\n      { notifications.length && <IonList>\n        { notifications.map((notif) => <IonItem key={notif.id}>\n          <IonLabel>\n            <IonText><h3 className=\"notif-title\">{ notif.title }</h3></IonText>\n            <p>{ notif.body }</p>\n            { notif.type==='foreground' && <p>This data was received in foreground</p> }\n            { notif.type==='action' && <p>This data was received on tap</p> }\n          </IonLabel>\n        </IonItem>) }\n      </IonList> || 'no notifications so far' }\n\n    </IonContent>\n    <IonFooter>\n      <IonToolbar>\n        { isPushNotificationsAvailable && <IonButton\n          color=\"success\" expand=\"full\" onClick={register}>Register for Push</IonButton>\n          || <div><h1>Push notifications not available</h1></div> }\n      </IonToolbar>\n    </IonFooter>\n  </IonPage>\n}\n\nexport default Account\n","\nimport { IonPage, IonContent } from \"@ionic/react\"\nimport { Container, Grid } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport React, { Fragment as F, useContext, useEffect, useState } from \"react\"\nimport Modal from 'react-modal'\nimport { Link } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { FbLogin, Logout, PasswordLogin } from \"./\"\nimport { C, logg, TwofoldContext } from \"$shared\"\n\n\nconst LoginModal = (props) => {\n  logg(props, 'LoginModal')\n  const { loginModalOpen, setLoginModalOpen } = useContext(TwofoldContext)\n\n  return <Modal style={{ zIndex: 3 }} isOpen={loginModalOpen} >\n\n    <h1>\n      Please Login\n      <button onClick={() => setLoginModalOpen(false)} >[x]</button>\n    </h1>\n    <FbLogin />\n    <PasswordLogin />\n  </Modal>\n}\n\nexport default LoginModal\n","\nimport React, { Fragment as F, useContext, useState } from \"react\"\nimport Modal from \"react-modal\"\nimport { CardElement, Elements, useElements, useStripe, } from '@stripe/react-stripe-js'\nimport { loadStripe } from '@stripe/stripe-js'\nimport styled from 'styled-components'\n\nimport config from \"config\"\n\nimport { logg, S, request, TwofoldContext, useApi } from \"$shared\"\n\nconst stripePromise = loadStripe('pk_test_qr1QPmSpLdBFt1F7itdWJOj3') // @TODO: this is active, but change.\n\nconst Login = (props) => {\n  return (<F>\n    <button>do login</button>\n  </F>)\n};\n\nconst Root = styled.div`\n  // border: 1px solid red;\n\n  display: flex;\n  justify-content: flex-start;\n  background: #dedede;\n\n  background: white;\n  height: 100px;\n  width: calc(100vw - ${p => p.borderWidth*2}px);\n  padding: 1em;\n  margin-bottom: ${p => p.borderWidth}px;\n`;\n\nconst MyAccountWidget = (props) => {\n  const api = useApi()\n  const { currentUser, setCurrentUser } = useContext(TwofoldContext)\n  const stripe = useStripe()\n  const elements = useElements()\n\n  const [purchaseModalIsOpen, setPurchaseModalIsOpen] = useState(false)\n\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n    logg('purchasing...')\n\n    if (!stripe || !elements) { return }\n    const cardElement = elements.getElement(CardElement)\n\n    const jwtToken = localStorage.getItem('jwt_token')\n    let client_secret = await request.get(`${config.apiOrigin}${api.paymentsPath}?jwt_token=${jwtToken}`)\n    client_secret = client_secret.data.client_secret;\n    logg(client_secret, 'client_secret');\n\n    const result = await stripe.confirmCardPayment(client_secret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n      },\n    })\n    logg(result, 'result')\n\n    if (result.error) {\n      logg(result.error.message, 'error message')\n    } else {\n      if (result.paymentIntent.status === 'succeeded') {\n        let response = await request.get(`${config.apiOrigin}${api.myAccount()}?jwt_token=${jwtToken}`)\n        logg(response, 'ze3response')\n      } else {\n        logg('something else');\n      }\n    }\n  }\n\n  const { borderWidth } = S\n\n  if (!currentUser) { return null }\n\n  return <Root {...{ borderWidth }} >\n    { currentUser.email ? currentUser.email : <Login /> } &nbsp;\n    [&nbsp;{ typeof currentUser.n_unlocks === 'number' ? currentUser.n_unlocks : '?' } coins&nbsp;]&nbsp; &nbsp;\n    <button onClick={() => setPurchaseModalIsOpen(true) }>buy</button>\n\n    <Modal isOpen={purchaseModalIsOpen} ariaHideApp={false} style={{  width: '500px' }} >\n      <h1>\n        Purchase this\n        <span onClick={() => {\n          logg('clicking...')\n          setPurchaseModalIsOpen(false)\n        } } >[x]</span>\n      </h1>\n\n      <form onSubmit={handleSubmit} >\n        <CardElement />\n        <button type=\"submit\" disabled={!stripe} >Pay</button>\n      </form>\n\n    </Modal>\n  </Root>\n}\n\nconst WrappedMyAccountWidget = (props) => <Elements stripe={stripePromise}><MyAccountWidget {...props} /></Elements>;\n\nexport default WrappedMyAccountWidget;\n","/*\n * components / users / index\n */\nimport { Plugins } from '@capacitor/core'\nimport { FacebookLoginResponse } from '@capacitor-community/facebook-login';\nimport React, { Fragment as F, useContext, useState, } from 'react'\nimport { ToastContainer, toast } from 'react-toastify'\n\nimport 'react-toastify/dist/ReactToastify.css'\n\nimport config from 'config'\nimport { Btn, C, logg, request, TwofoldContext, useApi, } from \"$shared\"\n\nexport { default as Account } from \"./Account\"\n\nconst { FacebookLogin } = Plugins\n\n\nconst FACEBOOK_PERMISSIONS = ['email']\n\nexport const FbLogin = (props) => {\n  const api = useApi()\n  const { currentUser, setCurrentUser } = useContext(TwofoldContext)\n\n  const doFbLogin = async () => {\n    const result = await FacebookLogin.login({ permissions: FACEBOOK_PERMISSIONS });\n    if (result.accessToken) {\n      request.post(`${config.apiOrigin}${api.longTermTokenPath}`, { accessToken: result.accessToken.token }).then((resp) => {\n        localStorage.setItem(C.jwt_token, resp.data.jwt_token)\n        localStorage.setItem(C.current_user, JSON.stringify(resp.data) )\n        setCurrentUser(resp.data)\n      }).catch((err) => {\n        logg(err, `Could not post request to ${config.apiOrigin}${api.longTermTokenPath}`)\n      })\n    } else {\n      // Canceled by user.\n      logg('canceled')\n    }\n  }\n  return <Btn onClick={doFbLogin}>FB Login</Btn>\n}\n\nexport { default as LoginModal } from \"./LoginModal\"\n\nexport const Logout = () => {\n  const { currentUser, setCurrentUser } = useContext(TwofoldContext)\n  const doLogout = () => {\n    localStorage.removeItem(C.jwt_token)\n    localStorage.removeItem(C.current_user)\n    setCurrentUser(null)\n  }\n  return <Btn onClick={doLogout}>Logout</Btn>\n}\n\nexport const PasswordLogin = (props) => {\n  const api = useApi()\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  } = useContext(TwofoldContext)\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n\n  const doPasswordLogin = async (email, password) => {\n    request.post(`${config.apiOrigin}${api.loginPath}`, { email, password }).then((r) => r.data).then((resp) => {\n      setCurrentUser(resp)\n      localStorage.setItem('jwt_token', resp.jwt_token)\n      localStorage.setItem('current_user', JSON.stringify(resp))\n      setLoginModalOpen(false)\n    }).catch((e) => {\n      logg(e, 'e322')\n      toast(\"Login failed\")\n      setCurrentUser(null)\n    })\n  }\n\n  return <F>\n    <input type='email' value={email} onChange={(e) => setEmail(e.target.value) } /><br />\n    <input type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n      onKeyDown={(e) => {\n        if (e.key === 'Enter') { doPasswordLogin(email, password) }\n      }}\n    /><br />\n    <Btn onClick={() => doPasswordLogin(email, password)}>Password Login</Btn>\n  </F>\n}\n\n\nexport { default as MyAccountWidget } from \"./MyAccountWidget\";\n","\nconst AppRouter = {\n\n  cityVenuesPath: (slug) => `/en/cities/travel-to/${slug}/venues`,\n  cityPath: (slug) => `/en/cities/travel-to/${slug}`,\n\n};\n\nexport default AppRouter;\n","\nimport React, { Fragment as F, useContext, useEffect, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { CollapsibleContext, logg, S } from '$shared'\n\nconst Gt = () => <span>&nbsp;&gt;&nbsp;&nbsp;</span>\n\nconst Inner = styled.div`\n  // border: 2px solid red;\n  // max-height: 100vh;\n`;\n\nconst Lt = () => <span>&nbsp;&lt;&nbsp;&nbsp;</span>\n\nconst Label = styled.div`\n  display: flex;\n  margin-bottom: ${p => p.borderWidth};\n`;\n\nconst Root = styled.div`\n  // background: #dedede;\n  margin: .5em;\n  padding: .5em;\n\n  margin-bottom: 1em;\n`;\n\n\nconst Collapsible = ({ children, ...props }) => {\n  logg(props, 'Collapsible')\n  const { config } = props\n\n  const ctx = useContext(CollapsibleContext)\n  if (!ctx) { return null; }\n  const { collapsibles, setCollapsibles } = ctx\n\n  const doToggle = () => {\n    setCollapsibles({ ...collapsibles, [props.slug]: !collapsibles[props.slug] })\n  }\n\n  const collapsible = typeof config === 'undefined' ? true : typeof config.collapsible === 'undefined' ? true : config.collapsible\n  const folded = collapsible ? !!collapsibles[props.slug] : false\n\n  return <Root className={`Root ${props.className}`} >\n    { collapsible && props.label && <Label {...S} onClick={doToggle} >{folded ? <Lt /> : <Gt />} {props.label} </Label> }\n    { !folded && <Inner>{ children }</Inner> }\n  </Root>\n}\n\nexport default Collapsible\n","import axios from \"axios\";\nimport config from \"config\";\n\nconst settings = {\n  baseURL: config.apiOrigin\n}\n\nexport default axios.create(settings);","import { useLayoutEffect, useState, } from 'react'\n\nconst useWindowSize = () => {\n  const [size, setSize] = useState([0, 0]);\n  useLayoutEffect(() => {\n    function updateSize() {\n      setSize([window.innerWidth, window.innerHeight]);\n    }\n    window.addEventListener('resize', updateSize);\n    updateSize();\n    return () => window.removeEventListener('resize', updateSize);\n  }, []);\n  return size;\n}\n\nexport default useWindowSize\n","/*\n *  $shared / index\n */\nimport _Box from '@material-ui/core/Box'\nimport React, { useState } from 'react'\nimport {\n  Link, Switch, BrowserRouter as Router, Redirect, Route as _Route, useHistory, withRouter\n} from 'react-router-dom'\nimport styled from 'styled-components'\n\nexport { default as useApi } from \"./Api\"\nexport { default as AppMock } from \"./AppMock\"\nexport { default as AppRouter } from \"./AppRouter\"\n\n/* B */\n\nexport const Box = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ${p => p.cursor ? p.cursor : 'auto'};\n\n  display: flex;\n  flex-direction: column;\n`;\n\n/**\n * Just your regular shadowed box. Pointer cursor. TDD\n */\nexport const Btn = styled.div`\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  padding: .3em 1em;\n  cursor: pointer;\n`;\n\n/* C */\n\nexport const C = {\n  collapsible: {\n    descr: \"descr-sec\",\n  },\n  current_user: 'current_user',\n\n  jwt_token: 'jwt_token',\n\n  item_types: {\n    gallery: 'Gallery',\n    report: 'Report',\n    video: 'Video',\n  },\n\n  layout_onecol: 'onecol',\n  layout_mapui: 'mapui',\n\n  variants: {\n    floating: 'floating',\n    inline: 'inline',\n  },\n}\n\nexport { default as Collapsible } from \"./Collapsible\"\nexport const CollapsibleContext = React.createContext({})\nexport const CollapsibleContextProvider = ({ children, ...props }) => {\n  logg(props, 'CollapsibleContextProvider')\n\n  const [ collapsibles, setCollapsibles ] = useState({\n    [C.collapsible.descr]: true,\n  })\n\n  return <CollapsibleContext.Provider value={{\n    collapsibles, setCollapsibles,\n  }} >{ children }</CollapsibleContext.Provider>\n}\n\n/* D */\n/* I */\n\n/**\n * Like the rails inflector, has methods:\n * tableize()\n */\nexport const inflector = {\n  tableize: (m) => {\n    switch(m) {\n      case 'Gallery':\n        return 'galleries'\n      default:\n      return `${m.toLowerCase()}s`\n    }\n  },\n}\n\n/* L */\n\n/**\n * Usage: logg(someObject, 'label')\n *\n * This development-grade logger can be used instead of console.log() with some advantages:\n * * It encourages consistent labeling of logs. By labeling each log line, you can have dozens of log lines\n * written per action, and still know which log line comes from where.\n * The recommended label is the component name, or function name.\n * * If the label is present, the logged object is placed in the window, allowing you to inspect it in the console. The\n * label becomes the name of the object (stripped to [0-9a-zA-Z\\-_] chars). If you're logging a function, you can execute it.\n * If you log more than one thing, they can interact, allowing you to validate control flow.\n * * the logger can be turned off by making this function simply return.\n */\nconst logg = (a, b=\"\", c=null) => {\n  c = \"string\" === typeof c ? c : b.replace(/\\W/g, \"\");\n  if (c.length > 0) {\n    window[c] = a;\n  }\n\n  console.log(`+++ ${b}:`, a); // eslint-disable-line no-console\n};\n\nexport { logg };\n\n/* R */\n\nexport { default as request } from \"./request\";\n\n/* S */\n\n/**\n * Style Constants\n */\nexport const S = {\n  borderWidth: '10px',\n  bottomDrawerHeight: '100px',\n  breadcrumbsHeight: '30px',\n\n  blue: '#6aa3e9',\n  darkGrey: '#605d5d',\n  lightGrey: '#988b8b',\n  red: 'red',\n}\n\n/* T */\n\nexport const TwofoldContext = React.createContext({})\nexport const TwofoldContextProvider = ({ children, ...props }) => {\n  logg(props, 'TwofoldContextProvider')\n  const {\n    currentUser, setCurrentUser,\n    layout, setLayout,\n    loginModalOpen, setLoginModalOpen,\n  } = props\n\n  const [ bottomDrawerOpen, setBottomDrawerOpen ] = useState(false)\n  const [ itemToUnlock, _setItemToUnlock ] = useState({})\n  const setItemToUnlock = (item) => {\n    if (itemToUnlock.id !== item.id && !loginModalOpen) {\n      _setItemToUnlock(item)\n    }\n  }\n\n  const [ showItem, setShowItem ] = useState(false)\n  const [ showUrl, setShowUrl ] = useState(false)\n  const [ zoom, setZoom ] = useState(1)\n\n  return <TwofoldContext.Provider value={{\n    bottomDrawerOpen, setBottomDrawerOpen,\n    currentUser, setCurrentUser, // @TODO: move this to an AppWrapper context\n    itemToUnlock, setItemToUnlock,\n    layout, setLayout,\n    loginModalOpen, setLoginModalOpen,\n    showItem, setShowItem,\n    showUrl, setShowUrl,\n    zoom, setZoom,\n  }} >{ children }</TwofoldContext.Provider>\n}\n\n/* U */\nexport { default as useWindowSize } from './useWindowSize'\n\n/* W */\n\nexport const Wrapper = styled.div`\n  height: 100vh;\n`;\n\n/* Z */\n\nexport const ZoomContext = React.createContext({})\n","\nimport Drawer from '@material-ui/core/Drawer'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport React, { Fragment as F, useContext, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { MenuBottom } from \"./\"\nimport { Account, MyAccountWidget } from \"$components/users\"\nimport { C, logg, TwofoldContext } from \"$shared\"\n\nconst BottomWrapper = styled.div`\n;`\n\nconst ButtonWrapper = styled.div`\n  // border: 1px solid yellow;\n  position: absolute;\n  bottom: -10px;\n  left: 10px;\n`;\n\nconst BottomDrawer = (props) => {\n  // logg(props, 'BottomDrawer')\n\n  const { bottomDrawerOpen, layout, setBottomDrawerOpen } = useContext(TwofoldContext)\n\n  // @TODO: move the component to layout_onecol then\n  if (layout === C.layout_onecol) { return null; }\n\n  return <F>\n    <BottomWrapper className='BottomWrapper' >\n      <ButtonWrapper>\n        <IconButton\n          aria-label=\"open drawer\"\n          onClick={() => setBottomDrawerOpen(true)}\n          edge=\"start\"\n          className=\"menu-btn\"\n        ><MenuIcon\n          fontSize=\"small\"\n          style={{ color: 'white' }}\n        /></IconButton>\n      </ButtonWrapper>\n      <MenuBottom />\n    </BottomWrapper>\n\n    <Drawer anchor={\"bottom\"}\n      className='Drawer'\n      elevation={1}\n      open={bottomDrawerOpen}\n      onClose={() => setBottomDrawerOpen(false)}\n      BackdropProps={{ invisible: true }}\n      variant={\"persistent\"}\n    >\n      <div >\n        <MyAccountWidget />\n        <div\n          onClick={() => setBottomDrawerOpen(false)}\n          style={{ position: 'absolute', left: 0, bottom: 0 }}\n        >[X]</div>\n      </div>\n    </Drawer>\n  </F>\n}\n\nexport default BottomDrawer\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { logg, C, } from \"$shared\"\nimport { MenuLeft, } from \"$components/application\"\n\nconst Header = styled.div`\n  // border: 1px solid red;\n\n  flex-grow: 1;\n\n  text-align: center;\n  font-size: 2em;\n\n\n`;\n\nconst Root = styled.div`\n  // border: 1px solid blue;\n\n  display: flex;\n  justify-content: center;\n  line-height: 2em;\n  padding: 2em 0;\n`;\n\nconst MainHeader = (props) => {\n  // logg(props, 'MainMenu')\n\n  return <Root>\n    <MenuLeft variant={C.variants.inline} />\n    <Header>My Local Guide</Header>\n  </Root>\n}\n\nexport default MainHeader\n","\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst MapuiContainer = styled.div`\n  background: white;\n\n  overflow: hidden;\n  margin: 10px;\n  height: calc(100vh - ${p => p.borderWidth*2}px - ${p => p.bottomDrawerOpen ? `${p.bottomDrawerHeight - p.borderWidth/2}px` : '0px' });\n`\n\nexport {\n  MapuiContainer,\n}\n\nconst MapuiLayout = (props) => {\n  return <MapuiContainer {...props} />\n}\n\nexport default MapuiLayout\n","\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst MapuiContainer = styled.div`\n  background: white;\n\n  overflow: hidden;\n  // margin: 10px;\n  height: calc(100vh - ${p => p.borderWidth*2}px - ${p => p.bottomDrawerOpen ? `${p.bottomDrawerHeight - p.borderWidth/2}px` : '0px' });\n`\n\nexport {\n  MapuiContainer,\n}\n\nconst MapuiMobileLayout = (props) => {\n  return <MapuiContainer {...props} />\n}\n\nexport default MapuiMobileLayout\n","import {\n  IonContent,\n  IonIcon,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonMenu,\n  IonMenuToggle,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n} from '@ionic/react';\n\nimport React from 'react';\nimport { newspaperOutline, bus, person, powerOutline } from 'ionicons/icons';\nimport './application.scss';\n\n\n/**\n * 20210602\n *\n */\nconst MenuBottom = () => {\n  return (\n    <IonMenu type=\"overlay\">\n      <IonHeader>\n        <IonToolbar color=\"primary\">\n          <IonTitle>Menu</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <img src=\"/assets/hero.png\" />\n        <h1>what's here?</h1>\n      </IonContent>\n    </IonMenu>\n  )\n}\n\nexport default MenuBottom;\n","import {\n  IonContent,\n  IonIcon,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonMenu,\n  IonMenuToggle,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n} from '@ionic/react';\n\nimport React from 'react';\nimport { newspaperOutline, bus, person, powerOutline } from 'ionicons/icons';\nimport './application.scss';\n\nconst appPages = [\n  {\n    title: 'Homefeed',\n    icon: newspaperOutline,\n    url: \"/en\"\n  },\n  {\n    title: 'Cities',\n    icon: bus,\n    url: \"/en/cities\"\n  },\n  {\n    title: 'My Account',\n    icon: person,\n    url: \"/en/account\"\n  },\n  {\n    title: 'Account2',\n    icon: person,\n    url: \"/en/account2\"\n  },\n  {\n    title: 'Login',\n    icon: powerOutline\n  }\n];\n\n/**\n * 20210529 - I think this is obsolete somehow, I'm using MyDrawer in App.jsx\n *\n */\nconst Menu = () => {\n  return (\n    <IonMenu contentId=\"main\" type=\"overlay\">\n      <IonHeader>\n        <IonToolbar color=\"primary\">\n          <IonTitle>Menu</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <img src=\"/assets/hero.png\" />\n        <IonList id=\"inbox-list\">\n          { appPages.map((appPage, index) => <IonMenuToggle key={index} autoHide={false}>\n            <IonItem\n              routerLink={appPage.url}\n              routerDirection=\"none\"\n              lines=\"none\"\n              detail={false}>\n              <IonIcon\n                slot=\"start\"\n                ios={appPage.icon}\n                md={appPage.icon} />\n              <IonLabel>{appPage.title}</IonLabel>\n            </IonItem>\n          </IonMenuToggle>) }\n        </IonList>\n      </IonContent>\n    </IonMenu>\n  )\n}\n\nexport default Menu\n","import { IonApp, IonButtons, IonMenuButton } from '@ionic/react'\nimport Drawer from '@material-ui/core/Drawer'\nimport Fab from '@material-ui/core/Fab'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useContext, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { Menu } from \"$components/application\"\nimport { Api, C, Debug, logg, TwofoldContext } from \"$shared\"\n\nconst _LeftWrapper = styled.div`\n  // border: 1px solid green;\n`;\n\nconst W1 = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n`;\n\nconst W2 = styled.div`\n`;\n\nconst MenuLeft= (props) => {\n  // logg(props, 'MenuLeft')\n\n  const [ drawerOpen, setDrawerOpen ] = React.useState(false)\n  const [ loading, setLoading ] = useState(false)\n  const history = useHistory()\n  const { currentUser, setCurrentUser } = useContext(TwofoldContext)\n\n  return <F>\n\n    { /* <Menu /> */ }\n\n    { /* @TODO: probably remove from here, too many variations of the button, it gotta be separate */ }\n    { props.variant === C.variants.floating ?\n      <Fab onClick={() => setDrawerOpen(true)} style={{ position: 'absolute', top: 0, left: 0, margin: '.5em' }} aria-label='main menu'><MenuIcon /></Fab>\n      : <MenuIcon onClick={() => setDrawerOpen(true)} /> }\n\n    <Drawer anchor={\"left\"} open={drawerOpen} onClose={() => setDrawerOpen(false)} >\n      <W1>\n        <List>\n\n          <ListItem button key={'newsfeed'}\n            onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en\")\n            } } >\n            Newsfeed\n          </ListItem>\n\n          <ListItem button key={'cities'}\n            onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en/cities\")\n            } }>\n            <span >Cities</span>\n          </ListItem>\n\n          { /* <ListItem button key={'map 1'} >\n            <span onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en/locations\")\n            } }>The Directory</span>\n          </ListItem> */ }\n\n          { currentUser && currentUser.bookmarks.map((b, idx) =>\n            <ListItem button key={idx}\n              onClick={() => {\n                setDrawerOpen(false)\n                history.push(`/en/locations/show/${b.slug}`)\n              } } >\n              <span >{b.name}</span>\n            </ListItem>\n          ) }\n\n          <ListItem button key={'account'}\n            onClick={() => {\n              setDrawerOpen(false)\n              history.push(\"/en/account\")\n            } } >\n            <span >Account</span>\n          </ListItem>\n\n        </List>\n        { /* <W2>\n          { loading && 'Loading...' }\n          { currentUser && <F>\n            {currentUser.email}<br />\n            {currentUser.n_stars}<br />\n            some action\n          </F> }\n        </W2> */ }\n      </W1>\n    </Drawer>\n  </F>\n}\n\nMenuLeft.propTypes = {\n  variant: PropTypes.string,\n}\nexport default MenuLeft\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"./application.scss\";\nimport styled from 'styled-components'\n\nimport { Api, logg, request } from \"$shared\"\n\nconst W = styled.div`\n  margin-top: .5em;\n`\n\nconst Metaline = (props) => {\n  // logg(props, 'Metaline')\n\n  const { created_at, username, city, tags = [] } = props;\n\n  function navigateToCity(){\n    props.history.push(`/en/cities/travel-to/${city.slug}/show/newsfeed`);\n  }\n\n  return (\n    <W>\n      <span className=\"date\"> On {(created_at || \"\").substring(0, 10)} </span>\n      { username && <>by <span className=\"user\"> {username} </span></> }\n      { city     && <>in <span className=\"city\" onClick={navigateToCity}> {city.name} </span></> }\n      { tags     && tags.map((tag, i) => <span key={i} className=\"tags\">{tag.name}</span>) }\n    </W>\n  );\n\n}\n\nexport default withRouter(Metaline);","import React, { useEffect, useState } from \"react\";\nimport { IonIcon } from \"@ionic/react\";\nimport { starOutline, starHalf, star } from 'ionicons/icons';\nimport \"./application.scss\";\n\nconst Rating = (props) => {\n\n  let rate = props.rate;\n  let [rating, setRating] = useState([]);\n\n  let iconMapping = {\n    0: starOutline,\n    1: starHalf,\n    2: star\n  };\n\n  useEffect(() => {\n\n    let rating = (new Array(5)).fill(0);\n    let i = 0;\n    while (rate > 0) {\n      if (rate < 1) {\n        rating[i] = 1;\n      } else {\n        rating[i] = 2;\n      }\n      rate--;\n      i++;\n    }\n\n    setRating(rating);\n\n  }, []);\n\n  return (\n    <div className=\"rating\">\n      { rating.map((r, i) => <IonIcon key={i} className=\"stars\" icon={iconMapping[r]} ></IonIcon>) }\n    </div>\n  )\n\n}\n\nexport default Rating;","\nimport Modal from \"react-modal\"\nimport React, { useContext, useEffect, useRef, } from 'react'\nimport styled from 'styled-components'\n\nimport './UnlockModal.scss'\nimport config from 'config'\nimport { Btn, C, logg, request, TwofoldContext, useApi, } from \"$shared\"\n\nconst Btn0 = styled.div`\n  display: inline;\n  cursor: pointer;\n`;\nconst BtnRow = styled.div`\n  display: flex;\n  justify-content: space-around;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst modalStyle = {\n  overlay: {},\n  content: {\n    margin: 'auto',\n    maxWidth: '400px',\n\n  }\n}\n\nconst UnlockModal = (props) => {\n  logg(props, 'UnlockModal')\n\n  const {\n    currentUser, setCurrentUser,\n    itemToUnlock, setItemToUnlock,\n    loginModalOpen, setLoginModalOpen,\n  } = useContext(TwofoldContext)\n  const usedTwofoldContext = useContext(TwofoldContext)\n\n  const api = useApi()\n\n  const doUnlock = async () => {\n    // @TODO: check how many unlocks I have, and offer to purchase more if not enough.\n    const path = api.doUnlock({ kind: itemToUnlock.item_type, id: itemToUnlock.id })\n    await request.post(`${config.apiOrigin}${path}`).then((r) => {\n      setItemToUnlock({})\n    }).catch((e) => {\n      logg(e, 'e19')\n    })\n  }\n\n  const mountedRef = useRef('init')\n  useEffect(() => {\n\n    const fn = async () => {\n      const jwtToken = localStorage.getItem(C.jwt_token)\n      await request.get(`${config.apiOrigin}${api.myAccount()}?jwt_token=${jwtToken}`).then((r) => {\n        if (!mountedRef.current) { return }\n        setCurrentUser(r.data)\n      }).catch((e) => {\n        // logg(e, 'e12')\n        // setCurrentUser(null)\n      })\n    }\n    fn()\n    return () => mountedRef.current = null\n  }, [itemToUnlock.id])\n\n  if (!itemToUnlock.id) { return null }\n\n  return (<Modal style={modalStyle} ariaHideApp={false} isOpen={!!itemToUnlock.id} >\n    <Header>\n      <h1>Unlock this item?</h1>\n      <Btn0 onClick={() => setItemToUnlock(false) } >&times;</Btn0>\n    </Header>\n    <p>To access this content, please unlock it first. It costs 1 (one) coin to unlock.</p>\n    { !!currentUser\n      && <p>You have <b>{currentUser.n_unlocks}</b> unlocks.</p>\n      || <p>You have to be logged in to unlock content. <a onClick={() => { setLoginModalOpen(true) ; setItemToUnlock(false) }}>Please login.</a></p> }\n    <BtnRow>\n      { !!currentUser && <Btn onClick={doUnlock} >Unlock</Btn> }\n    </BtnRow>\n  </Modal>)\n\n}\n\nexport default UnlockModal\n","import { IonPage, IonLoading, IonContent, IonIcon as _IonIcon } from '@ionic/react';\nimport { funnel, bookmark, newspaperOutline, image, videocam } from 'ionicons/icons';\nimport React, { Fragment as F, useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport styled from 'styled-components'\n\nimport { useApi, AppRouter, logg, S, Wrapper } from \"$shared\"\nimport \"./cities.scss\"\n\nconst Counts = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin: 1em 0px;\n`;\n\nconst Count = styled.div`\n  // border: 1px solid red;\n\n  display: flex;\n  justify-content: center;\n\n  width: 50%;\n  text-align: center;\n  position: relative;\n  padding: 0.1em;\n`;\n\nconst IonIcon = styled(_IonIcon)`\n  font-size: 2em;\n  color: ${p=>p.theme.darkGrey};\n`;\n\nconst Number = styled.div`\n  // border: 1px solid green;\n\n  padding: 0.5em;\n\n  color: ${p=>p.theme.lightGrey};\n  font-size: 0.9em;\n  font-weight: 600;\n`;\n\nconst Cities = (props) => {\n  const [cities, setCities] = useState([]);\n  const [filteredCities, setFilteredCities] = useState([]);\n  const [showLoading, setShowLoading] = useState(false);\n  const api = useApi()\n  const history = useHistory()\n\n  useEffect(() => {\n    setShowLoading(true);\n    api.getCities().then(res => {\n      setShowLoading(false);\n      setFilteredCities(res);\n      setCities(res);\n    });\n  }, [])\n\n  const filterHandler = (ev) => {\n    let filteredCities = cities.filter(city => {\n      return city.name.toLowerCase().indexOf(ev.target.value.trim().toLowerCase()) > -1;\n    });\n    setFilteredCities(filteredCities);\n  }\n\n  return <F>\n    <Wrapper className='cities' >\n      <h1 className=\"heading\" >Cities</h1>\n\n      <div className=\"filter-section\">\n        <input className=\"filter-input\" onChange={filterHandler} />\n        <IonIcon className=\"filter-icon\" icon={funnel}></IonIcon>\n      </div>\n\n      { /* @TODO: re-add! */ }\n      { /* <div className=\"bookmark-section\">\n        <label className=\"switch\">\n          <input type=\"checkbox\" onChange={() => { }} checked />\n          <span className=\"slider round\"></span>\n        </label>\n        <span className=\"bookmark-text\">Show only bookmarked</span>\n      </div> */ }\n\n      <div className=\"container\">\n        { filteredCities.map((city, i) => <div key={i} className=\"cities\" onClick={() => history.push(AppRouter.cityPath(city.slug)) } >\n            <div className=\"img-section\">\n              <span className=\"bookmark\" >\n                <IonIcon className=\"bookmark-icon\" icon={bookmark}></IonIcon>\n              </span>\n              <img className=\"city-img\" src={city.photo} />\n              <span className=\"city-title\">{city.name}</span>\n            </div>\n            <Counts>\n              <Count>\n                { /* @TODO: wire in theme provider */ }\n                <Number >{city.n_reports}</Number>\n                <IonIcon icon={newspaperOutline}></IonIcon>\n\n              </Count>\n              <Count>\n\n                <Number >{city.n_galleries}</Number>\n                <IonIcon icon={image}></IonIcon>\n              </Count>\n              <Count>\n\n                <Number >{city.n_videos}</Number>\n                <IonIcon icon={videocam}></IonIcon>\n              </Count>\n            </Counts>\n          </div>\n        ) }\n      </div>\n      &nbsp;\n    </Wrapper>\n\n    <IonLoading\n      isOpen={showLoading}\n      onDidDismiss={() => setShowLoading(false)}\n      message={'Please wait...'}\n      duration={5000}\n    />\n\n  </F>\n}\n\nexport default Cities;\n","\nimport PropTypes from 'prop-types'\nimport React from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport styled from 'styled-components'\n\nimport { Metaline } from \"$components/application\"\nimport { logg } from \"$shared\"\nimport { NewsitemContainer } from './'\nimport \"./newsitems.scss\"\n\n\nconst Image = styled.div`\n  position: relative;\n  padding-top: 100%;\n  overflow: hidden;\n  z-index: 10;\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n\n  width: 100px;\n  height: 100px;\n`;\n\nconst Image2 = styled.div`\n`;\n\nconst Images = styled.div`\n  position: relative;\n`;\n\nconst ImageLarge = styled.img`\n  width: 200px;\n`;\n\nconst ImageThumb1 = styled.img`\n  position: absolute;\n  left: 200px;\n  top: 0;\n`;\n\nconst ImageThumb2 = styled.img`\n  position: absolute;\n  left: 200px;\n  top: 100px;\n`;\n\n/**\n * TDD\n */\nconst NewsitemGallery = (props) => {\n  // logg(props, 'NewsitemGallery')\n  const { item } = props\n\n  const history = useHistory()\n\n  return <NewsitemContainer item={item} >\n    <Images >\n      { false && (item.photos || []).slice(0, 3).map((photo, i) =>\n        <Image key={i}\n          style={{ backgroundImage: `url(${photo.large_url})` }}>\n          { i == 2 && <div className=\"number\">+{item.photos.length - 3}</div> }\n        </Image>\n      ) }\n\n      { item.photos[0] && <ImageLarge src={item.photos[0].thumb_url} /> }\n      { item.photos[1] && <ImageThumb1 src={item.photos[1].thumb_url} /> }\n      { item.photos[2] && <ImageThumb2 src={item.photos[2].thumb_url} /> }\n\n      { false && item.photos.map((photo, idx) =>\n        <Image2 key={idx} >\n          <img src={`${photo.thumb_url}`} alt='' />\n        </Image2>\n      ) }\n    </Images>\n  </NewsitemContainer>\n}\n\nNewsitemGallery.propTypes = {\n  item: PropTypes.shape({\n    photos: PropTypes.array.isRequired,\n  }),\n}\nexport default NewsitemGallery\n","\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useEffect, useContext, useState } from \"react\"\n\nimport { useHistory } from \"react-router-dom\"\nimport styled from 'styled-components'\n\nimport { ItemIcon, NewsitemContainer } from \"./\"\nimport { Metaline, } from \"$components/application\"\nimport { Api, C, logg, request, TwofoldContext } from \"$shared\"\n\nimport \"./newsitems.scss\"\n\n\nconst NewsitemReport = (props) => {\n  // logg(props, \"NewsitemReport\");\n  const { item } = props\n  return (<NewsitemContainer item={item} />)\n}\n\nNewsitemReport.propTypes = {\n  item: PropTypes.object.isRequired,\n}\nexport default NewsitemReport\n\n","\nimport PropTypes from 'prop-types'\nimport React from \"react\"\nimport styled from 'styled-components'\n\nimport { logg } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport { NewsitemContainer } from \"./\"\nimport \"./newsitems.scss\"\n\n\nconst NewsitemVideo = (props) => {\n  logg(props, 'NewsitemVideo')\n  const { item } = props\n\n  return <NewsitemContainer item={item} >\n    <div className=\"image-section\">\n      { item.youtube_id ?\n          <iframe className=\"iframe\" width=\"100%\" height=\"315\" src={`https://www.youtube.com/embed/${item.youtube_id}`} frameBorder=\"0\" allow=\"autoplay; encrypted-media\" allowFullScreen></iframe>\n          : <video width=\"100%\" preload=\"metadata\" height=\"auto\" controls>\n            <source src={item.url} type=\"video/mp4\" />\n          </video> }\n    </div>\n  </NewsitemContainer>\n\n}\n\nNewsitemVideo.propTypes = {\n  item: PropTypes.object.isRequired,\n}\nexport default NewsitemVideo","import React from \"react\"\nimport styled from 'styled-components'\n\nimport { Api, C, logg } from \"$shared\"\nimport { GenericNewsitem } from \"./\"\nimport NewsitemGallery from \"$components/newsitems/NewsitemGallery\"\nimport NewsitemReport from \"$components/newsitems/NewsitemReport\"\nimport NewsitemVideo from \"$components/newsitems/NewsitemVideo\"\nimport \"./newsitems.scss\"\n\nconst ICONS = {\n  1: \"/assets/newsfeed/sunglass.png\",\n  2: \"/assets/newsfeed/gem_premium.png\"\n}\n\nconst Wrapper = styled.div`\n  // border: 2px solid yellow;\n\n  // margin-bottom: 2em;\n`\n\nconst Newsitems = (props) => {\n  logg(props, 'Newsitems')\n  const { newsitems } = props\n\n  if (!newsitems || !newsitems.length) { return <div>No Newsitems</div> }\n\n  return (\n    <Wrapper>\n      { newsitems.map((newsitem, idx) => {\n        const premium_tier = newsitem.premium_tier || 0\n        const icon = ICONS[premium_tier]\n\n        return (\n          <div key={idx} className={`items premium-${premium_tier}`}>\n            { newsitem.item_type === C.item_types.gallery && <NewsitemGallery item={newsitem} /> }\n            { newsitem.item_type === C.item_types.report  && <NewsitemReport  item={newsitem} /> }\n            { newsitem.item_type === C.item_types.video   && <NewsitemVideo   item={newsitem} /> }\n            { !newsitem.item_type && <GenericNewsitem item={newsitem} /> }\n          </div>\n        )\n      }) }\n    </Wrapper>\n  )\n}\n\nexport default Newsitems\n","\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useEffect, useContext, useState } from \"react\"\n\nimport { useHistory } from \"react-router-dom\"\nimport styled from 'styled-components'\n\nimport { ItemIcon } from \"./\"\nimport { Metaline, } from \"$components/application\"\nimport { Api, Box, C, inflector, logg, request, TwofoldContext } from \"$shared\"\n\n\nconst Col = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  margin-left: 0.5em;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n\n  // padding: 0 1em;\n`;\n\nconst Title = styled.h2`\n  margin-top: 0;\n`;\n\n/**\n * TDD\n */\nconst NewsitemContainer = ({ children, ...props }) => {\n  // logg(props, 'NewsitemContainer')\n  const { item } = props\n  const { item_type, slug } = item\n\n  const history = useHistory()\n\n  const {\n    itemToUnlock, setItemToUnlock,\n    layout,\n    showItem, setShowItem,\n  } = useContext(TwofoldContext)\n\n  const navigateToItem = () => {\n    if (item.is_premium && !item.is_purchased) {\n      setItemToUnlock(item)\n    } else {\n      if (layout === C.layout_mapui) {\n        setShowItem(item)\n      } else {\n        history.push(`/en/${inflector.tableize(item_type)}/show/${slug}`)\n      }\n    }\n  }\n\n  return <Box boxShadow={2} {...props} onClick={navigateToItem} cursor=\"pointer\" >\n    { children }\n    <Row>\n      <ItemIcon {...item} />\n      <Col>\n        <Title>{item.name}</Title>\n        <Metaline {...item} />\n      </Col>\n    </Row>\n    <p className=\"subhead\" dangerouslySetInnerHTML={{ __html: item.subhead }} />\n  </Box>\n}\n\nNewsitemContainer.propTypes = {\n  item: PropTypes.object.isRequired,\n}\nexport default NewsitemContainer\n","\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nimport { C, logg } from \"$shared\"\n\n/**\n * Displays the appropriate icon.\n *\n * @param [Boolean] props.isPurchased\n * @param [Number] props.premiumTier\n * @param [String] props.kind\n */\n export const ItemIcon = (props) => {\n  // logg(props, \"ItemIcon\")\n  const { is_purchased, item_type, premium_tier } = props\n\n  if (is_purchased) {\n    return <img className=\"icon\" src=\"/assets/icons/glasses.png\" alt='' />\n  }\n  if (premium_tier > 0) {\n    return <img className=\"icon\" src=\"/assets/icons/gem.png\" alt='' />\n  }\n  switch (item_type) {\n    case C.item_types.gallery:\n      return <img className=\"icon\" src=\"/assets/icons/gallery.png\" alt='' />\n    case C.item_types.report:\n      return <img className=\"icon\" src=\"/assets/icons/report.png\" alt='' />\n    case C.item_types.video:\n      return <img className=\"icon\" src=\"/assets/newsfeed/video_icon.svg\" alt='' />\n    default:\n      return \"unknown kind\"\n  }\n}\n\nItemIcon.propTypes = {\n  is_purchased: PropTypes.bool, // .isRequired,\n  item_type: PropTypes.string.isRequired,\n  premium_tier: PropTypes.number,\n}\nexport default ItemIcon\n","/*\n * $components / newsitems / index.jsx\n */\nimport React, { Fragment as F, useState } from \"react\"\nimport styled from 'styled-components'\n\nimport { Box, inflector, logg } from \"$shared\"\n\n/* G */\n\nexport const GenericNewsitem = (props) => {\n  logg(props, 'GenericNewsitem')\n  const { item } = props\n  return <div dangerouslySetInnerHTML={{ __html: item.description }} />\n}\n\n/* N */\nexport { default as NewsitemGallery } from \"./NewsitemGallery\"\nexport { default as NewsitemReport } from \"./NewsitemReport\"\nexport { default as Newsitems } from \"./Newsitems\"\nexport { default as NewsitemContainer } from \"./NewsitemContainer\"\n\n\n\n/* I */\nexport const ICONS = {\n  1: \"/assets/newsfeed/sunglass.png\",\n  2: \"/assets/newsfeed/gem_premium.png\"\n}\n\nexport { default as ItemIcon } from \"./ItemIcon\"\n\n","import { funnel, bookmark, newspaperOutline, image, videocam } from 'ionicons/icons'\nimport { IonPage, IonContent, IonButton, IonImg, IonIcon } from \"@ionic/react\"\nimport PropTypes from 'prop-types'\nimport React, { useEffect, useState } from \"react\"\nimport styled from 'styled-components'\n\nimport { logg } from \"$shared\"\nimport { Rating } from \"$components/application\"\nimport \"./venues.scss\"\n\nconst Address = styled.p`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: ${p => p.theme.darkGrey };\n  font-size: 14px;\n`;\n\nconst Col = styled.div``;\n\n// right arrow container\nconst _Ra = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\nconst RightArrow = () => <_Ra><img className=\"forward-arrow\" src=\"/assets/16x16/arrow-right.png\" /></_Ra>\n\nconst Row = styled.div`\n  display: flex;\n`;\n\nconst Title = styled.div`\n  font-size: 1.5em;\n`;\n\nconst Venue = styled.div`\n  width: 100vw;\n  padding: 1em;\n  margin-bottom: 0.5em;\n  border-bottom: 1px solid #e3d3d3;\n  box-shadow: 0px 1px 5px 1px #b3aeae;\n  background-color: white;\n  position: relative;\n\n  display: flex;\n  justify-content: space-between;\n\n  img.thumb {\n    border-radius: 10px;\n  }\n\n  > div {\n    // border: 1px solid red;\n  }\n`;\n\nconst Venues = (props) => {\n  logg(props, 'Venues')\n\n  const defaultRating = 3.5\n  const [filteredVenues, setFilteredVenues] = useState(props.venues)\n\n  function filterHandler(ev) {\n    let venues = props.venues.filter(venue => {\n      return venue.name.toLowerCase().includes(ev.target.value.toLowerCase())\n    })\n    setFilteredVenues(venues)\n  }\n\n  return (\n    <div className=\"venues-section\">\n      <div>\n        <div className=\"filter-section\">\n          <input className=\"filter-input\" onChange={filterHandler} />\n          <IonIcon className=\"filter-icon\" icon={funnel}></IonIcon>\n        </div>\n      </div>\n      <div className=\"container\">\n\n        { filteredVenues.map((venue, idx) => <Venue key={idx} >\n          <Row>\n            <Col><img style={{ paddingRight: '1em' }} className='thumb' src={venue.photo} /></Col>\n            <Col>\n              <Title>{venue.name}</Title>\n              <div className=\"rating-section\">\n                <Rating rate={defaultRating}></Rating>\n                <span className=\"reviews\">5 reviews</span>\n              </div>\n              <div className=\"tags-section\">\n                { venue.tags.map((tag, idx) => <span key={idx} className=\"tags\">{tag.name}</span> )}\n              </div>\n              <p className=\"description\" dangerouslySetInnerHTML={{ __html: venue.subhead }}></p>\n              { venue.address && <Address>{venue.address}</Address> }\n            </Col>\n\n          </Row>\n          <RightArrow />\n        </Venue> )}\n\n      </div>\n    </div>\n  )\n}\n\nVenues.propTypes = {\n  venues: PropTypes.array.isRequired,\n}\nexport default Venues\n","import React, { useEffect, useRef, useState } from \"react\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport { IonPage, IonContent, IonIcon, IonLoading } from '@ionic/react'\nimport { pin, newspaperOutline, image, videocam } from 'ionicons/icons'\n\nimport { AppRouter, useApi, logg, Wrapper } from \"$shared\"\nimport { Newsitems } from \"$components/newsitems\"\nimport { Venues } from \"$components/venues\"\nimport \"./cities.scss\"\n\nconst CitiesShow = (props) => {\n  logg(props, 'CitiesShow')\n  const { match } = props\n\n  const api = useApi()\n  const history = useHistory()\n  const thisPath = AppRouter.cityPath(match.params.name)\n\n  const location = useLocation()\n\n  const [city, setCity] = useState(null)\n  const [showLoading, setShowLoading] = useState(false)\n\n  const mountedRef = useRef('init')\n  useEffect(() => {\n    setShowLoading(true)\n    api.getCity(match.params.name).then(res => {\n      if (mountedRef.current) {\n        setCity(res.data.city)\n        setShowLoading(false)\n      }\n    })\n    return () => mountedRef.current = false\n  }, [match.params.name])\n\n  // @TODO: remove this!\n  function changeMenuHandler(menu) {\n    // history.push(`${match.url}/${menu}`);\n  }\n\n  return <Wrapper>\n\n    { city && <div className='wrapper'>\n      <div className='city-show'>\n\n        <header style={{ backgroundImage: `url(${city.hero_img}}`, backgroundSize: \"contain\" }}></header>\n\n        <section className=\"section-one\">\n          <IonIcon icon={pin} className=\"location\"></IonIcon>\n          <h1 className=\"city-name\">{city.name}</h1>\n          <div className=\"status\">\n            <div className=\"status-grid\">\n              <IonIcon className=\"info-icon\" icon={newspaperOutline}></IonIcon>\n              <span className=\"numbers\">{city.n_reports}</span>\n            </div>\n            <div className=\"status-grid\">\n              <IonIcon className=\"info-icon\" icon={image}></IonIcon>\n              <span className=\"numbers\">{city.n_galleries}</span>\n            </div>\n            <div className=\"status-grid mid\">\n              <IonIcon className=\"info-icon\" icon={videocam}></IonIcon>\n              <span className=\"numbers \">{city.n_videos}</span>\n            </div>\n          </div>\n        </section>\n\n        { /* @TODO: re-add tags here! */ }\n        { /* city.tags && <section className=\"tags-section\">\n          <span className=\"btn delete-btn\" >\n            <IonIcon name=\"close\"> </IonIcon> deselect all\n          </span>\n          { city.tags.map((tag, i) => <span className=\"btn\" key={i} >{tag.name}</span>) }\n        </section> */ }\n\n        <section className=\"section-three\">\n          <div className=\"menu-option\" onClick={() => history.push(AppRouter.cityPath(match.params.name))} >\n            <img src=\"/assets/newsfeed-icon.svg\" alt=\"Newsfeed\" />\n            <p className={`${location.pathname == thisPath ? \"selected\" : \"\"} menu-item`}>Newsfeed</p>\n          </div>\n          <div className=\"menu-option\" onClick={() => history.push(AppRouter.cityVenuesPath(match.params.name))} >\n            <img src=\"/assets/venue-icon.svg\" alt=\"Venues\" />\n            <p className={`${location.pathname.includes(\"venues\") ? \"selected\" : \"\"} menu-item`}>Venues</p>\n          </div>\n        </section>\n\n\n        <Switch>\n          <Route exact path={`${match.url}/venues`} render={() => <Venues    venues={city.venues} />} />\n          <Route exact path={match.url}             render={() => <Newsitems newsitems={city.newsitems} /> } />\n        </Switch>\n\n\n      </div>\n    </div>}\n    <IonLoading\n      isOpen={showLoading}\n      onDidDismiss={() => setShowLoading(false)}\n      message={'Please wait...'}\n      duration={5000}\n    />\n\n    <br /><br /><br />\n  </Wrapper>\n}\n\nexport default CitiesShow\n","\nimport { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\n\nimport { C, logg, request, TwofoldContext } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport \"./galleries.scss\"\n\nconst GalleriesShow = (props) => {\n  logg(props, 'GalleriesShow')\n  const { match } = props\n\n  const [showLoading, setShowLoading] = useState(false) // @TODO: hmm could it be moved to TwofoldContext ?\n  const [gallery, setGallery] = useState({})\n\n  const {\n    currentUser, setCurrentUser,\n    itemToUnlock, setItemToUnlock,\n    loginModalOpen, setLoginModalOpen,\n  } = useContext(TwofoldContext)\n  const mountedRef = useRef('init')\n\n  const getGallery = async () => {\n    const token = localStorage.getItem(C.jwt_token)\n    await request.get(`/api/galleries/view/${match.params.slug}`, { params: { jwt_token: token } }).then(res => {\n      if (!mountedRef.current) { return }\n      const gallery = res.data.gallery\n      if (gallery.is_premium && !gallery.is_purchased) {\n        setItemToUnlock(gallery)\n      } else {\n        setGallery(res.data.gallery)\n      }\n    })\n  }\n\n  useEffect(() => {\n    getGallery()\n    return () => {\n      mountedRef.current = null\n    }\n  }, [gallery.id, itemToUnlock.id] )\n\n  return (<F>\n\n    { <div className=\"gallery-show\">\n      <div className='narrow'>\n        <h1 className=\"heading\">\n          <img src=\"/assets/newsfeed/photos_icon.png\" />\n          <span className=\"title\">{gallery.name}</span>\n        </h1>\n        <Metaline item={gallery} />\n\n        <div className=\"thumbs\">\n          { gallery.photos && gallery.photos.map((ph, i) =>\n            <div className='card' key={i}>\n              <div className='card-inner'>\n                <IonImg src={ph.thumb_url}></IonImg>\n              </div>\n            </div>\n          ) }\n        </div>\n      </div>\n      <div className=\"full-img-section\">\n        { gallery.photos && gallery.photos.map((ph, i) =>\n          <div className='item' key={i}>\n            <img src={ph.large_url} />\n          </div>\n        ) }\n      </div>\n    </div>}\n\n  </F>)\n}\n\nexport default GalleriesShow","import React, { useEffect, useState } from \"react\";\nimport { IonLoading } from \"@ionic/react\";\n\nimport request from \"$shared/request\";\nimport { logg } from \"$shared\";\nimport { Galleries } from \"./\";\nimport { NewsitemGallery } from \"$components/newsitems\";\n\nconst MyGalleries = (props) => {\n  const [galleries, setGalleries] = useState(null);\n  const [showLoading, setShowLoading] = useState(false);\n\n  useEffect(() => {\n    setShowLoading(true);\n    const token = localStorage.getItem(\"jwtToken\");\n    request.get(`/api/my/galleries`, { params: { jwt_token: token } }).then(r => {\n      logg(r.data, 'MyGalleries data')\n      setGalleries(r.data);\n      setShowLoading(false);\n    })\n  }, []);\n\n  return (<>\n    <IonLoading\n      isOpen={showLoading}\n      onDidDismiss={() => setShowLoading(false)}\n      message={'Please wait...'}\n      duration={5000}\n    />\n    { galleries && galleries.length && galleries.map((g) => <NewsitemGallery key={g.id} data={g} /> ) }\n  </>);\n}\n\nexport default MyGalleries;","import React, { useContext } from 'react'\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport config from 'config'\nimport { C, logg, request, S, TwofoldContext } from \"$shared\"\nimport { MenuLeft } from \"$components/application\"\n\n// one breadcrumb\nconst B = styled.div`\n  padding: 0.5em;\n`;\n\n// the divider\nconst B1 = styled.div`\n  padding: 0.5em 0;\n`;\n\nconst Root = styled.div`\n  border: ${p=>p.debug?'1':'0'}px solid cyan;\n\n  display: flex;\n  z-index: 1;\n\n  height: ${p => p.breadcrumbsHeight};\n`;\n\nconst Breadcrumbs = (props) => {\n  logg(props, 'Breakcrumbs')\n\n  const { layout } = useContext(TwofoldContext)\n\n  const history = useHistory()\n\n  const out = []\n  props.breadcrumbs.map((b, idx) => {\n    if (idx+1 === props.breadcrumbs.length) {\n      // last one\n      out.push(<B key={idx} >{b.name}</B>)\n    } else {\n      out.push(<B\n        key={idx}\n        style={{ textDecoration: 'underline' }}\n        onClick={() => history.push(`/en/locations/show/${b.slug}`) }\n      >{b.name}</B>)\n      out.push(<B1 key={`${idx}-divider`} >&gt;</B1>)\n    }\n  })\n  return <Root {...S} debug={config.debug} className=\"Breadcrumbs\" >\n    { layout === C.layout_mapui && <MenuLeft variant={C.variants.inline} /> }\n    { out }\n  </Root>\n}\n\nexport default Breadcrumbs\n","\nimport React, { useEffect, useState } from \"react\";\nimport styled from 'styled-components'\n\nimport config from \"config\";\nimport { useApi, Box, logg, request } from \"$shared\";\n\nconst W = styled.div`\n  padding: 2em 0;\n`\n\nconst ReportsShow = (props) => {\n  logg(props, \"ReportsShow\");\n\n  let [ item, setItem ] = useState({});\n  let api = useApi()\n\n  // @TODO: refactor\n  const currentUser = JSON.parse(localStorage.getItem(\"current_user\")) || {};\n\n  // @TODO: not logged in and has access\n  const getReport = async () => {\n    logg(null, 'getting report...')\n\n    request.get(api.reportsGet(props.match.params.slug)).then(r => r.data).then(data => {\n      logg(data, 'got report')\n      setItem(data.report);\n    });\n  };\n\n  useEffect(() => {\n    getReport();\n  }, []);\n\n  // @TODO: logged in and no access\n\n  // @TODO: logged in and access\n\n  return (<W>\n    <Box boxShadow={2}>\n      <h1>Report {item.name}</h1>\n      <div className=\"description\" dangerouslySetInnerHTML={{ __html: item.description }} />\n    </Box>\n  </W>)\n}\n\n// @TODO: wrap in login HOC\nexport default ReportsShow;\n","\nimport { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport Modal from \"react-modal\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { C, logg, request, S, TwofoldContext, ZoomContext } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport { GalleriesShow } from \"$components/galleries\"\nimport { ReportsShow } from \"$components/reports\"\nimport { Newsitems } from \"$components/newsitems\"\n\n/*\n * @TODO: move to $components/application\n */\nconst ItemModal = (props) => {\n  logg(props, 'ItemModal')\n  const { item } = props\n\n  const { showItem, setShowItem } = useContext(TwofoldContext)\n\n  return <Modal isOpen={!!showItem} >\n    <h1 onClick={() => setShowItem(false)} >[x]</h1>\n    { item.item_type === C.item_types.report && <ReportsShow match={{ params: { slug: item.reportname } }} /> }\n    { item.item_type === C.item_types.gallery && <GalleriesShow match={{ params: { slug: item.slug } }} /> }\n  </Modal>\n}\n\nexport default ItemModal\n","import { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport Modal from \"react-modal\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport config from 'config'\nimport { Breadcrumbs, ItemModal, MapPanel, MapPanelNoZoom, MarkersList } from \"./\"\nimport { logg, request, S, TwofoldContext, ZoomContext } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport { Newsitems } from \"$components/newsitems\"\n\n\nconst _Description = styled.div`\n  // border: 1px solid red;\n\n  padding: 10px;\n`;\nconst Description = ({ item }) => {\n  return <_Description dangerouslySetInnerHTML={{ __html: item.description }} />\n}\n\nconst IframeModal = (props) => {\n  const { showUrl, setShowUrl } = useContext(TwofoldContext)\n\n  return (<Modal ariaHideApp={false} isOpen={!!showUrl} >\n    <span onClick={() => {  setShowUrl(false) }} >[x]</span>\n\n    <iframe height=\"100%\" style={{ width: \"100%\", height: \"100%\" }} scrolling={\"yes\"} src={props.src}\n      frameBorder=\"no\" allowtransparency=\"true\" allowFullScreen={true} >\n    </iframe>\n  </Modal>)\n}\n\nconst Left = styled.div`\n  border: ${p=>p.debug?'1':'0'}px solid blue;\n\n  background: #dedede;\n  flex: 50%;\n  overflow: scroll;\n\n  height: calc(100vh -\n    ${p => p.bottomDrawerOpen ? `calc(${p.bottomDrawerHeight}+3*${p.borderWidth})` : `calc(4*${p.borderWidth})` });\n`;\n\nconst Right = styled.div`\n  border: ${p=>p.debug?'1':'0'}px solid green;\n\n  background: #dedede;\n\n  padding: 1em;\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh -\n    ${p => p.bottomDrawerOpen ? `calc(${p.bottomDrawerHeight}+3*${p.borderWidth})` : `calc(4*${p.borderWidth})` });\n`;\n\nconst Row = styled.div`\n  display: flex;\n  position: relative;\n`;\n\nconst LocationsShow = (props) => {\n  logg(props, 'LocationsShow')\n  const { match } = props;\n\n  const [ loading, setLoading ] = useState(false)\n  const [ location, setLocation ] = useState(null)\n  const {\n    showItem, setShowItem,\n    showUrl, setShowUrl,\n  } = useContext(TwofoldContext)\n\n  const mountedRef = useRef('init')\n\n  useEffect(() => {\n    setLoading(true);\n    const token = localStorage.getItem(\"jwt_token\")\n    request.get(`/api/maps/view/${match.params.slug}`, { params: { jwt_token: token } }).then(res => {\n      if (mountedRef.current === match.params.slug) return null;\n      setLocation(res.data.map)\n      setLoading(false)\n      // @TODO: setFlash here?! If I\"m accessing a gallery I haven't bought access to?\n    }).finally(() => {\n    })\n\n    return () => {\n      mountedRef.current = match.params.slug\n    }\n  }, [ match.params.slug ])\n\n  const { bottomDrawerOpen } = useContext(TwofoldContext)\n\n  return (<Row>\n    <Left className='Left' {...{ bottomDrawerOpen }} {...S} debug={config.debug} >\n      { loading && <i>Loading Left...</i> }\n      { location && <Breadcrumbs {...location} /> }\n      { /* location && <MapPanelNoZoom map={location.map ? location.map : location} /> */ }\n      { location && <MapPanel map={location.map ? location.map : location} /> }\n    </Left>\n    <Right className='Right' {...{ bottomDrawerOpen }} {...S} debug={config.debug} >\n      { loading && <i>Loading Right...</i> }\n      { location && <F>\n        <MarkersList markers={location.map ? location.map.markers : location.markers} />\n        <Description item={location} />\n        { location.newsitems && location.newsitems.length && <Newsitems newsitems={location.newsitems} /> || null }\n      </F> }\n    </Right>\n    { showUrl && <IframeModal src={showUrl} /> }\n    { showItem && <ItemModal item={showItem} /> }\n  </Row>)\n}\n\nexport default LocationsShow\n","import { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { Breadcrumbs, MapPanelNoZoom, MarkersList, } from \"./\"\nimport {\n  C, Collapsible, CollapsibleContext,\n  logg, request, S, TwofoldContext,\n  useWindowSize,\n  ZoomContext } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport { Newsitems } from \"$components/newsitems\"\n\nconst CollapsibleNoMargins = styled(Collapsible)`\n  margin: 0;\n  padding: 0;\n`;\n\nconst _Description = styled.div`\n  // border: 1px solid red;\n\n  padding: 10px;\n`;\nconst Description = ({ item }) => {\n  return <_Description dangerouslySetInnerHTML={{ __html: item.description }} />\n}\n\nconst MapWrapper = styled.div`\n  // border: 1px solid red;\n\n  position: relative;\n`;\n\nconst ZoomCtrlRoot = styled.div`\n  // border: 1px solid orange;\n\n  position: absolute;\n  top: 0;\n  left: calc(100vw - 80px);\n  background: white;\n  padding: 5px;\n\n  display: flex;\n  flex-direction: column;\n  z-index: 10;\n`;\n\nconst ZoomCtrl = (props) => {\n  const { zoom, setZoom } = useContext(TwofoldContext)\n\n  const zoomIn = () => {\n    setZoom(zoom/2)\n  }\n  const zoomOut = () => {\n    setZoom(zoom*2)\n  }\n  const zoomReset = () => {\n    setZoom(1)\n  }\n\n  return <ZoomCtrlRoot >\n    <span onClick={zoomIn} >[+]</span>\n    <span onClick={zoomOut} >[-]</span>\n    <span onClick={zoomReset} >[1]</span>\n  </ZoomCtrlRoot>\n}\n\nconst Div1 = styled.div`\n  // border: 2px solid brown;\n\n  text-align: center;\n  display: block;\n\n  position: relative; /* required for mobile, so that zoomCtrl, etc are inside the collapsible div */\n\n  overflow: scroll;\n  max-height: 80vh; // @TODO: huh?\n`;\n\nconst Root = styled.div`\n  // border: 1px solid yellow;\n\n  margin-top: 2em;\n`;\n\nconst LocationsShowMobile = (props) => {\n  logg(props, 'LocationsShowMobile')\n\n  const { match } = props\n\n  const [loading, setLoading] = useState(false)\n  const [location, setLocation] = useState(null)\n\n  const mountedRef = useRef('init')\n\n  useEffect(() => {\n    setLoading(true);\n    const token = localStorage.getItem(\"jwt_token\");\n    request.get(`/api/maps/view/${match.params.slug}`, { params: { jwt_token: token } }).then(res => {\n      if (!mountedRef.current) { return null }\n\n      setLocation(res.data.map)\n      logg(res.data.map, 'setLocation')\n\n      setLoading(false)\n      // @TODO: setFlash here?! If I\"m accessing a gallery I haven't bought access to?\n    }).finally(() => {\n    })\n\n    return () => {\n      // mountedRef.current = false;\n    }\n  }, [ match.params.slug ])\n\n  // @TODO: this can probably be much improved. Take either markers of location.map, or location itself.\n  const markers = location ? location.markers.length ? location.markers : location.map.markers : null\n\n  return (<Root className='Root' >\n\n    { loading && <i>Loading...</i> }\n    { location && <Breadcrumbs {...location} /> }\n    { location && <CollapsibleNoMargins slug=\"map-sec\" label={location.labels.map} className=\"CollapsibleNoMargins\" >\n      { location && <MapPanelNoZoom map={location.map || location} /> }\n    </CollapsibleNoMargins> }\n    { /* @TODO: recursively render map (not location) as appropriate all around in these collapsibles. */ }\n    { markers && markers.length && <Collapsible slug=\"markers-sec\" label={location.labels.marker} >\n      <MarkersList markers={markers} />\n    </Collapsible> || null }\n    { location && location.description && <Collapsible config={location.config.description} slug={C.collapsible.descr} label={location.labels.description} >\n      <Description item={location} />\n    </Collapsible> || null }\n    { location && location.newsitems.length && <Collapsible slug=\"news-sec\" label={location.labels.newsitems} >\n      <Newsitems newsitems={location.newsitems} />\n    </Collapsible> || null }\n\n  </Root>)\n}\n\nexport default LocationsShowMobile\n\n\n\n\n\n\n\n\n\n/* This is now in file MapPanel.jsx */\n/* const Map2 = (props) => {\n  logg(props, 'Map2')\n  const { location } = props\n\n  const { zoom, setZoom } = useContext(TwofoldContext)\n\n  const div1Ref = useRef(null)\n  const history = useHistory()\n\n  useEffect(() => {\n    div1Ref.current.scrollIntoView({ block: 'end' })\n  }, [])\n\n  const markers = []\n  props.location.markers.map((m, idx) => {\n    const out = <div\n      key={idx}\n      onClick={() => history.push(`/en/locations/show/${m.slug}`) }\n      style={{\n        position: 'absolute',\n        top: m.y/zoom,\n        left: m.x/zoom,\n      }} ><img src={m.img_path} style={{\n        display: 'block',\n        maxWidth: `${m.w/zoom}px`,\n        maxHeight: `${m.h/zoom}px`,\n        width: 'auto', height: 'auto',\n      }} /></div>\n    markers.push(out)\n  })\n\n  return (<MapWrapper className=\"MapWrapper\" >\n    <ZoomCtrl />\n    <Div1 ref={div1Ref} >\n      <Div3 style={{\n          // border: '2px solid cyan',\n\n          display: 'inline-block',\n          position: 'relative',\n          width: `${location.w/zoom}px`,\n          height: `${location.h/zoom}px`,\n      }} >\n        <img\n          src={location.img_path}\n          style={{\n            width: `${location.w/zoom}px`,\n            height: `${location.h/zoom}px`,\n          }}\n        />\n        { markers }\n      </Div3>\n    </Div1>\n  </MapWrapper>)\n} */\n","import { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { Breadcrumbs } from \"./\"\nimport {\n  C, Collapsible, CollapsibleContext,\n  logg, request, S, TwofoldContext,\n  useWindowSize,\n  ZoomContext } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport { Newsitems } from \"$components/newsitems\"\n\n\nconst Div3 = styled.div``;\n\n/* @TOO: merge this into MapPanel, have zoom={false} as a prop */\nconst MapWrapperNoZoom = styled.div`\n  // border: 1px solid green;\n\n  scroll: none;\n`;\n\nconst MapNoZoom = (props) => {\n  logg(props, 'Map2')\n  const { map } = props\n\n  const history = useHistory()\n  const [windowWidth, windowHeight] = useWindowSize()\n\n  const ref = useRef(null)\n\n  const { zoom, setZoom } = useContext(TwofoldContext)\n\n  useEffect(() => {\n    // console.log('width', ref.current ? ref.current.offsetWidth : 0);\n    if (ref.current) {\n      setZoom(map.w/ref.current.offsetWidth)\n    }\n  }, [ref.current, windowWidth])\n\n\n  const markers = []\n  props.map.markers.map((m, idx) => {\n    const out = <div\n      key={idx}\n      onClick={() => history.push(`/en/locations/show/${m.slug}`) }\n      style={{\n        position: 'absolute',\n        top: m.y/zoom,\n        left: m.x/zoom,\n      }} ><img src={m.img_path} style={{\n        display: 'block',\n        maxWidth: `${m.w/zoom}px`,\n        maxHeight: `${m.h/zoom}px`,\n        width: 'auto', height: 'auto',\n      }} /></div>\n    markers.push(out)\n  })\n\n  return (<MapWrapperNoZoom className=\"MapWrapperNoZoom\" ref={ref} >\n\n      <Div3 style={{\n          // border: '2px solid cyan',\n\n          display: 'inline-block',\n          position: 'relative',\n      }} >\n        <img\n          src={map.img_path}\n          style={{\n            width: `${map.w/zoom}px`,\n            height: `${map.h/zoom}px`,\n          }}\n        />\n        { markers }\n      </Div3>\n\n  </MapWrapperNoZoom>)\n}\n\nexport default MapNoZoom\n","import React, { useContext, useEffect, useRef } from 'react'\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport config from 'config'\nimport { logg, S, TwofoldContext } from \"$shared\"\n\nconst Div1 = styled.div`\n  // border: 3px solid green;\n\n  text-align: center;\n  display: block;\n\n  position: relative;\n  overflow: auto;\n\n  height: calc(100vh - ${p => p.breadcrumbsHeight} -\n    ${p => p.bottomDrawerOpen ?\n      `${p.bottomDrawerHeight} - 2*${p.borderWidth}`\n      : `4*${p.borderWidth}` }); /* @TODO: it's not really 4 borders, it's 1 on top, and 2 but thick (collapsed) on bottom. */\n\n`;\n\nconst Div3 = styled.div`\n  // border: 2px solid cyan;\n\n  display: inline-block;\n  position: relative;\n\n`;\n\nconst Root = styled.div`\n  border: ${p=>p.debug?'1':'0'}px solid red;\n\n  position: relative;\n  overflow: auto;\n  height: calc(100vh - ${p => p.breadcrumbsHeight} -\n    ${p => p.bottomDrawerOpen ?\n      `${p.bottomDrawerHeight} - 2*${p.borderWidth}`\n      : `4*${p.borderWidth}` }); /* @TODO: it's not really 4 borders, it's 1 on top, and 2 but thick (collapsed) on bottom. */\n`;\n\nconst ZoomCtrl = (props) => {\n  const { zoom, setZoom } = useContext(TwofoldContext)\n\n  const zoomIn = () => {\n    setZoom(zoom/2)\n  }\n  const zoomOut = () => {\n    setZoom(zoom*2)\n  }\n  const zoomReset = () => {\n    setZoom(1)\n  }\n\n  return <div style={{\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    zIndex: 1,\n    background: 'white',\n    padding: '5px',\n\n    display: 'flex',\n    flexDirection: 'column',\n  }} >\n    <span onClick={zoomIn} >[+]</span>\n    <span onClick={zoomOut} >[-]</span>\n    <span onClick={zoomReset} >[1]</span>\n  </div>\n}\n\nconst MapPanel = (props) => {\n  // logg(props, 'MapPanel')\n  const { map } = props\n\n  const {\n    bottomDrawerOpen, setBottomDrawerOpen,\n    showUrl, setShowUrl,\n    zoom, setZoom,\n  } = useContext(TwofoldContext)\n\n  const div1Ref = useRef(null)\n  logg(div1Ref, 'div1Ref')\n\n  const history = useHistory()\n\n  useEffect(() => {\n    // div1Ref.current.scrollIntoView({ block: 'end', inline: 'center' })\n    div1Ref.current.scroll({\n      top: 200,\n      left: 200,\n      behavior: 'smooth',\n     })\n  }, [])\n\n  const markers = []\n  map.markers.map((m, idx) => {\n    const out = <div\n      key={idx}\n      onClick={() => m.url ? setShowUrl(m.url) : history.push(`/en/locations/show/${m.slug}`) }\n      style={{\n        position: 'absolute',\n        top: zoom > 1 ? ((m.y- m.centerOffsetY )/zoom) : ((m.y )/zoom- m.centerOffsetY),\n        left: zoom > 1 ? ((m.x- m.centerOffsetX )/zoom) : ((m.x )/zoom- m.centerOffsetX),\n      }} ><img src={m.img_path} style={{\n        display: 'block',\n        maxWidth: `${m.w/zoom}px`,\n        maxHeight: `${m.h/zoom}px`,\n        width: 'auto', height: 'auto',\n      }} /></div>\n    markers.push(out)\n  })\n\n  return <Root {...S} {...{ bottomDrawerOpen }} debug={config.debug} className='MapPanel' >\n    <ZoomCtrl />\n\n    <Div1 {...S} {...{ bottomDrawerOpen }} >\n      <Div3 ref={div1Ref} style={{\n        width: `${map.w/zoom}px`,\n        height: `${map.h/zoom}px`,\n      }} >\n        <img\n          src={map.img_path}\n          style={{\n            width: `${map.w/zoom}px`,\n            height: `${map.h/zoom}px`,\n          }}\n        />\n        { markers }\n      </Div3>\n    </Div1>\n\n  </Root>\n}\n\nexport default MapPanel\n","\nimport { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport Modal from \"react-modal\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { logg, request, S, TwofoldContext, ZoomContext } from \"$shared\"\nimport { Metaline } from \"$components/application\"\nimport { Newsitems } from \"$components/newsitems\"\n\nconst Marker = styled.div`\n  margin: 10px;\n  max-width: 20vw;\n`;\n\nconst MarkersList = (props) => {\n  logg(props, 'MarkersList')\n\n  const history = useHistory()\n  const { showUrl, setShowUrl } = useContext(TwofoldContext)\n\n  const goto = (m) => {\n    if (m.url) {\n      setShowUrl(m.url)\n    }\n    else {\n      history.push(`/en/locations/show/${m.slug}`)\n    }\n  }\n\n  const out = []\n  props.markers.map((m, idx) => {\n    out.push(<Marker key={idx}\n      onClick={() => goto(m) }\n    >\n      <img src={m.title_img_path} /><br />\n      {m.name}\n    </Marker>)\n  })\n  return <div style={{ display: 'flex', flexWrap: 'wrap' }} >{out}</div>\n}\n\nexport default MarkersList\n","\nimport PropTypes from 'prop-types'\nimport { Grid } from '@material-ui/core'\nimport React, { Fragment as F, useEffect, useRef, useState } from \"react\"\nimport styled from 'styled-components'\n\nimport { C, logg, useApi, } from \"$shared\"\n\nconst Label = styled.div``;\n\nconst Features = ({ features, label, ...props }) => {\n  logg(props, 'Features')\n\n  const out = []\n  features.map((f) => {\n    if (f.inner_html) {\n      out.push(<Grid item sm={3} dangerouslySetInnerHTML={{ __html: f.inner_html }} />)\n    }\n  })\n\n  return <F>\n    {label && <Label>{label}</Label>}\n    <Grid style={{ marginBottom: '1em' }} container spacing={2}>\n      { out }\n    </Grid>\n  </F>\n}\n\nFeatures.propTypes = {\n  features: PropTypes.arrayOf(PropTypes.shape({\n    inner_html: PropTypes.string,\n  }) ),\n  label: PropTypes.string,\n}\nexport default Features","import { IonPage, IonLoading, IonContent } from '@ionic/react'\nimport React, { Fragment as F, useEffect, useRef, useState } from \"react\"\nimport styled from 'styled-components'\n\nimport { C, logg, useApi, } from \"$shared\"\nimport { Features } from \"./\"\nimport {\n  BottomDrawer,\n  MainHeader, Menu, MenuBottom, MenuLeft,\n  UnlockModal\n} from \"$components/application\"\nimport { Newsitems } from \"$components/newsitems\"\n\nconst _Hero = styled.div`\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n`\nconst Hero = () => <_Hero><img className=\"image\" src=\"/assets/hero.png\" /></_Hero>\n\nconst Root = styled.div`\n  margin: 0;\n  padding-bottom: 1em;\n`\n\nconst SitesShow = (props) => {\n  logg(props, 'SitesShow')\n\n  let [ site, setSite ] = useState({ features: [], newsitems: [] })\n  let [ loading, setLoading ] = useState(false)\n\n  const api = useApi()\n  const mountedRef = useRef('init')\n\n  useEffect(() => {\n    api.applicationHome().then(data => {\n      if (!mountedRef.current) { return null }\n      logg(data, 'setSite')\n      setSite(data)\n      setLoading(false)\n    })\n    return () => { mountedRef.current = false }\n  }, [])\n\n  return <F>\n    <Root>\n      { /* <Hero /> */ }\n      <MainHeader />\n\n      <Features features={site.features} />\n      <Newsitems newsitems={site.newsitems} />\n    </Root>\n    <IonLoading\n      isOpen={loading}\n      onDidDismiss={() => setLoading(false)}\n      message={'Please wait...'}\n      duration={5000}\n    />\n  </F>\n}\n\nexport default SitesShow\n","import { IonPage, IonLoading, IonContent } from '@ionic/react'\nimport React, { Fragment as F, useEffect, useRef, useState } from \"react\"\nimport styled from 'styled-components'\n\nimport { C, logg, useApi, } from \"$shared\"\nimport { Features } from \"./\"\nimport {\n  BottomDrawer,\n  MainHeader, Menu, MenuBottom, MenuLeft,\n  UnlockModal\n} from \"$components/application\"\nimport { Newsitems } from \"$components/newsitems\"\n\nconst _Hero = styled.div`\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n`\nconst Hero = () => <_Hero><img className=\"image\" src=\"/assets/hero.png\" /></_Hero>\n\nconst Root = styled.div`\n  margin: 0;\n  padding-bottom: 1em;\n`\n\n// Currently a homepage, like a wp page.\nconst SitesShow1 = (props) => {\n  logg(props, 'SitesShow')\n\n  let [ site, setSite ] = useState({ features: [], newsitems: [] })\n  let [ artTag, setArtTag ] = useState({ features: [] })\n  let [ homeRow1Tag, setHomeRow1Tag ] = useState({ features: [] })\n  let [ interestingLocationsTag, setInterestingLocationsTag ] = useState({ features: [] })\n  let [ loading, setLoading ] = useState(false)\n\n\n  const api = useApi()\n  const mountedRef = useRef('init')\n\n  // loads all data\n  useEffect(() => {\n    // setLoading(true)\n\n    api.applicationHome().then(data => {\n      if (!mountedRef.current) { return null }\n      logg(data, 'setSite')\n      setSite(data)\n      // setLoading(false)\n    })\n\n    api.getTag({ slug: 'interesting-locations' }).then(data => {\n      if (!mountedRef.current) { return null }\n      logg(data, 'setInterestingLocations')\n      setInterestingLocationsTag(data)\n      // setLoading(false)\n    })\n\n    api.getTag({ slug: 'home-row-1' }).then(data => {\n      if (!mountedRef.current) { return null }\n      setHomeRow1Tag(data)\n    })\n\n    api.getTag({ slug: 'art' }).then(data => {\n      if (!mountedRef.current) { return null }\n      setArtTag(data)\n    })\n\n    return () => { mountedRef.current = false }\n  }, [])\n\n  return <F>\n    <Root>\n\n      <MainHeader />\n      { /* <Hero /> */ }\n\n      <Features features={interestingLocationsTag.features} label=\"Interesting Locations\" />\n      <Features features={homeRow1Tag.features} label=\"Interesting Tags\" />\n      <Features features={artTag.features} label=\"art\" />\n      <Newsitems newsitems={site.newsitems} />\n    </Root>\n    <IonLoading\n      isOpen={loading}\n      onDidDismiss={() => setLoading(false)}\n      message={'Please wait...'}\n      duration={5000}\n    />\n  </F>\n}\n\nexport default SitesShow1\n","import { IonPage, IonContent, IonIcon, IonLoading } from '@ionic/react';\nimport { Container, Grid, GridList } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useState } from \"react\";\nimport styled from 'styled-components'\nimport config from \"config\";\n\nimport { useApi, logg, request } from \"$shared\";\n\nconst useStyles = makeStyles((theme) => ({\n\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  redBorder: {\n    border: '1px solid red',\n  },\n  root: {\n    flexGrow: 1,\n    overflow: 'scroll',\n    height: '100vh',\n  },\n\n}));\n\nconst VideoItem = styled.div`\n  border-bottom: 1px solid red;\n`;\n\nconst Video = (props) => {\n  logg(props, 'Video');\n  const api = useApi()\n\n  const { item: video } = props;\n\n  return <VideoItem key={props.idx} >\n    <h5>Video {video.name}</h5>\n    <p>created {video.created_at}</p>\n    <video controls preload=\"metadata\" type=\"video/mp4\" src={video.video_url}\n      style={{ maxWidth: '500px', maxHeight: '90vh' }} ></video>\n  </VideoItem>;\n};\n\nconst Videos = () => {\n  logg(config, 'Videos component');\n  console.log(JSON.stringify(config));\n\n  const [videos, setVideos] = useState([]);\n\n  const jwtToken = localStorage.getItem(\"jwtToken\");\n\n  const classes = useStyles();\n  const api = useApi()\n\n  useEffect(() => {\n    logg('posting...');\n    request.post(api.myVideosPath, { jwtToken: jwtToken }).then(r => r.data\n      ).then(({ videos }) => {\n        logg(videos, 'data')\n        setVideos(videos);\n      })\n  }, []);\n\n  return <Container maxWidth=\"md\">\n    <Grid container className={classes.root} >\n      <Grid item xs={12} >\n        <h2>My Videos</h2>\n      </Grid>\n      <Grid item xs={12}>\n        { videos && videos.map((v, idx) => <Video key={idx} item={v} ></Video> ) }\n      </Grid>\n    </Grid>\n  </Container>;\n\n};\n\nexport default Videos;\n","\n\nimport { Container as _Container, Grid, GridList } from '@material-ui/core'\nimport React, { Fragment as F, useEffect, useRef, useState } from 'react'\nimport {\n  Link, Switch, BrowserRouter as Router, Redirect, Route as _Route, useHistory, withRouter\n} from 'react-router-dom'\nimport { ToastContainer, toast } from 'react-toastify'\n\nimport styled from 'styled-components'\n\nimport '@ionic/react/css/core.css'\nimport '@ionic/react/css/normalize.css'\nimport '@ionic/react/css/structure.css'\nimport '@ionic/react/css/typography.css'\nimport '@ionic/react/css/padding.css'\nimport '@ionic/react/css/float-elements.css'\nimport '@ionic/react/css/text-alignment.css'\nimport '@ionic/react/css/text-transformation.css'\nimport '@ionic/react/css/flex-utils.css'\nimport '@ionic/react/css/display.css'\n\nimport './theme/variables.css'\nimport 'react-toastify/dist/ReactToastify.css'\n\nimport config from \"config\"\nimport {\n  C, CollapsibleContext, Debug, logg, request, TwofoldContext, TwofoldContextProvider , useApi,\n} from \"$shared\"\nimport {\n  BottomDrawer,\n  MainHeader, Menu, MenuBottom, MenuLeft,\n  UnlockModal\n} from \"$components/application\"\nimport MapuiLayout from \"$components/application/MapuiLayout\"\nimport { CitiesList, CitiesShow } from \"$components/cities\"\n// @TODO: MyGalleries doesn't look right...\nimport { GalleriesShow, MyGalleries } from \"$components/galleries\"\nimport { LocationsShow as LocationsShow } from \"$components/locations\"\nimport { ReportsShow } from \"$components/reports\"\n// import { SitesShow } from '$components/sites'\nimport SitesShow from '$components/sites/SitesShow1'\nimport { Account, LoginModal } from \"$components/users\"\nimport { Videos } from \"$components/videos\"\n\nconst Root = styled.div`\n  // border: 1px solid #741741;\n\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n`;\n\n\nconst AppDesktop = (props) => {\n  logg(props, 'AppDesktop')\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  } = props\n\n  const api = useApi()\n\n  const [ layout, setLayout ] = useState(C.layout_onecol)\n\n  const Container = (props) => {\n    switch(layout) {\n      case C.layout_onecol:\n        // main case\n        return <_Container maxWidth=\"md\" {...props} />\n      case C.layout_mapui:\n        return <MapuiLayout {...props} />\n    }\n  }\n\n  const Route = (props) => {\n    useEffect(() => {\n      if (props.layout) {\n        setLayout(props.layout)\n      } else {\n        setLayout(C.layout_onecol)\n      }\n    }, [props.layout])\n\n    return <_Route {...props} />\n  }\n\n  return (<Router>\n    <ToastContainer />\n    <TwofoldContextProvider {...props} {...{ layout, setLayout }} >\n      <Root>\n\n        { /* This no more, if I want it to look like Financial Times */ }\n        { /* layout === C.layout_onecol && <MenuLeft variant={C.variants.floating} /> */ }\n        { /* <MainHeader /> */ }\n\n        <Container >\n          <Switch id=\"main\" main >\n\n            <Redirect exact from=\"/\" to=\"/en\" />\n            <Route exact path=\"/en\" ><SitesShow /></Route>\n\n            <Route exact path=\"/en/account\" component={Account} />\n            <Route exact path=\"/en/account/my/videos\" component={Videos} />\n            <Route exact path=\"/en/account/my/galleries\" component={MyGalleries} />\n\n            <Route exact path=\"/en/cities\"                 component={CitiesList} />\n            <Route       path=\"/en/cities/travel-to/:name\" component={CitiesShow} />\n\n            <Route exact path=\"/en/galleries/show/:slug\" component={GalleriesShow} />\n\n            <Route exact path=\"/en/reports/show/:slug\" component={ReportsShow} />\n\n            <Route exact path=\"/en/locations/show/:slug\" component={LocationsShow} layout={C.layout_mapui} />\n\n          </Switch>\n        </Container>\n      </Root>\n\n      <BottomDrawer />\n      <UnlockModal />\n      <LoginModal />\n\n    </TwofoldContextProvider>\n  </Router>)\n}\n\nexport default AppDesktop\n","import { Container as _Container, Grid, GridList } from '@material-ui/core'\n\nimport React, { Fragment as F, useEffect, useState } from 'react'\nimport Modal from \"react-modal\"\nimport { Link, Switch, BrowserRouter as Router, Redirect, Route as _Route, useHistory, withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport '@ionic/react/css/core.css'\nimport '@ionic/react/css/normalize.css'\nimport '@ionic/react/css/structure.css'\nimport '@ionic/react/css/typography.css'\nimport '@ionic/react/css/padding.css'\nimport '@ionic/react/css/float-elements.css'\nimport '@ionic/react/css/text-alignment.css'\nimport '@ionic/react/css/text-transformation.css'\nimport '@ionic/react/css/flex-utils.css'\nimport '@ionic/react/css/display.css'\nimport './theme/variables.css'\n\nimport config from \"config\"\nimport { BottomDrawer, Menu, MenuBottom, MenuLeft, UnlockModal } from \"$components/application\"\nimport { MapuiMobileLayout } from \"$components/application\"\nimport { CitiesList, CitiesShow } from \"$components/cities\"\nimport { GalleriesShow } from \"$components/galleries\"\nimport { LocationsShowMobile } from \"$components/locations\"\nimport { ReportsShow } from \"$components/reports\"\nimport { SitesShow } from '$components/sites'\nimport { Account, LoginModal } from \"$components/users\"\nimport { Videos } from \"$components/videos\"\nimport { Galleries, MyGalleries } from \"$components/galleries\"\nimport { useApi, C, CollapsibleContextProvider, Debug, logg, request, TwofoldContextProvider } from \"$shared\"\n\nconst Root = styled.div`\n\n\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n`;\n\nconst __Container = styled(_Container)`\n\n  padding: 0;\n  height: 100vh;\n  overflow: scroll;\n`;\n\nconst AppMobile = (props) => {\n  logg(props, 'AppMobile')\n  const { currentUser, setCurrentUser } = props\n\n  const [ layout, setLayout ] = useState(C.layout_onecol)\n  const [ bottomDrawerOpen, setBottomDrawerOpen ] = React.useState(false)\n  const [ itemToUnlock, setItemToUnlock ] = React.useState(false)\n  const [ zoom, setZoom ] = useState(1)\n  const api = useApi()\n\n  const Container = (props) => {\n    switch(layout) {\n      case C.layout_onecol:\n        // main case\n        return <__Container maxWidth=\"md\" {...props} />\n      case C.layout_mapui:\n        return <MapuiMobileLayout {...props} {...{ bottomDrawerOpen, setBottomDrawerOpen }} />\n    }\n  }\n\n  const Route = (props) => {\n    useEffect(() => {\n      if (props.layout) {\n        setLayout(props.layout)\n      } else {\n        setLayout(C.layout_onecol)\n      }\n    }, [props.layout])\n\n    return <_Route {...props} />\n  }\n\n  const doUnlock = async () => {\n    // @TODO: check how many unlocks I have, and offer to purchase more if not enough.\n    const path = api.doUnlock({ kind: 'Report', id: itemToUnlock.report_id });\n    const result = await request.post(`${config.apiOrigin}${path}`);\n    logg(result, 'result of unlocking')\n  };\n\n  return (<Router>\n    <TwofoldContextProvider {...props} {...{ layout, setLayout }} >\n      <CollapsibleContextProvider >\n        { layout === C.layout_onecol && <MenuLeft variant={C.variants.floating} /> }\n        <Root className=\"Root\" >\n          <Container className=\"Container\" >\n            <Switch id=\"main\" main >\n\n              <Redirect exact from=\"/\" to=\"/en\" />\n              <Route exact path=\"/en\" ><SitesShow /></Route>\n\n              <Route exact path=\"/en/account\" component={Account} />\n              <Route exact path=\"/en/account/my/videos\" component={Videos} />\n              <Route exact path=\"/en/account/my/galleries\" component={MyGalleries} />\n\n              <Route exact path=\"/en/cities\"                 component={CitiesList} />\n              <Route       path=\"/en/cities/travel-to/:name\" component={CitiesShow} />\n\n              <Route exact path=\"/en/galleries/show/:slug\" component={GalleriesShow} />\n\n              <Route exact path=\"/en/reports/show/:slug\" component={ReportsShow} />\n\n              <Route exact path=\"/en/locations/show/:slug\" component={LocationsShowMobile} layout={C.layout_mapui} />\n\n            </Switch>\n          </Container>\n        </Root>\n        <BottomDrawer />\n        <UnlockModal />\n        <LoginModal />\n\n      </CollapsibleContextProvider>\n    </TwofoldContextProvider>\n  </Router>)\n}\n\nexport default AppMobile\n","\nimport { Device } from '@capacitor/device'\nimport React, { useContext, useEffect, useRef, useState, } from 'react'\nimport { ThemeProvider } from 'styled-components'\n\nimport config from 'config'\nimport { C, logg, request, S, useApi } from \"$shared\"\nimport AppDesktop from './AppDesktop'\nimport AppMobile from './AppMobile'\n\n/**\n * Choses mobile vs desktop\n */\nconst AppWrapper = (props) => {\n  logg(props, 'AppWrapper')\n  const api = useApi()\n\n\n  const [ currentUser, setCurrentUser ] = useState(false)\n  const [ loginModalOpen, setLoginModalOpen ] = useState(false)\n  const mountedRef = useRef('init')\n  useEffect(() => {\n    const fn = async () => {\n      const jwtToken = localStorage.getItem(C.jwt_token)\n      await request.get(`${config.apiOrigin}${api.myAccount()}?jwt_token=${jwtToken}`).then((r) => {\n        if (!mountedRef.current) { return }\n        setCurrentUser(r.data)\n      }).catch((e) => {\n        logg(e, 'e12')\n        if (e.message === \"Request failed with status code 401\") {\n          if (config.requireLogin || typeof config.requireLogin === 'undefined') {\n            setLoginModalOpen(true)\n          }\n        }\n      })\n    }\n    fn()\n    return () => mountedRef.current = null\n  }, [currentUser]) // @TODO: currentUser here is appropriate?\n\n\n  const [ os, setOs ] = useState(null)\n  // info.operatingSystem === 'ios' || 'android'\n  const fn = async () => {\n    let info = await Device.getInfo()\n    setOs(info.operatingSystem)\n  }\n  fn()\n\n\n  const childProps = {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  }\n\n  if (!os) { return null }\n  return <ThemeProvider theme={S} >\n    { \"ios android\".includes(os) ?\n      <AppMobile {...childProps} />\n      : <AppDesktop {...childProps} /> }\n  </ThemeProvider>\n}\n\nexport default AppWrapper\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppWrapper from './AppWrapper'\nimport * as serviceWorker from './serviceWorker'\nimport {\n  Link, Switch, BrowserRouter as Router, Redirect, Route as _Route, useHistory, withRouter\n} from 'react-router-dom'\n\nReactDOM.render(<AppWrapper />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n\n\n\n"],"sourceRoot":""}