(this.webpackJsonpguyd=this.webpackJsonpguyd||[]).push([[7],{110:function(e,t,n){},132:function(e,t,n){e.exports=n(192)},138:function(e,t,n){var a={"./ion-action-sheet-ios.entry.js":[199,11],"./ion-action-sheet-md.entry.js":[200,12],"./ion-alert-ios.entry.js":[201,13],"./ion-alert-md.entry.js":[202,14],"./ion-app_8-ios.entry.js":[203,15],"./ion-app_8-md.entry.js":[204,16],"./ion-avatar_3-ios.entry.js":[205,33],"./ion-avatar_3-md.entry.js":[206,34],"./ion-back-button-ios.entry.js":[207,35],"./ion-back-button-md.entry.js":[208,36],"./ion-backdrop-ios.entry.js":[209,77],"./ion-backdrop-md.entry.js":[210,78],"./ion-button_2-ios.entry.js":[211,37],"./ion-button_2-md.entry.js":[212,38],"./ion-card_5-ios.entry.js":[213,39],"./ion-card_5-md.entry.js":[214,40],"./ion-checkbox-ios.entry.js":[215,41],"./ion-checkbox-md.entry.js":[216,42],"./ion-chip-ios.entry.js":[217,43],"./ion-chip-md.entry.js":[218,44],"./ion-col_3.entry.js":[219,79],"./ion-datetime_3-ios.entry.js":[220,21],"./ion-datetime_3-md.entry.js":[221,22],"./ion-fab_3-ios.entry.js":[222,45],"./ion-fab_3-md.entry.js":[223,46],"./ion-img.entry.js":[224,80],"./ion-infinite-scroll_2-ios.entry.js":[225,81],"./ion-infinite-scroll_2-md.entry.js":[226,82],"./ion-input-ios.entry.js":[227,47],"./ion-input-md.entry.js":[228,48],"./ion-item-option_3-ios.entry.js":[229,49],"./ion-item-option_3-md.entry.js":[230,50],"./ion-item_8-ios.entry.js":[231,51],"./ion-item_8-md.entry.js":[232,52],"./ion-loading-ios.entry.js":[233,53],"./ion-loading-md.entry.js":[234,54],"./ion-menu_3-ios.entry.js":[235,55],"./ion-menu_3-md.entry.js":[236,56],"./ion-modal-ios.entry.js":[237,17],"./ion-modal-md.entry.js":[238,18],"./ion-nav_2.entry.js":[239,29],"./ion-popover-ios.entry.js":[240,19],"./ion-popover-md.entry.js":[241,20],"./ion-progress-bar-ios.entry.js":[242,57],"./ion-progress-bar-md.entry.js":[243,58],"./ion-radio_2-ios.entry.js":[244,59],"./ion-radio_2-md.entry.js":[245,60],"./ion-range-ios.entry.js":[246,61],"./ion-range-md.entry.js":[247,62],"./ion-refresher_2-ios.entry.js":[248,23],"./ion-refresher_2-md.entry.js":[249,24],"./ion-reorder_2-ios.entry.js":[250,31],"./ion-reorder_2-md.entry.js":[251,32],"./ion-ripple-effect.entry.js":[252,83],"./ion-route_4.entry.js":[253,63],"./ion-searchbar-ios.entry.js":[254,64],"./ion-searchbar-md.entry.js":[255,65],"./ion-segment_2-ios.entry.js":[256,66],"./ion-segment_2-md.entry.js":[257,67],"./ion-select_3-ios.entry.js":[258,68],"./ion-select_3-md.entry.js":[259,69],"./ion-slide_2-ios.entry.js":[260,84],"./ion-slide_2-md.entry.js":[261,85],"./ion-spinner.entry.js":[262,27],"./ion-split-pane-ios.entry.js":[263,86],"./ion-split-pane-md.entry.js":[264,87],"./ion-tab-bar_2-ios.entry.js":[265,70],"./ion-tab-bar_2-md.entry.js":[266,71],"./ion-tab_2.entry.js":[267,30],"./ion-text.entry.js":[268,72],"./ion-textarea-ios.entry.js":[269,73],"./ion-textarea-md.entry.js":[270,74],"./ion-toast-ios.entry.js":[271,75],"./ion-toast-md.entry.js":[272,76],"./ion-toggle-ios.entry.js":[273,25],"./ion-toggle-md.entry.js":[274,26],"./ion-virtual-scroll.entry.js":[275,88]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=138,e.exports=r},140:function(e,t,n){var a={"./ion-icon.entry.js":[277,91]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=140,e.exports=r},151:function(e,t,n){},152:function(e,t,n){},173:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=n(8),s=n(4),l=n(5),m=n(301),u=n(304),d=n(300),p=n(76),f=n.n(p),g=n(302),E=n(303),b=n(16),h=n(26),v=n(3),j=(n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(10)),y=n.n(j),w=n(23),O=n(54),k=(n(153),n(298)),x=n(297),N=n(305),_={apiOrigin:"https://manager.piousbox.com",domain:"tgm.piousbox.com"},S={doUnlock:function(e){var t=e.kind,n=e.id,a=localStorage.getItem("jwt_token");return"/api/payments/unlock?kind=".concat(t,"&id=").concat(n,"&jwt_token=").concat(a)},loginPath:"/api/users/login.json",longTermTokenPath:"/api/users/long_term_token",myAccount:function(){return"/api/my/account"},myVideosPath:"/api/my/videos",paymentsPath:"/api/payments2",reportsGet:function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},n="";return t&&(n="jwt_token=".concat(t.jwt_token)),"".concat(_.apiOrigin,"/api/reports/view/").concat(e,"?").concat(n)},getCities:function(){return P.get("".concat(_.apiOrigin,"/api/cities")).then((function(e){return e.data}))},getCity:function(e){return P.get("".concat(_.apiOrigin,"/api/cities/view/").concat(e))},getSite:function(e){return function(e){var t=localStorage.getItem("jwtToken");return P.get(e,{params:{jwt_token:t}}).then((function(e){return e.data}))}("".concat(_.apiOrigin,"/api/sites/view/").concat(e))}},C={cityPath:function(e){return"/en/cities/travel-to/".concat(e,"/show/newsfeed")}},D=n(115),I={baseURL:_.apiOrigin},P=n.n(D).a.create(I);function T(){var e=Object(s.a)(["\n  height: 100vh;\n\n\n"]);return T=function(){return e},e}function L(){var e=Object(s.a)(["\n"]);return L=function(){return e},e}function F(){var e=Object(s.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  // cursor: pointer;\n\n  display: flex;\n  flex-direction: column;\n"]);return F=function(){return e},e}var M=Object(v.a)(N.a)(F()),W="jwt_token",H="current_user",B="onecol",J="mapui",A=(v.a.div(L()),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(n="string"===typeof n?n:t.replace(/\W/g,"")).length>0&&(window[n]=e),console.log("+++ ".concat(t,":"),e)}),V=10,z=100,R=r.a.createContext({}),U=r.a.createContext({}),G=v.a.div(T()),q=(n(173),O.a.FacebookLogin),Y=["email"],Z=Object(x.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),Q=function(e){var t=Z(),n=Object(a.useState)(""),c=Object(i.a)(n,2),o=c[0],s=c[1],l=Object(a.useState)(""),m=Object(i.a)(l,2),u=m[0],d=m[1],p=function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.login({permissions:Y});case 2:(n=e.sent).accessToken?(A(n.accessToken.token,"Facebook access token"),P.post("".concat(_.apiOrigin).concat(S.longTermTokenPath),{accessToken:n.accessToken.token}).then((function(e){A(e,"microsites3 response"),localStorage.setItem(W,e.data.jwt_token),localStorage.setItem(H,JSON.stringify(e.data))})).catch((function(e){A(e,"Could not post request to ".concat(_.apiOrigin).concat(S.longTermTokenPath))}))):A("canceled");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.post("".concat(_.apiOrigin).concat(S.loginPath),{email:o,password:u}).then((function(e){return e.data})).then((function(e){A(e,"resp"),localStorage.setItem("jwt_token",e.jwt_token),localStorage.setItem("current_user",JSON.stringify(e.current_user))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){localStorage.removeItem(W),localStorage.removeItem(H),A("logged out")},E=localStorage.getItem("current_user")?JSON.parse(localStorage.getItem("current_user")):null;return r.a.createElement(a.Fragment,null,r.a.createElement(k.a,{container:!0,spacing:2,className:t.root},r.a.createElement(k.a,{item:!0,className:t.redBorder,xs:12},r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:6},r.a.createElement("img",{src:"/assets/accounts/default-avatar.png",alt:"profile pic"})),r.a.createElement(k.a,{item:!0,xs:6},!!E&&r.a.createElement(a.Fragment,null,r.a.createElement("h4",null,E.email),r.a.createElement("button",{onClick:g},"Logout"))||r.a.createElement(a.Fragment,null,r.a.createElement("h4",null,"Not logged in"),r.a.createElement("input",{type:"email",value:o,onChange:function(e){return s(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",value:u,onChange:function(e){return d(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:f},"Login"))))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:p},"Login"),r.a.createElement("button",{onClick:g},"Clear Token"),r.a.createElement("ul",null,r.a.createElement(h.b,{to:"/en/account/my/galleries"},"My Galleries"),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return e.history.push("/en/account/my/videos")}},"My Videos")))))},X=n(74),$=n.n(X),K=n(52),ee=n(116);function te(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  background: #dedede;\n"]);return te=function(){return e},e}function ne(){var e=Object(s.a)(["\n  // border: 1px solid red;\n\n  background: white;\n  height: 100px;\n  width: calc(100vw - ","px);\n  padding: 1em;\n  margin-bottom: ","px;\n"]);return ne=function(){return e},e}var ae=Object(ee.a)("pk_test_qr1QPmSpLdBFt1F7itdWJOj3"),re=function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("buttom",null,"do login"))},ce=v.a.div(ne(),(function(e){return 2*e.borderWidth}),(function(e){return e.borderWidth})),oe=v.a.div(te()),ie=function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},n=Object(K.useStripe)(),c=Object(K.useElements)(),o=Object(a.useState)(!1),s=Object(i.a)(o,2),l=s[0],m=s[1],u=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,r,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),A("purchasing..."),n&&c){e.next=4;break}return e.abrupt("return");case 4:return c.getElement(K.CardElement),a=localStorage.getItem("jwt_token"),e.next=8,P.get("".concat(_.apiOrigin).concat(S.paymentsPath,"?jwt_token=").concat(a));case 8:return r=(r=e.sent).data.client_secret,A(r,"client_secret"),e.next=13,n.confirmCardPayment(r,{payment_method:{card:c.getElement(K.CardElement)}});case 13:if(o=e.sent,A(o,"result"),!o.error){e.next=19;break}A(o.error.message,"error message"),e.next=27;break;case 19:if("succeeded"!==o.paymentIntent.status){e.next=26;break}return e.next=22,P.get("".concat(_.apiOrigin).concat(S.myAccount(),"?jwt_token=").concat(a));case 22:i=e.sent,A(i,"ze3response"),e.next=27;break;case 26:A("something else");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=V;return r.a.createElement(oe,null,r.a.createElement(ce,{borderWidth:d},t.email?t.email:r.a.createElement(re,null)," \xa0 [\xa0","number"===typeof t.n_coins?t.n_coins:"?"," stars\xa0]\xa0 \xa0",r.a.createElement("button",{onClick:function(){return m(!0)}},"buy"),r.a.createElement($.a,{isOpen:l,ariaHideApp:!1,style:{width:"500px"}},r.a.createElement("h1",null,"Purchase this",r.a.createElement("span",{onClick:function(){A("clicking..."),m(!1)}},"[x]")),r.a.createElement("form",{onSubmit:u},r.a.createElement(K.CardElement,null),r.a.createElement("button",{type:"submit",disabled:!n},"Pay")))))},se=function(e){return r.a.createElement(K.Elements,{stripe:ae},r.a.createElement(ie,e))};function le(){var e=Object(s.a)(["\n  // border: 1px solid yellow;\n  position: absolute;\n  bottom: -10px;\n  left: 10px;\n"]);return le=function(){return e},e}function me(){var e=Object(s.a)(["\n  // height: 100px;\n  // position: absolute;\n  // bottom: 0;\n"]);return me=function(){return e},e}var ue=v.a.div(me()),de=v.a.div(le()),pe=function(e){var t=e.bottomDrawerOpen,n=e.setBottomDrawerOpen;return r.a.createElement(a.Fragment,null,r.a.createElement(ue,null,r.a.createElement(de,null,r.a.createElement(d.a,{"aria-label":"open drawer",onClick:function(){return n(!0)},edge:"start",className:"menu-btn"},r.a.createElement(f.a,{fontSize:"small",style:{color:"white"}}))),r.a.createElement(be,null)),r.a.createElement(u.a,{anchor:"bottom",elevation:1,open:t,onClose:function(){return n(!1)},BackdropProps:{invisible:!0},variant:"persistent"},r.a.createElement("div",null,r.a.createElement(se,null),r.a.createElement("div",{onClick:function(){return n(!1)},style:{position:"absolute",left:0,bottom:0}},"[X]"))))},fe=n(9),ge=(n(66),[{title:"Homefeed",icon:fe.n,url:"/en"},{title:"Cities",icon:fe.c,url:"/en/cities"},{title:"My Account",icon:fe.o,url:"/en/account"},{title:"Account2",icon:fe.o,url:"/en/account2"},{title:"Login",icon:fe.q}]),Ee=function(){return r.a.createElement(l.i,{contentId:"main",type:"overlay"},r.a.createElement(l.b,null,r.a.createElement(l.l,{color:"primary"},r.a.createElement(l.k,null,"Menu"))),r.a.createElement(l.a,null,r.a.createElement("img",{src:"/assets/hero.png"}),r.a.createElement(l.g,{id:"inbox-list"},ge.map((function(e,t){return r.a.createElement(l.j,{key:t,autoHide:!1},r.a.createElement(l.e,{routerLink:e.url,routerDirection:"none",lines:"none",detail:!1},r.a.createElement(l.c,{slot:"start",ios:e.icon,md:e.icon}),r.a.createElement(l.f,null,e.title)))})))))},be=function(){return r.a.createElement(l.i,{type:"overlay"},r.a.createElement(l.b,null,r.a.createElement(l.l,{color:"primary"},r.a.createElement(l.k,null,"Menu"))),r.a.createElement(l.a,null,r.a.createElement("img",{src:"/assets/hero.png"}),r.a.createElement("h1",null,"what's here?")))};function he(){var e=Object(s.a)(["\n  margin-top: .5em;\n"]);return he=function(){return e},e}var ve=v.a.div(he()),je=Object(b.i)((function(e){A(e,"Metaline");var t=e.created_at,n=e.username,a=e.city,c=e.tags,o=void 0===c?[]:c;return r.a.createElement(ve,null,r.a.createElement("span",{className:"date"}," On ",(t||"").substring(0,10)," "),n&&r.a.createElement(r.a.Fragment,null,"by ",r.a.createElement("span",{className:"user"}," ",n," ")),a&&r.a.createElement(r.a.Fragment,null,"in ",r.a.createElement("span",{className:"city",onClick:function(){e.history.push("/en/cities/travel-to/".concat(a.slug,"/show/newsfeed"))}}," ",a.name," ")),o&&o.map((function(e,t){return r.a.createElement("span",{key:t,className:"tags"},e.name)})))})),ye=function(e){var t=e.rate,n=Object(a.useState)([]),c=Object(i.a)(n,2),o=c[0],s=c[1],m={0:fe.x,1:fe.w,2:fe.v};return Object(a.useEffect)((function(){for(var e=new Array(5).fill(0),n=0;t>0;)e[n]=t<1?1:2,t--,n++;s(e)}),[]),r.a.createElement("span",{className:"rating"},o.map((function(e,t){return r.a.createElement(l.c,{key:t,className:"stars",icon:m[e]})})))};function we(){var e=Object(s.a)(["\n  background: white;\n\n  overflow: hidden;\n  margin: 10px;\n  height: calc(100vh - ","px - ",");\n"]);return we=function(){return e},e}var Oe=v.a.div(we(),(function(e){return 2*e.borderWidth}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth/2,"px"):"0px"})),ke=function(e){return r.a.createElement(Oe,Object.assign({},e,{bottomDrawerHeight:100,borderWidth:20}))},xe=(n(110),function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)([]),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(a.useState)(!1),f=Object(i.a)(p,2),g=f[0],E=f[1];return Object(a.useEffect)((function(){E(!0),S.getCities().then((function(e){E(!1),d(e),o(e)}))}),[]),r.a.createElement(a.Fragment,null,r.a.createElement(G,{className:"cities"},r.a.createElement("h1",{className:"heading"},"Cities"),r.a.createElement(h.b,{to:"/en/account"},"Account"),r.a.createElement("div",{className:"filter-section"},r.a.createElement("input",{className:"filter-input",onChange:function(e){var t=c.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.trim().toLowerCase())>-1}));d(t)}}),r.a.createElement(l.c,{className:"filter-icon",icon:fe.j})),r.a.createElement("div",{className:"bookmark-section"},r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",onChange:function(){},checked:!0}),r.a.createElement("span",{className:"slider round"})),r.a.createElement("span",{className:"bookmark-text"},"Show only bookmarked")),r.a.createElement("div",{className:"container"},u.map((function(e,t){return r.a.createElement("div",{key:t,className:"cities"},r.a.createElement("div",{className:"img-section"},r.a.createElement("span",{className:"bookmark"},r.a.createElement(l.c,{className:"bookmark-icon",icon:fe.b})),r.a.createElement("img",{className:"city-img",src:e.photo}),r.a.createElement(h.b,{to:C.cityPath(e.slug)},r.a.createElement("span",{className:"city-title"},e.name))),r.a.createElement("div",{className:"content-section"},r.a.createElement("div",{className:"content-item"},r.a.createElement(l.c,{className:"icon",icon:fe.n}),r.a.createElement("span",{className:"count"},e.n_reports)),r.a.createElement("div",{className:"content-item"},r.a.createElement(l.c,{className:"icon",icon:fe.k}),r.a.createElement("span",{className:"count"},e.n_galleries)),r.a.createElement("div",{className:"content-item"},r.a.createElement(l.c,{className:"icon",icon:fe.y}),r.a.createElement("span",{className:"count"},e.n_videos))))}))),"\xa0"),r.a.createElement(l.h,{isOpen:g,onDidDismiss:function(){return E(!1)},message:"Please wait...",duration:5e3}))}),Ne=n(121);n(67);function _e(){var e=Object(s.a)([""]);return _e=function(){return e},e}function Se(){var e=Object(s.a)(["\n  position: absolute;\n  left: 200px;\n  top: 0;\n"]);return Se=function(){return e},e}function Ce(){var e=Object(s.a)(["\n  width: 200px;\n"]);return Ce=function(){return e},e}function De(){var e=Object(s.a)(["\n  position: relative;\n"]);return De=function(){return e},e}function Ie(){var e=Object(s.a)(["\n"]);return Ie=function(){return e},e}function Pe(){var e=Object(s.a)(["\n  position: relative;\n  padding-top: 100%;\n  overflow: hidden;\n  z-index: 10;\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n\n  width: 100px;\n  height: 100px;\n"]);return Pe=function(){return e},e}function Te(){var e=Object(s.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: pointer;\n"]);return Te=function(){return e},e}var Le=Object(v.a)(N.a)(Te()),Fe=(v.a.div(Pe()),v.a.div(Ie()),v.a.div(De())),Me=v.a.img(Ce()),We=v.a.img(Se()),He=v.a.img(_e()),Be=function(e){var t=e.gallery,n=Object(b.g)(),a=function(){n.push("/en/galleries/show/".concat(t.slug))};return r.a.createElement(Le,{boxShadow:2,onClick:a},r.a.createElement(Fe,null,!1,t.photos[0]&&r.a.createElement(Me,{src:t.photos[0].thumb_url}),t.photos[1]&&r.a.createElement(We,{src:t.photos[1].thumb_url}),t.photos[2]&&r.a.createElement(He,{src:t.photos[2].thumb_url}),!1),r.a.createElement("div",null,r.a.createElement("p",{className:"title routable",onClick:a},r.a.createElement("img",{className:"icon",src:"/assets/newsfeed/photos_icon.png",alt:""}),r.a.createElement("span",{className:"title-heading"},t.name)),r.a.createElement(je,{item:t}),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}})))};function Je(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0 1em;\n"]);return Je=function(){return e},e}function Ae(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Ae=function(){return e},e}var Ve=function(e){if(e.isPurchased)return r.a.createElement("img",{className:"icon",src:"/assets/icons/glasses.png",alt:""});if(e.premiumTier>0)return r.a.createElement("img",{className:"icon",src:"/assets/icons/gem.png",alt:""});switch(e.kind){case"Report":return r.a.createElement("img",{className:"icon",src:"/assets/icons/report.png",alt:""});default:return"unknown kind"}},ze=v.a.div(Ae()),Re=v.a.div(Je()),Ue=function(e){var t=e.newsitem,n=t.reportname,c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1],m=Object(b.g)(),u=function(){var e=Object(w.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.doUnlock({kind:"Report",id:t.report_id}),e.next=3,P.post("".concat(_.apiOrigin).concat(n));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(tt,{onClick:function(){t.is_premium&&!t.is_purchased?l(!0):m.push("/en/reports/show/".concat(n))}},r.a.createElement(ze,null,r.a.createElement(Ve,{kind:"Report",isPurchased:t.is_purchased,premiumTier:t.premium_tier}),r.a.createElement(Re,null,r.a.createElement("h2",{className:"title-heading"},t.name),r.a.createElement(je,t))),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}}),r.a.createElement($.a,{ariaHideApp:!1,isOpen:s},r.a.createElement("h1",null,"Unlock this report (1 unlock)? ",r.a.createElement("button",{onClick:function(){return l(!1)}},"[x]")),r.a.createElement("button",{onClick:u},"Do it")))};function Ge(){var e=Object(s.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n"]);return Ge=function(){return e},e}var qe=Object(v.a)(N.a)(Ge()),Ye=function(e){var t=e.data,n=e.icon,a=void 0===n?"/assets/newsfeed/video_icon.svg":n;return r.a.createElement(qe,{boxShadow:2},r.a.createElement("div",{className:"image-section"},t.youtube_id?r.a.createElement("iframe",{className:"iframe",width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(t.youtube_id),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):r.a.createElement("video",{width:"100%",preload:"metadata",height:"auto",controls:!0},r.a.createElement("source",{src:t.url,type:"video/mp4"}))),r.a.createElement("div",null,r.a.createElement("p",{className:"title"},r.a.createElement("img",{className:"icon",src:a}),r.a.createElement("span",{className:"title-heading"},t.name)),r.a.createElement(je,{item:t}),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}})))};function Ze(){var e=Object(s.a)(["\n  margin-bottom: 2em;\n"]);return Ze=function(){return e},e}var Qe={1:"/assets/newsfeed/sunglass.png",2:"/assets/newsfeed/gem_premium.png"},Xe=v.a.div(Ze()),$e=function(e){var t=e.newsitems;return t&&t.length?r.a.createElement(Xe,null,t.map((function(e,t){var n=e.premium_tier||0,a=Qe[n];return r.a.createElement("div",{key:t,className:"items premium-".concat(n)},"gallery"===e.item_type&&r.a.createElement(Be,{gallery:e,icon:a}),"report"===e.item_type&&r.a.createElement(Ue,{newsitem:e,icon:a}),"video"===e.item_type&&r.a.createElement(Ye,{data:e,icon:a}))}))):r.a.createElement("div",null,"No Newsitems")};function Ke(){var e=Object(s.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: pointer;\n\n  display: flex;\n  flex-direction: column;\n"]);return Ke=function(){return e},e}var et=Object(v.a)(N.a)(Ke()),tt=function(e){var t=e.children,n=Object(Ne.a)(e,["children"]);return r.a.createElement(et,n,t)},nt=(n(188),function(e){var t=Object(a.useState)(JSON.parse(JSON.stringify(e.data||[]))),n=Object(i.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",{className:"venues-section"},r.a.createElement("div",null,r.a.createElement("div",{className:"filter-section"},r.a.createElement("input",{className:"filter-input",onChange:function(t){var n=e.data.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));o(n)}}),r.a.createElement(l.c,{className:"filter-icon",icon:fe.j}))),r.a.createElement("div",{className:"container"},c.map((function(e,t){return r.a.createElement("div",{key:t,className:"venues"},r.a.createElement("div",{className:"image-section"},r.a.createElement("img",{src:e.photo})),r.a.createElement("div",{className:"info-section"},r.a.createElement("h4",{className:"title"},e.name),r.a.createElement("div",{className:"rating-section"},r.a.createElement(ye,{rate:3.5}),r.a.createElement("span",{className:"reviews"},"5 reviews")),r.a.createElement("div",{className:"tags-section"},e.tags.map((function(e,t){return r.a.createElement("span",{key:t,className:"tags"},e.name)}))),r.a.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.subhead}}),r.a.createElement("p",{className:"address"},"111 N Main St., New York, NY 11223")),r.a.createElement("img",{className:"forward-arrow",src:"/assets/16x16/arrow-right.png"}))}))))}),at=function(e){A(e,"CitiesShow");var t=e.match,n=Object(b.h)(),c=Object(a.useState)(null),o=Object(i.a)(c,2),s=o[0],m=o[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),p=d[0],f=d[1];return Object(a.useEffect)((function(){f(!0),S.getCity(t.params.name).then((function(e){m(e.data.city),f(!1)}))}),[t.params.name]),r.a.createElement(G,null,s&&r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"city-show"},r.a.createElement("header",{style:{backgroundImage:"url(".concat(s.hero_img,"}"),backgroundSize:"contain"}}),r.a.createElement("section",{className:"section-one"},r.a.createElement(l.c,{icon:fe.p,className:"location"}),r.a.createElement("h1",{className:"city-name"},s.name),r.a.createElement("div",{className:"status"},r.a.createElement("div",{className:"status-grid"},r.a.createElement(l.c,{className:"info-icon",icon:fe.n}),r.a.createElement("span",{className:"numbers"},s.n_reports)),r.a.createElement("div",{className:"status-grid"},r.a.createElement(l.c,{className:"info-icon",icon:fe.k}),r.a.createElement("span",{className:"numbers"},s.n_galleries)),r.a.createElement("div",{className:"status-grid mid"},r.a.createElement(l.c,{className:"info-icon",icon:fe.y}),r.a.createElement("span",{className:"numbers "},s.n_videos)))),s.tags&&r.a.createElement("section",{className:"tags-section"},r.a.createElement("span",{className:"btn delete-btn"},r.a.createElement(l.c,{name:"close"}," ")," deselect all"),s.tags.map((function(e,t){return r.a.createElement("span",{className:"btn",key:t},e.name)}))),r.a.createElement("section",{className:"section-three"},r.a.createElement("div",{className:"menu-option",onClick:function(){}},r.a.createElement("img",{src:"/assets/newsfeed-icon.svg",alt:"Newsfeed"}),r.a.createElement("p",{className:"".concat(n.pathname.includes("newsfeed")?"selected":""," menu-item")},"Newsfeed")),r.a.createElement("div",{className:"menu-option",onClick:function(){}},r.a.createElement("img",{src:"/assets/venue-icon.svg",alt:"Venues"}),r.a.createElement("p",{className:"".concat(n.pathname.includes("venues")?"selected":""," menu-item")},"Venues"))),r.a.createElement("section",null,r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"".concat(t.url,"/venues"),render:function(){return r.a.createElement(nt,{data:s.venues})}}),r.a.createElement(b.b,{exact:!0,path:"".concat(t.url,"/newsfeed"),render:function(){return r.a.createElement($e,{newsitems:s.newsitems})}}))))),r.a.createElement(l.h,{isOpen:p,onDidDismiss:function(){return f(!1)},message:"Please wait...",duration:5e3}),"\xa0")},rt=(n(189),function(e){A(e,"GalleriesShow");var t=e.match,n=Object(a.useState)(!1),c=Object(i.a)(n,2),o=(c[0],c[1]),s=Object(a.useState)({}),m=Object(i.a)(s,2),u=m[0],d=m[1];return Object(a.useEffect)((function(){o(!0);var e=localStorage.getItem("jwtToken");P.get("/api/galleries/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){o(!1),d(e.data.gallery)}))}),[]),r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"gallery-show"},r.a.createElement("div",{className:"narrow"},r.a.createElement("h1",{className:"heading"},r.a.createElement("img",{src:"/assets/newsfeed/photos_icon.png"}),r.a.createElement("span",{className:"title"},u.name)),r.a.createElement(je,{item:u}),r.a.createElement("div",{className:"thumbs"},u.photos&&u.photos.map((function(e,t){return r.a.createElement("div",{className:"card",key:t},r.a.createElement("div",{className:"card-inner"},r.a.createElement(l.d,{src:e.thumb_url})))})))),r.a.createElement("div",{className:"full-img-section"},u.photos&&u.photos.map((function(e,t){return r.a.createElement("div",{className:"item",key:t},r.a.createElement("img",{src:e.large_url}))})))))}),ct=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1];return Object(a.useEffect)((function(){d(!0);var e=localStorage.getItem("jwtToken");P.get("/api/my/galleries",{params:{jwt_token:e}}).then((function(e){A(e.data,"MyGalleries data"),o(e.data),d(!1)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.h,{isOpen:u,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3}),c&&c.length&&c.map((function(e){return r.a.createElement(Be,{key:e.id,data:e})})))};n(190);function ot(){var e=Object(s.a)(["\n  display: flex;\n  position: relative;\n"]);return ot=function(){return e},e}function it(){var e=Object(s.a)(["\n  border: 1px solid green;\n\n  padding: 1em;\n\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh - ","px - ","px);\n"]);return it=function(){return e},e}function st(){var e=Object(s.a)(["\n  text-align: center;\n  position: relative;\n"]);return st=function(){return e},e}function lt(){var e=Object(s.a)(["\n  // position: relative;\n"]);return lt=function(){return e},e}function mt(){var e=Object(s.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]);return mt=function(){return e},e}function ut(){var e=Object(s.a)(["\n  // border: 1px solid blue;\n\n  background: #cecece;\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh - 40px - ",");\n"]);return ut=function(){return e},e}var dt=v.a.div(ut(),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth,"px"):"0px"})),pt=v.a.div(mt()),ft=function(e){var t=e.item;return r.a.createElement(pt,{dangerouslySetInnerHTML:{__html:t.description}})},gt=v.a.div(lt()),Et=function(e){var t=Object(a.useContext)(U),n=t.zoom,c=t.setZoom;return r.a.createElement("div",{style:{position:"absolute",top:0,left:"calc(50% - 80px)",zIndex:200,background:"white",padding:"5px"}},r.a.createElement("span",{onClick:function(){c(n/2)}},"[+]"),r.a.createElement("span",{onClick:function(){c(2*n)}},"[-]"),r.a.createElement("span",null,"[reset]"))},bt=v.a.div(st()),ht=function(e){A(e,"Map2");var t=e.location,n=Object(a.useState)(1),c=Object(i.a)(n,2),o=c[0],s=c[1],l=[];return e.location.markers.map((function(e,t){var n=r.a.createElement("div",{key:t,style:{position:"absolute",top:e.y/o,left:e.x/o}},r.a.createElement("img",{src:e.img_path,style:{display:"block",maxWidth:"".concat(e.w/o,"px"),maxHeight:"".concat(e.h/o,"px"),width:"auto",height:"auto"}}));l.push(n)})),r.a.createElement(gt,null,r.a.createElement(U.Provider,{value:{setZoom:s,zoom:o}},r.a.createElement(Et,null),r.a.createElement(bt,null,r.a.createElement("img",{src:t.img_path,style:{display:"block",maxWidth:"".concat(2e3/o,"px"),maxHeight:"".concat(2e3/o,"px"),width:"auto",height:"auto",position:"asbolute",top:0,left:0}}),l)))},vt=function(e){A(e,"Markers");var t=[];return e.markers.map((function(e,n){t.push(r.a.createElement("div",{key:n,style:{margin:"10px"}},r.a.createElement("img",{src:e.title_img_path}),r.a.createElement("br",null),e.name))})),r.a.createElement("div",{style:{display:"flex"}},t)},jt=v.a.div(it(),(function(e){return e.bottomDrawerOpen?e.bottomDrawerHeight:e.borderWidth}),(function(e){return 3*e.borderWidth})),yt=v.a.div(ot()),wt=function(e){A(e,"LocationsShow");var t=e.match,n=Object(a.useState)(!1),c=Object(i.a)(n,2),o=c[0],s=c[1],l=Object(a.useState)(null),m=Object(i.a)(l,2),u=m[0],d=m[1],p=Object(a.useRef)("init");Object(a.useEffect)((function(){s(!0);var e=localStorage.getItem("jwt_token");return P.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(!p.current)return null;d(e.data.map),s(!1)})).finally((function(){})),function(){p.current=!1}}),[]);var f=V,g=z,E=Object(a.useContext)(R).bottomDrawerOpen;return r.a.createElement(yt,null,r.a.createElement(dt,{borderWidth:f,bottomDrawerOpen:E,bottomDrawerHeight:g},o&&r.a.createElement("i",null,"Loading Left..."),u&&r.a.createElement(ht,{location:u})),r.a.createElement(jt,{borderWidth:f,bottomDrawerOpen:E,bottomDrawerHeight:g},o&&r.a.createElement("i",null,"Loading Right..."),u&&r.a.createElement(a.Fragment,null,r.a.createElement(vt,{markers:u.markers}),r.a.createElement(ft,{item:u}),u.newsitems&&r.a.createElement($e,{newsitems:u.newsitems}))))};function Ot(){var e=Object(s.a)(["\n  padding: 2em 0;\n"]);return Ot=function(){return e},e}var kt=v.a.div(Ot()),xt=function(e){A(e,"ReportsShow");var t=Object(a.useState)({}),n=Object(i.a)(t,2),c=n[0],o=n[1],s=(JSON.parse(localStorage.getItem("current_user")),function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A(null,"getting report..."),P.get(S.reportsGet(e.match.params.slug)).then((function(e){return e.data})).then((function(e){A(e,"got report"),o(e.report)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(a.useEffect)((function(){s()}),[]),r.a.createElement(kt,null,r.a.createElement(M,{boxShadow:2},r.a.createElement("h1",null,"Report ",c.name),r.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:c.description}})))};n(191);function Nt(){var e=Object(s.a)(["\n  padding: 0;\n  margin: 0;\n  height: 100vh;\n"]);return Nt=function(){return e},e}function _t(){var e=Object(s.a)(["\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n"]);return _t=function(){return e},e}function St(){var e=Object(s.a)(["\n  overflow: auto;\n"]);return St=function(){return e},e}v.a.div(St());var Ct=v.a.div(_t()),Dt=function(){return r.a.createElement(Ct,null,r.a.createElement("img",{className:"image",src:"/assets/hero.png"}))},It=v.a.div(Nt()),Pt=function(e){A(e,"SitesShow");var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1];return Object(a.useEffect)((function(){d(!0),S.getSite(_.domain).then((function(e){A(e,"data"),o(e.newsitems)})).catch((function(e){A(e,"e1")})).finally((function(){d(!1)}))}),[]),r.a.createElement(a.Fragment,null,r.a.createElement(It,null,r.a.createElement(Dt,null),r.a.createElement($e,{newsitems:c}),"\xa0"),r.a.createElement(l.h,{isOpen:u,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3}))};function Tt(){var e=Object(s.a)(["\n  border-bottom: 1px solid red;\n"]);return Tt=function(){return e},e}var Lt=Object(x.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),Ft=v.a.div(Tt()),Mt=function(e){A(e,"Video");var t=e.item;return r.a.createElement(Ft,{key:e.idx},r.a.createElement("h5",null,"Video ",t.name),r.a.createElement("p",null,"created ",t.created_at),r.a.createElement("video",{controls:!0,preload:"metadata",type:"video/mp4",src:t.video_url,style:{maxWidth:"500px",maxHeight:"90vh"}}))},Wt=function(){A(_,"Videos component"),console.log(JSON.stringify(_));var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=localStorage.getItem("jwtToken"),s=Lt();return Object(a.useEffect)((function(){A("posting..."),P.post(S.myVideosPath,{jwtToken:o}).then((function(e){return e.data})).then((function(e){var t=e.videos;A(t,"data"),c(t)}))}),[]),r.a.createElement(m.a,{maxWidth:"md"},r.a.createElement(k.a,{container:!0,className:s.root},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement("h2",null,"My Videos")),r.a.createElement(k.a,{item:!0,xs:12},n&&n.map((function(e,t){return r.a.createElement(Mt,{key:t,item:e})})))))};function Ht(){var e=Object(s.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  background: white;\n\n  height: 50px;\n"]);return Ht=function(){return e},e}function Bt(){var e=Object(s.a)(["\n  height: 100vh;\n  overflow: scroll;\n"]);return Bt=function(){return e},e}function Jt(){var e=Object(s.a)(["\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]);return Jt=function(){return e},e}var At=v.a.div(Jt()),Vt=Object(v.a)(m.a)(Bt()),zt=v.a.div(Ht()),Rt=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(b.g)();return console.log(o,"history"),r.a.createElement(a.Fragment,null,r.a.createElement(zt,null,r.a.createElement(d.a,{"aria-label":"open drawer",onClick:function(){return c(!0)},edge:"start",className:"menu-btn"},r.a.createElement(f.a,null)),r.a.createElement(Ee,null)),r.a.createElement(u.a,{anchor:"left",open:n,onClose:function(){return c(!1)}},r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(E.a,{button:!0,key:"newsfeed"},r.a.createElement("span",{onClick:function(){c(!1),o.push("/en")}},"Newsfeed")),r.a.createElement(E.a,{button:!0,key:"cities"},r.a.createElement("span",{onClick:function(){c(!1),o.push("/en/cities")}},"Cities")),r.a.createElement(E.a,{button:!0,key:"map 1"},r.a.createElement("span",{onClick:function(){c(!1),o.push("/en/locations/show/map-1")}},"Map 1")),r.a.createElement(E.a,{button:!0,key:"account"},r.a.createElement("span",{onClick:function(){c(!1),o.push("/en/account")}},"Account"))))))},Ut=function(){var e=Object(a.useState)(B),t=Object(i.a)(e,2),n=t[0],c=t[1],o=r.a.useState(!1),s=Object(i.a)(o,2),l=s[0],m=s[1],u=function(e){switch(n){case B:return r.a.createElement(Vt,Object.assign({maxWidth:"md"},e));case J:return r.a.createElement(ke,Object.assign({},e,{bottomDrawerOpen:l,setBottomDrawerOpen:m}))}},d=function(e){return Object(a.useEffect)((function(){e.layout?c(e.layout):c(B)}),[e.layout]),r.a.createElement(b.b,e)};return r.a.createElement(h.a,null,r.a.createElement(Rt,null),r.a.createElement(At,null,r.a.createElement(R.Provider,{value:{bottomDrawerOpen:l,setBottomDrawerOpen:m}},r.a.createElement(u,null,r.a.createElement(b.d,{id:"main",main:!0},r.a.createElement(b.a,{exact:!0,from:"/",to:"/en"}),r.a.createElement(d,{exact:!0,path:"/en"},r.a.createElement(Pt,null)),r.a.createElement(d,{exact:!0,path:"/en/account",component:Q}),r.a.createElement(d,{exact:!0,path:"/en/account/my/videos",component:Wt}),r.a.createElement(d,{exact:!0,path:"/en/account/my/galleries",component:ct}),r.a.createElement(d,{exact:!0,path:"/en/cities",component:xe}),r.a.createElement(d,{path:"/en/cities/travel-to/:name/show",component:at}),r.a.createElement(d,{exact:!0,path:"/en/galleries/show/:slug",component:rt}),r.a.createElement(d,{exact:!0,path:"/en/reports/show/:slug",component:xt}),r.a.createElement(d,{exact:!0,path:"/en/locations/show/:slug",component:wt,layout:J}))))),r.a.createElement(pe,{bottomDrawerOpen:l,setBottomDrawerOpen:m}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,t,n){},67:function(e,t,n){}},[[132,9,10]]]);
//# sourceMappingURL=main.8b94cfb4.chunk.js.map