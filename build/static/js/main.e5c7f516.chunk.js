(this.webpackJsonpguyd=this.webpackJsonpguyd||[]).push([[7],{102:function(e,t,a){},120:function(e,t,a){e.exports=a(178)},126:function(e,t,a){var n={"./ion-action-sheet-ios.entry.js":[184,11],"./ion-action-sheet-md.entry.js":[185,12],"./ion-alert-ios.entry.js":[186,13],"./ion-alert-md.entry.js":[187,14],"./ion-app_8-ios.entry.js":[188,15],"./ion-app_8-md.entry.js":[189,16],"./ion-avatar_3-ios.entry.js":[190,33],"./ion-avatar_3-md.entry.js":[191,34],"./ion-back-button-ios.entry.js":[192,35],"./ion-back-button-md.entry.js":[193,36],"./ion-backdrop-ios.entry.js":[194,77],"./ion-backdrop-md.entry.js":[195,78],"./ion-button_2-ios.entry.js":[196,37],"./ion-button_2-md.entry.js":[197,38],"./ion-card_5-ios.entry.js":[198,39],"./ion-card_5-md.entry.js":[199,40],"./ion-checkbox-ios.entry.js":[200,41],"./ion-checkbox-md.entry.js":[201,42],"./ion-chip-ios.entry.js":[202,43],"./ion-chip-md.entry.js":[203,44],"./ion-col_3.entry.js":[204,79],"./ion-datetime_3-ios.entry.js":[205,21],"./ion-datetime_3-md.entry.js":[206,22],"./ion-fab_3-ios.entry.js":[207,45],"./ion-fab_3-md.entry.js":[208,46],"./ion-img.entry.js":[209,80],"./ion-infinite-scroll_2-ios.entry.js":[210,81],"./ion-infinite-scroll_2-md.entry.js":[211,82],"./ion-input-ios.entry.js":[212,47],"./ion-input-md.entry.js":[213,48],"./ion-item-option_3-ios.entry.js":[214,49],"./ion-item-option_3-md.entry.js":[215,50],"./ion-item_8-ios.entry.js":[216,51],"./ion-item_8-md.entry.js":[217,52],"./ion-loading-ios.entry.js":[218,53],"./ion-loading-md.entry.js":[219,54],"./ion-menu_3-ios.entry.js":[220,55],"./ion-menu_3-md.entry.js":[221,56],"./ion-modal-ios.entry.js":[222,17],"./ion-modal-md.entry.js":[223,18],"./ion-nav_2.entry.js":[224,29],"./ion-popover-ios.entry.js":[225,19],"./ion-popover-md.entry.js":[226,20],"./ion-progress-bar-ios.entry.js":[227,57],"./ion-progress-bar-md.entry.js":[228,58],"./ion-radio_2-ios.entry.js":[229,59],"./ion-radio_2-md.entry.js":[230,60],"./ion-range-ios.entry.js":[231,61],"./ion-range-md.entry.js":[232,62],"./ion-refresher_2-ios.entry.js":[233,23],"./ion-refresher_2-md.entry.js":[234,24],"./ion-reorder_2-ios.entry.js":[235,31],"./ion-reorder_2-md.entry.js":[236,32],"./ion-ripple-effect.entry.js":[237,83],"./ion-route_4.entry.js":[238,63],"./ion-searchbar-ios.entry.js":[239,64],"./ion-searchbar-md.entry.js":[240,65],"./ion-segment_2-ios.entry.js":[241,66],"./ion-segment_2-md.entry.js":[242,67],"./ion-select_3-ios.entry.js":[243,68],"./ion-select_3-md.entry.js":[244,69],"./ion-slide_2-ios.entry.js":[245,84],"./ion-slide_2-md.entry.js":[246,85],"./ion-spinner.entry.js":[247,27],"./ion-split-pane-ios.entry.js":[248,86],"./ion-split-pane-md.entry.js":[249,87],"./ion-tab-bar_2-ios.entry.js":[250,70],"./ion-tab-bar_2-md.entry.js":[251,71],"./ion-tab_2.entry.js":[252,30],"./ion-text.entry.js":[253,72],"./ion-textarea-ios.entry.js":[254,73],"./ion-textarea-md.entry.js":[255,74],"./ion-toast-ios.entry.js":[256,75],"./ion-toast-md.entry.js":[257,76],"./ion-toggle-ios.entry.js":[258,25],"./ion-toggle-md.entry.js":[259,26],"./ion-virtual-scroll.entry.js":[260,88]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=126,e.exports=r},128:function(e,t,a){var n={"./ion-icon.entry.js":[262,91]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=128,e.exports=r},139:function(e,t,a){},140:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},178:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),i=a(8),o=a(3),l=a(288),m=a(294),u=a(291),d=a(112),p=a.n(d),E=a(292),g=a(293),f=a(14),h=a(27),y=(a(129),a(130),a(131),a(132),a(133),a(134),a(135),a(136),a(137),a(138),a(139),a(140),a(6)),v=(a(73),[{title:"Homefeed",icon:y.n,url:"/en"},{title:"Cities",icon:y.c,url:"/en/cities"},{title:"My Account",icon:y.o,url:"/en/account"},{title:"Account2",icon:y.o,url:"/en/account2"},{title:"Login",icon:y.q}]),b=function(){return r.a.createElement(o.i,{contentId:"main",type:"overlay"},r.a.createElement(o.b,null,r.a.createElement(o.m,{color:"primary"},r.a.createElement(o.l,null,"Menu"))),r.a.createElement(o.a,null,r.a.createElement("img",{src:"/assets/hero.png"}),r.a.createElement(o.g,{id:"inbox-list"},v.map((function(e,t){return r.a.createElement(o.j,{key:t,autoHide:!1},r.a.createElement(o.e,{routerLink:e.url,routerDirection:"none",lines:"none",detail:!1},r.a.createElement(o.c,{slot:"start",ios:e.icon,md:e.icon}),r.a.createElement(o.f,null,e.title)))})))))},j=Object(f.i)((function(e){var t=e.created_at,a=e.username,n=e.city,c=e.tags,s=void 0===c?[]:c;return r.a.createElement("p",{className:"metaline"},r.a.createElement("span",{className:"date"}," ",(t||"").substring(0,10)," "),a&&r.a.createElement(r.a.Fragment,null,"by ",r.a.createElement("span",{className:"user"}," ",a," ")),n&&r.a.createElement(r.a.Fragment,null,"in ",r.a.createElement("span",{className:"city",onClick:function(){e.history.push("/en/cities/travel-to/".concat(n.slug,"/show/newsfeed"))}}," ",n.name," ")),s&&s.map((function(e,t){return r.a.createElement("span",{key:t,className:"tags"},e.name)})))})),N=function(e){var t=e.rate,a=Object(n.useState)([]),c=Object(i.a)(a,2),s=c[0],l=c[1],m={0:y.x,1:y.w,2:y.v};return Object(n.useEffect)((function(){for(var e=new Array(5).fill(0),a=0;t>0;)e[a]=t<1?1:2,t--,a++;l(e)}),[]),r.a.createElement("span",{className:"rating"},s.map((function(e,t){return r.a.createElement(o.c,{key:t,className:"stars",icon:m[e]})})))},k={apiOrigin:"https://manager.piousbox.com",domain:"tgm.piousbox.com"},w={doUnlock:function(e){var t=e.kind,a=e.id,n=(e.jwt_token,JSON.parse(localStorage.getItem("current_user"))||{});if(!n)throw"unauthorized";return"/api/payments/unlock?kind=".concat(t,"&id=").concat(a,"&jwt_token=").concat(n.jwt_token)},longTermTokenPath:"/api/users/long_term_token",myAccount:"/api/my/account",myVideosPath:"/api/my/videos",payments2:"/api/payments2",reportsGet:function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},a="";return t&&(a="jwt_token=".concat(t.jwt_token)),"".concat(k.apiOrigin,"/api/reports/view/").concat(e,"?").concat(a)},getCities:function(){return S.get("".concat(k.apiOrigin,"/api/cities")).then((function(e){return e.data}))},getCity:function(e){return S.get("".concat(k.apiOrigin,"/api/cities/view/").concat(e))},getSite:function(e){return function(e){var t=localStorage.getItem("jwtToken");return S.get(e,{params:{jwt_token:t}}).then((function(e){return e.data}))}("".concat(k.apiOrigin,"/api/sites/view/").concat(e))}},_={cityPath:function(e){return"/en/cities/travel-to/".concat(e,"/show/newsfeed")}},O=a(103),x={baseURL:k.apiOrigin},S=a.n(O).a.create(x),C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(a="string"===typeof a?a:t.replace(/\W/g,"")).length>0&&(window[a]=e),console.log("+++ ".concat(t,":"),e)},I=(a(96),function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)([]),m=Object(i.a)(l,2),u=m[0],d=m[1],p=Object(n.useState)(!1),E=Object(i.a)(p,2),g=E[0],f=E[1];return Object(n.useEffect)((function(){f(!0),w.getCities().then((function(e){f(!1),d(e),s(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"wrapper cities"},r.a.createElement("h1",{className:"heading"},"Cities"),r.a.createElement(h.b,{to:"/en/account"},"Account"),r.a.createElement("div",{className:"filter-section"},r.a.createElement("input",{className:"filter-input",onChange:function(e){var t=c.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.trim().toLowerCase())>-1}));d(t)}}),r.a.createElement(o.c,{className:"filter-icon",icon:y.j})),r.a.createElement("div",{className:"bookmark-section"},r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",onChange:function(){},checked:!0}),r.a.createElement("span",{className:"slider round"})),r.a.createElement("span",{className:"bookmark-text"},"Show only bookmarked")),r.a.createElement("div",{className:"container"},u.map((function(e,t){return r.a.createElement("div",{key:t,className:"cities"},r.a.createElement("div",{className:"img-section"},r.a.createElement("span",{className:"bookmark"},r.a.createElement(o.c,{className:"bookmark-icon",icon:y.b})),r.a.createElement("img",{className:"city-img",src:e.photo}),r.a.createElement(h.b,{to:_.cityPath(e.slug)},r.a.createElement("span",{className:"city-title"},e.name))),r.a.createElement("div",{className:"content-section"},r.a.createElement("div",{className:"content-item"},r.a.createElement(o.c,{className:"icon",icon:y.n}),r.a.createElement("span",{className:"count"},e.n_reports)),r.a.createElement("div",{className:"content-item"},r.a.createElement(o.c,{className:"icon",icon:y.k}),r.a.createElement("span",{className:"count"},e.n_galleries)),r.a.createElement("div",{className:"content-item"},r.a.createElement(o.c,{className:"icon",icon:y.y}),r.a.createElement("span",{className:"count"},e.n_videos))))})))),r.a.createElement(o.h,{isOpen:g,onDidDismiss:function(){return f(!1)},message:"Please wait...",duration:5e3}))}),T=(a(59),function(e){C(e,"NewsitemGallery");var t=e.gallery,a=Object(f.g)();return r.a.createElement("div",{className:"newsitems-gallery"},r.a.createElement("div",{className:"image-section"},r.a.createElement("div",{className:"gallery"},(t.photos||[]).slice(0,3).map((function(e,a){return r.a.createElement("div",{className:"grid-item",key:a},r.a.createElement("div",{className:"image-item",style:{backgroundImage:"url(".concat(e.large_url,")")}},t.photos.length>3&&2==a&&r.a.createElement("div",{className:"number"},"+",t.photos.length-3)))})))),r.a.createElement("div",null,r.a.createElement("p",{className:"title routable",onClick:function(e){a.push("/en/galleries/show/".concat(e))}.bind(void 0,t.slug)},r.a.createElement("img",{className:"icon",src:"/assets/newsfeed/photos_icon.png",alt:""}),r.a.createElement("span",{className:"title-heading"},t.name)),r.a.createElement(j,{item:t}),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}})))}),L=a(7),F=a.n(L),P=a(20),D=a(64),M=a.n(D),A=function(e){if(C(e,"ItemIcon"),e.isPurchased)return r.a.createElement("img",{className:"icon",src:"/assets/icons/glasses.png",alt:""});if(e.premiumTier>0)return r.a.createElement("img",{className:"icon",src:"/assets/icons/gem.png",alt:""});switch(e.kind){case"Report":return r.a.createElement("img",{className:"icon",src:"/assets/icons/report.png",alt:""});default:return"unknown kind"}},J=function(e){C(e,"NewsitemReport");var t=e.newsitem,a=t.reportname,c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1],m=Object(f.g)(),u=function(){var e=Object(P.a)(F.a.mark((function e(){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.doUnlock({kind:"Report",id:t.report_id}),e.next=3,S.post("".concat(k.apiOrigin).concat(a));case 3:n=e.sent,C(n,"result");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"newsitems-report"},r.a.createElement("div",null,r.a.createElement("p",{className:"title"},r.a.createElement(A,{kind:"Report",isPurchased:t.is_purchased,premiumTier:t.premium_tier}),r.a.createElement("span",{className:"title-heading",onClick:function(e){t.is_premium&&!t.is_purchased?l(!0):m.push("/en/reports/show/".concat(a))}},t.name)),r.a.createElement(j,{item:t}),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}}))),r.a.createElement(M.a,{ariaHideApp:!1,isOpen:o},r.a.createElement("h1",null,"Unlock this report (1 unlock)? ",r.a.createElement("button",{onClick:function(){return l(!1)}},"[x]")),r.a.createElement("button",{onClick:u},"Do it")))},H=function(e){var t=e.data,a=e.icon,n=void 0===a?"/assets/newsfeed/video_icon.svg":a;return r.a.createElement("div",{className:"newsitems-video"},r.a.createElement("div",{className:"image-section"},t.youtube_id?r.a.createElement("iframe",{className:"iframe",width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(t.youtube_id),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):r.a.createElement("video",{width:"100%",preload:"metadata",height:"auto",controls:!0},r.a.createElement("source",{src:t.url,type:"video/mp4"}))),r.a.createElement("div",null,r.a.createElement("p",{className:"title"},r.a.createElement("img",{className:"icon",src:n}),r.a.createElement("span",{className:"title-heading"},t.name)),r.a.createElement(j,{item:t}),r.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:t.subhead}})))},G={1:"/assets/newsfeed/sunglass.png",2:"/assets/newsfeed/gem_premium.png"},U=function(e){C(e,"Newsitems");var t=e.newsitems;return t?r.a.createElement("div",{className:"newsitems"},t.map((function(e,t){var a=G[e.premium_tier];return r.a.createElement("div",{key:t,className:"items premium-".concat(e.premium_tier||0)},"report"===e.item_type&&r.a.createElement(J,{newsitem:e}),"gallery"===e.item_type&&r.a.createElement(T,{gallery:e,icon:a}),"video"===e.item_type&&r.a.createElement(H,{data:e,icon:a}))}))):r.a.createElement("div",null,"No Newsitems")},V=(a(170),function(e){var t=Object(n.useState)(JSON.parse(JSON.stringify(e.data||[]))),a=Object(i.a)(t,2),c=a[0],s=a[1];return r.a.createElement("div",{className:"venues-section"},r.a.createElement("div",null,r.a.createElement("div",{className:"filter-section"},r.a.createElement("input",{className:"filter-input",onChange:function(t){var a=e.data.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));s(a)}}),r.a.createElement(o.c,{className:"filter-icon",icon:y.j}))),r.a.createElement("div",{className:"container"},c.map((function(e,t){return r.a.createElement("div",{key:t,className:"venues"},r.a.createElement("div",{className:"image-section"},r.a.createElement("img",{src:e.photo})),r.a.createElement("div",{className:"info-section"},r.a.createElement("h4",{className:"title"},e.name),r.a.createElement("div",{className:"rating-section"},r.a.createElement(N,{rate:3.5}),r.a.createElement("span",{className:"reviews"},"5 reviews")),r.a.createElement("div",{className:"tags-section"},e.tags.map((function(e,t){return r.a.createElement("span",{key:t,className:"tags"},e.name)}))),r.a.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.subhead}}),r.a.createElement("p",{className:"address"},"111 N Main St., New York, NY 11223")),r.a.createElement("img",{className:"forward-arrow",src:"/assets/16x16/arrow-right.png"}))}))))}),B=function(e){C(e,"CitiesShow");var t=e.match,a=Object(f.h)(),c=Object(n.useState)(null),s=Object(i.a)(c,2),l=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),p=d[0],E=d[1];return Object(n.useEffect)((function(){E(!0),w.getCity(t.params.name).then((function(e){m(e.data.city),E(!1)}))}),[t.params.name]),r.a.createElement(o.k,null,r.a.createElement(o.a,null,l&&r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"city-show"},r.a.createElement("header",{style:{backgroundImage:"url(".concat(l.hero_img,"}"),backgroundSize:"contain"}}),r.a.createElement("section",{className:"section-one"},r.a.createElement(o.c,{icon:y.p,className:"location"}),r.a.createElement("h1",{className:"city-name"},l.name),r.a.createElement("div",{className:"status"},r.a.createElement("div",{className:"status-grid"},r.a.createElement(o.c,{className:"info-icon",icon:y.n}),r.a.createElement("span",{className:"numbers"},l.n_reports)),r.a.createElement("div",{className:"status-grid"},r.a.createElement(o.c,{className:"info-icon",icon:y.k}),r.a.createElement("span",{className:"numbers"},l.n_galleries)),r.a.createElement("div",{className:"status-grid mid"},r.a.createElement(o.c,{className:"info-icon",icon:y.y}),r.a.createElement("span",{className:"numbers "},l.n_videos)))),l.tags&&r.a.createElement("section",{className:"tags-section"},r.a.createElement("span",{className:"btn delete-btn"},r.a.createElement(o.c,{name:"close"}," ")," deselect all"),l.tags.map((function(e,t){return r.a.createElement("span",{className:"btn",key:t},e.name)}))),r.a.createElement("section",{className:"section-three"},r.a.createElement("div",{className:"menu-option",onClick:function(){}},r.a.createElement("img",{src:"/assets/newsfeed-icon.svg",alt:"Newsfeed"}),r.a.createElement("p",{className:"".concat(a.pathname.includes("newsfeed")?"selected":""," menu-item")},"Newsfeed")),r.a.createElement("div",{className:"menu-option",onClick:function(){}},r.a.createElement("img",{src:"/assets/venue-icon.svg",alt:"Venues"}),r.a.createElement("p",{className:"".concat(a.pathname.includes("venues")?"selected":""," menu-item")},"Venues"))),r.a.createElement("section",null,r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"".concat(t.url,"/venues"),render:function(){return r.a.createElement(V,{data:l.venues})}}),r.a.createElement(f.b,{exact:!0,path:"".concat(t.url,"/newsfeed"),render:function(){return r.a.createElement(U,{newsitems:l.newsitems})}}))))),r.a.createElement(o.h,{isOpen:p,onDidDismiss:function(){return E(!1)},message:"Please wait...",duration:5e3})))},R=(a(171),function(e){C(e,"GalleriesShow");var t=e.match,a=Object(n.useState)(!1),c=Object(i.a)(a,2),s=(c[0],c[1]),l=Object(n.useState)(null),m=Object(i.a)(l,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){s(!0);var e=localStorage.getItem("jwtToken");S.get("/api/galleries/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){s(!1),d(e.data.gallery)}))}),[]),r.a.createElement(o.k,null,r.a.createElement(o.a,null,u&&r.a.createElement("div",{className:"gallery-show"},r.a.createElement("div",{className:"narrow"},r.a.createElement("h1",{className:"heading"},r.a.createElement("img",{src:"/assets/newsfeed/photos_icon.png"}),r.a.createElement("span",{className:"title"},u.name)),r.a.createElement(j,{item:u}),r.a.createElement("div",{className:"thumbs"},u.photos.map((function(e,t){return r.a.createElement("div",{className:"card",key:t},r.a.createElement("div",{className:"card-inner"},r.a.createElement(o.d,{src:e.thumb_url})))})))),r.a.createElement("div",{className:"full-img-section"},u.photos.map((function(e,t){return r.a.createElement("div",{className:"item",key:t},r.a.createElement("img",{src:e.large_url}))}))))))}),W=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),m=Object(i.a)(l,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){d(!0);var e=localStorage.getItem("jwtToken");S.get("/api/my/galleries",{params:{jwt_token:e}}).then((function(e){C(e.data,"MyGalleries data"),s(e.data),d(!1)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(o.h,{isOpen:u,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3}),c&&c.length&&c.map((function(e){return r.a.createElement(T,{key:e.id,data:e})})))},Y=function(e){C(e,"ReportsShow");var t=Object(n.useState)({}),a=Object(i.a)(t,2),c=a[0],s=a[1],o=(JSON.parse(localStorage.getItem("current_user")),function(){var t=Object(P.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C(null,"getting report..."),S.get(w.reportsGet(e.match.params.slug)).then((function(e){return e.data})).then((function(e){C(e,"got report"),s(e.report)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(n.useEffect)((function(){o()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Report ",c.name),r.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:c.description}}))},z=(a(172),function(e){C(e,"SitesShow");var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),m=Object(i.a)(l,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){w.getSite(k.domain).then((function(e){s(e.newsitems)})).catch((function(e){C(e,"e1")}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home wrapper"},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"image",src:"/assets/hero.png"})),r.a.createElement("div",{className:"container"},r.a.createElement(U,{newsitems:c}))),r.a.createElement(o.h,{isOpen:u,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3}))}),q=a(44),K=(a(173),a(290)),$=a(287),Q=(a(102),q.a.FacebookLogin),X=["email"],Z=Object($.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),ee=function(e){C(e,"Account");var t=Z(),a=function(){var e=Object(P.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(t,"doLogin"),e.next=3,Q.login({permissions:X});case 3:(a=e.sent).accessToken?(C(a.accessToken.token,"Facebook access token"),S.post("".concat(k.apiOrigin).concat(w.longTermTokenPath),{accessToken:a.accessToken.token}).then((function(e){C(e,"microsites3 response"),localStorage.setItem("jwtToken",e.data.jwt_token),localStorage.setItem("current_user",JSON.stringify({email:e.data.email,n_unlocks:e.data.n_unlocks,jwt_token:e.data.jwt_token}))}))):C("canceled");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{maxWidth:"md"},r.a.createElement(K.a,{container:!0,spacing:2,className:t.root},r.a.createElement(K.a,{item:!0,className:t.redBorder,xs:12},r.a.createElement(K.a,{container:!0},r.a.createElement(K.a,{item:!0,xs:6},r.a.createElement("img",{src:"/assets/accounts/default-avatar.png",alt:"profile pic"})),r.a.createElement(K.a,{item:!0,xs:6},r.a.createElement("h4",null,"Jamie Kavanaugh 22"),r.a.createElement("img",{src:"/assets/accounts/edit.png",alt:"edit pic"}),r.a.createElement("p",null,"Jamie_kv@gmail.com")))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:a},"Login"),r.a.createElement("button",{onClick:function(){localStorage.removeItem("jwtToken"),localStorage.removeItem("current_user"),C("logged out")}},"Clear Token"),r.a.createElement("ul",null,r.a.createElement(h.b,{to:"/en/account/my/galleries"},"My Galleries"),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return e.history.push("/en/account/my/videos")}},"My Videos"))))))},te=(q.a.FacebookLogin,Object($.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),a(49)),ae=a(105),ne=Object(ae.a)("pk_test_UnB4uh0vErYIishvckNYtF4c"),re=function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},a=Object(te.useStripe)(),c=Object(te.useElements)(),s=Object(n.useState)(!1),o=Object(i.a)(s,2),l=o[0],m=o[1],u=function(){var e=Object(P.a)(F.a.mark((function e(n){var r,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a&&c){e.next=3;break}return e.abrupt("return");case 3:return c.getElement(te.CardElement),e.next=6,S.get("".concat(k.apiOrigin).concat(w.payments2,"?jwt_token=").concat(t.jwt_token));case 6:return r=(r=e.sent).data.client_secret,C(r,"client_secret"),e.next=11,a.confirmCardPayment(r,{payment_method:{card:c.getElement(te.CardElement)}});case 11:if(s=e.sent,C(s,"result"),!s.error){e.next=17;break}C(s.error.message,"error message"),e.next=24;break;case 17:if("succeeded"!==s.paymentIntent.status){e.next=23;break}return e.next=20,S.get("".concat(k.apiOrigin).concat(w.myAccount,"?jwt_token=").concat(t.jwt_token));case 20:e.sent,e.next=24;break;case 23:C("something else");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,t.email,"\xa0 [\xa0","number"===typeof t.n_unlocks?t.n_unlocks:"?"," unlocks\xa0]",r.a.createElement("button",{onClick:function(){return m(!0)}},"buy"),r.a.createElement(M.a,{isOpen:l,ariaHideApp:!1},r.a.createElement("h1",null,"Purchase this",r.a.createElement("span",{onClick:function(){return m(!1)}},"[x]")),r.a.createElement("form",{onSubmit:u},r.a.createElement(te.CardElement,null),r.a.createElement("button",{type:"submit",disabled:!a},"Pay"))))},ce=function(e){return r.a.createElement(te.Elements,{stripe:ne},r.a.createElement(re,e))},se=a(106),ie=a(107);function oe(){var e=Object(se.a)(["\n  border-bottom: 1px solid red;\n"]);return oe=function(){return e},e}var le=Object($.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),me=ie.a.div(oe()),ue=function(e){C(e,"Video");var t=e.item;return r.a.createElement(me,{key:e.idx},r.a.createElement("h5",null,"Video ",t.name),r.a.createElement("p",null,"created ",t.created_at),r.a.createElement("video",{controls:!0,preload:"metadata",type:"video/mp4",src:t.video_url,style:{maxWidth:"500px",maxHeight:"90vh"}}))},de=function(){C(k,"Videos component"),console.log(JSON.stringify(k));var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=localStorage.getItem("jwtToken"),o=le();return Object(n.useEffect)((function(){C("posting..."),S.post(w.myVideosPath,{jwtToken:s}).then((function(e){return e.data})).then((function(e){var t=e.videos;C(t,"data"),c(t)}))}),[]),r.a.createElement(l.a,{maxWidth:"md"},r.a.createElement(K.a,{container:!0,className:o.root},r.a.createElement(K.a,{item:!0,xs:12},r.a.createElement("h2",null,"My Videos")),r.a.createElement(K.a,{item:!0,xs:12},a&&a.map((function(e,t){return r.a.createElement(ue,{key:t,item:e})})))))},pe=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(f.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"z-index-100"},r.a.createElement(u.a,{"aria-label":"open drawer",onClick:function(){return n(!0)},edge:"start",className:"menu-btn"},r.a.createElement(p.a,null)),r.a.createElement(ce,null),r.a.createElement(b,null)),r.a.createElement(m.a,{anchor:"left",open:a,onClose:function(){return n(!1)}},r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(g.a,{button:!0,key:1},r.a.createElement("span",{onClick:function(){n(!1),c.push("/en")}},"Newsfeed")),r.a.createElement(g.a,{button:!0,key:2},r.a.createElement("span",{onClick:function(){n(!1),c.push("/en/cities")}},"Cities")),r.a.createElement(g.a,{button:!0,key:3},r.a.createElement("span",{onClick:function(){n(!1),c.push("/en/account")}},"Account"))))))},Ee=function(){return r.a.createElement(h.a,null,r.a.createElement(pe,null),r.a.createElement(l.a,{maxWidth:"md",style:{maxHeight:"90vh",overflow:"auto"}},r.a.createElement(f.d,{id:"main",main:!0},r.a.createElement(f.a,{exact:!0,from:"/",to:"/en"}),r.a.createElement(f.b,{exact:!0,path:"/en"},r.a.createElement(z,null)),r.a.createElement(f.b,{exact:!0,path:"/en/account",component:ee}),r.a.createElement(f.b,{exact:!0,path:"/en/account/my/videos",component:de}),r.a.createElement(f.b,{exact:!0,path:"/en/account/my/galleries",component:W}),r.a.createElement(f.b,{exact:!0,path:"/en/cities",component:I}),r.a.createElement(f.b,{path:"/en/cities/travel-to/:name/show",component:B}),r.a.createElement(f.b,{exact:!0,path:"/en/galleries/show/:slug",component:R}),r.a.createElement(f.b,{exact:!0,path:"/en/reports/show/:slug",component:Y}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e,t,a){},73:function(e,t,a){},96:function(e,t,a){}},[[120,9,10]]]);
//# sourceMappingURL=main.e5c7f516.chunk.js.map