(this.webpackJsonpguyd=this.webpackJsonpguyd||[]).push([[1],{130:function(e,t,n){},131:function(e,t,n){},155:function(e,t,n){e.exports=n(201)},16:function(e,t){e.exports={apiOrigin:"https://manager.piousbox.com",domain:"tgm.piousbox.com",appIndexPath:"src/index"}},161:function(e,t,n){var a={"./ion-action-sheet.entry.js":[206,5],"./ion-alert.entry.js":[207,6],"./ion-app_8.entry.js":[208,7],"./ion-avatar_3.entry.js":[209,17],"./ion-back-button.entry.js":[210,18],"./ion-backdrop.entry.js":[211,44],"./ion-button_2.entry.js":[212,19],"./ion-card_5.entry.js":[213,20],"./ion-checkbox.entry.js":[214,21],"./ion-chip.entry.js":[215,22],"./ion-col_3.entry.js":[216,45],"./ion-datetime_3.entry.js":[217,10],"./ion-fab_3.entry.js":[218,23],"./ion-img.entry.js":[219,46],"./ion-infinite-scroll_2.entry.js":[220,47],"./ion-input.entry.js":[221,24],"./ion-item-option_3.entry.js":[222,25],"./ion-item_8.entry.js":[223,26],"./ion-loading.entry.js":[224,27],"./ion-menu_3.entry.js":[225,28],"./ion-modal.entry.js":[226,8],"./ion-nav_2.entry.js":[227,14],"./ion-popover.entry.js":[228,9],"./ion-progress-bar.entry.js":[229,29],"./ion-radio_2.entry.js":[230,30],"./ion-range.entry.js":[231,31],"./ion-refresher_2.entry.js":[232,11],"./ion-reorder_2.entry.js":[233,16],"./ion-ripple-effect.entry.js":[234,48],"./ion-route_4.entry.js":[235,32],"./ion-searchbar.entry.js":[236,33],"./ion-segment_2.entry.js":[237,34],"./ion-select_3.entry.js":[238,35],"./ion-slide_2.entry.js":[239,49],"./ion-spinner.entry.js":[240,13],"./ion-split-pane.entry.js":[241,50],"./ion-tab-bar_2.entry.js":[242,36],"./ion-tab_2.entry.js":[243,15],"./ion-text.entry.js":[244,37],"./ion-textarea.entry.js":[245,38],"./ion-toast.entry.js":[246,39],"./ion-toggle.entry.js":[247,12],"./ion-virtual-scroll.entry.js":[248,51]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=161,e.exports=r},163:function(e,t,n){var a={"./ion-icon.entry.js":[249,58]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=163,e.exports=r},197:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){"use strict";n.r(t);var a,r,c,o,l,i,s,u,m,p,d,f,b,g,h,E,v,j,O,y,w,x,k,_,N,C,S,U,D,I,L,M,T,P,W,H,F,A,R,B,z,V,J,G,q,Y,X,Z,K,Q,$,ee,te,ne=n(0),ae=n.n(ne),re=n(18),ce=n.n(re),oe=n(11),le=n(5),ie=n(15),se=n.n(ie),ue=n(146),me=n(16),pe=n.n(me),de=n(25),fe=n(48),be=n(4),ge=n(279),he=n(3),Ee=function(){var e=Object(ne.useContext)(ut),t=(e.currentUser,e.setCurrentUser,localStorage.getItem(rt.jwt_token));return{doUnlock:function(e){var t=e.kind,n=e.id,a=localStorage.getItem("jwt_token");return"/api/payments/unlock?kind=".concat(t,"&id=").concat(n,"&jwt_token=").concat(a)},getMyAccount:function(){var e=localStorage.getItem("jwt_token");return $e.post("/api/my/account",{jwt_token:e})},loginPath:"/api/users/login.json",longTermTokenPath:"/api/users/long_term_token",myAccount:function(){return"/api/my/account"},myVideosPath:"/api/my/videos",paymentsPath:"/api/payments2",reportsGet:function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},n="";return t&&(n="jwt_token=".concat(t.jwt_token)),"".concat(pe.a.apiOrigin,"/api/reports/view/").concat(e,"?").concat(n)},getCities:function(){return $e.get("".concat(pe.a.apiOrigin,"/api/cities")).then((function(e){return e.data}))},getCity:function(e){return $e.get("".concat(pe.a.apiOrigin,"/api/cities/view/").concat(e))},applicationHome:function(){var e=Object(oe.a)(se.a.mark((function e(){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e.get("".concat(pe.a.apiOrigin,"/api/sites/view/").concat(pe.a.domain),{params:{jwt_token:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},ve=(n(33),n(27)),je=n(75),Oe=(n(160),n(84)),ye=(n(107),n(7)),we=n(270),xe=n(20),ke=function(e){it(e,"Account");var t=Object(ne.useContext)(ut),n=t.currentUser;t.setCurrentUser;return ae.a.createElement(ne.Fragment,null,ae.a.createElement(we.a,{container:!0,spacing:2},ae.a.createElement(we.a,{item:!0,xs:12},ae.a.createElement(we.a,{container:!0},ae.a.createElement(we.a,{item:!0,xs:6},ae.a.createElement("img",{src:"/assets/accounts/default-avatar.png",alt:"profile pic"})),ae.a.createElement(we.a,{item:!0,xs:6},!!n&&ae.a.createElement(ne.Fragment,null,ae.a.createElement("h4",null,n.email),ae.a.createElement("ul",null,ae.a.createElement("li",null,ae.a.createElement(xe.b,{to:"/en/account/my/galleries"},"My Galleries")),ae.a.createElement("li",null,ae.a.createElement("a",{onClick:function(){return e.history.push("/en/account/my/videos")}},"My Videos")),ae.a.createElement("li",null,ae.a.createElement(Fe,null))))||ae.a.createElement(ne.Fragment,null,ae.a.createElement("h4",null,"Not logged in"),ae.a.createElement(He,null),ae.a.createElement("br",null),ae.a.createElement("br",null),ae.a.createElement(Ae,null)))))))},_e=n(38),Ne=n.n(_e),Ce=function(e){it(e,"LoginModal");var t=Object(ne.useContext)(ut),n=t.loginModalOpen,a=t.setLoginModalOpen;return ae.a.createElement(Ne.a,{style:{zIndex:3},isOpen:n},ae.a.createElement("h1",null,"Please Login",ae.a.createElement("button",{onClick:function(){return a(!1)}},"[x]")),ae.a.createElement(He,null),ae.a.createElement(Ae,null))},Se=n(53),Ue=n(139),De=Object(Ue.a)("pk_test_qr1QPmSpLdBFt1F7itdWJOj3"),Ie=function(e){return ae.a.createElement(ne.Fragment,null,ae.a.createElement("button",null,"do login"))},Le=he.a.div(a||(a=Object(be.a)(["\n  // border: 1px solid red;\n\n  display: flex;\n  justify-content: flex-start;\n  background: #dedede;\n\n  background: white;\n  height: 100px;\n  width: calc(100vw - ","px);\n  padding: 1em;\n  margin-bottom: ","px;\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.borderWidth})),Me=function(e){var t=Ee(),n=Object(ne.useContext)(ut),a=n.currentUser,r=(n.setCurrentUser,Object(Se.useStripe)()),c=Object(Se.useElements)(),o=Object(ne.useState)(!1),l=Object(le.a)(o,2),i=l[0],s=l[1],u=function(){var e=Object(oe.a)(se.a.mark((function e(n){var a,o,l,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),it("purchasing..."),r&&c){e.next=4;break}return e.abrupt("return");case 4:return c.getElement(Se.CardElement),a=localStorage.getItem("jwt_token"),e.next=8,$e.get("".concat(pe.a.apiOrigin).concat(t.paymentsPath,"?jwt_token=").concat(a));case 8:return o=(o=e.sent).data.client_secret,it(o,"client_secret"),e.next=13,r.confirmCardPayment(o,{payment_method:{card:c.getElement(Se.CardElement)}});case 13:if(l=e.sent,it(l,"result"),!l.error){e.next=19;break}it(l.error.message,"error message"),e.next=27;break;case 19:if("succeeded"!==l.paymentIntent.status){e.next=26;break}return e.next=22,$e.get("".concat(pe.a.apiOrigin).concat(t.myAccount(),"?jwt_token=").concat(a));case 22:i=e.sent,it(i,"ze3response"),e.next=27;break;case 26:it("something else");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=st.borderWidth;return a?ae.a.createElement(Le,{borderWidth:m},a.email?a.email:ae.a.createElement(Ie,null)," \xa0 [\xa0","number"===typeof a.n_unlocks?a.n_unlocks:"?"," coins\xa0]\xa0 \xa0",ae.a.createElement("button",{onClick:function(){return s(!0)}},"buy"),ae.a.createElement(Ne.a,{isOpen:i,ariaHideApp:!1,style:{width:"500px"}},ae.a.createElement("h1",null,"Purchase this",ae.a.createElement("span",{onClick:function(){it("clicking..."),s(!1)}},"[x]")),ae.a.createElement("form",{onSubmit:u},ae.a.createElement(Se.CardElement,null),ae.a.createElement("button",{type:"submit",disabled:!r},"Pay")))):null},Te=function(e){return ae.a.createElement(Se.Elements,{stripe:De},ae.a.createElement(Me,e))},Pe=je.a.FacebookLogin,We=["email"],He=function(e){var t=Ee(),n=Object(ne.useContext)(ut),a=(n.currentUser,n.setCurrentUser),r=function(){var e=Object(oe.a)(se.a.mark((function e(){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.login({permissions:We});case 2:(n=e.sent).accessToken?$e.post("".concat(pe.a.apiOrigin).concat(t.longTermTokenPath),{accessToken:n.accessToken.token}).then((function(e){localStorage.setItem(rt.jwt_token,e.data.jwt_token),localStorage.setItem(rt.current_user,JSON.stringify(e.data)),a(e.data)})).catch((function(e){it(e,"Could not post request to ".concat(pe.a.apiOrigin).concat(t.longTermTokenPath))})):it("canceled");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return ae.a.createElement(at,{onClick:r},"FB Login")},Fe=function(){var e=Object(ne.useContext)(ut),t=(e.currentUser,e.setCurrentUser);return ae.a.createElement(at,{onClick:function(){localStorage.removeItem(rt.jwt_token),localStorage.removeItem(rt.current_user),t(null)}},"Logout")},Ae=function(e){var t=Ee(),n=Object(ne.useContext)(ut),a=(n.currentUser,n.setCurrentUser),r=(n.loginModalOpen,n.setLoginModalOpen),c=Object(ne.useState)(""),o=Object(le.a)(c,2),l=o[0],i=o[1],s=Object(ne.useState)(""),u=Object(le.a)(s,2),m=u[0],p=u[1],d=function(){var e=Object(oe.a)(se.a.mark((function e(n,c){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$e.post("".concat(pe.a.apiOrigin).concat(t.loginPath),{email:n,password:c}).then((function(e){return e.data})).then((function(e){a(e),localStorage.setItem("jwt_token",e.jwt_token),localStorage.setItem("current_user",JSON.stringify(e)),r(!1)})).catch((function(e){it(e,"e322"),Object(Oe.b)("Login failed"),a(null)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return ae.a.createElement(ne.Fragment,null,ae.a.createElement("input",{type:"email",value:l,onChange:function(e){return i(e.target.value)}}),ae.a.createElement("br",null),ae.a.createElement("input",{type:"password",value:m,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&d(l,m)}}),ae.a.createElement("br",null),ae.a.createElement(at,{onClick:function(){return d(l,m)}},"Password Login"))},Re={cityPath:function(e){return"/en/cities/travel-to/".concat(e)}},Be=n(94),ze=["children"],Ve=function(){return ae.a.createElement("span",null,"\xa0>\xa0\xa0")},Je=function(){return ae.a.createElement("span",null,"\xa0<\xa0\xa0")},Ge=he.a.div(r||(r=Object(be.a)(["\n  display: flex;\n"]))),qe=he.a.div(c||(c=Object(be.a)(["\n  background: #dedede;\n  margin: .5em;\n  padding: .5em;\n\n  margin-bottom: 1em;\n"]))),Ye=he.a.div(o||(o=Object(be.a)(["\n  // border: 2px solid red;\n\n  max-height: 100vh;\n"]))),Xe=function(e){var t=e.children,n=Object(fe.a)(e,ze);it(n,"Collapsible");var a=Object(ne.useContext)(ct);if(it(a,"ctx"),!a)return null;var r=a.collapsibles,c=a.setCollapsibles,o=!!r[n.slug];return ae.a.createElement(qe,null,ae.a.createElement(Ge,{onClick:function(){c(Object(Be.a)(Object(Be.a)({},r),{},Object(de.a)({},n.slug,!r[n.slug])))}},o?ae.a.createElement(Je,null):ae.a.createElement(Ve,null)," ",n.label," "),!o&&ae.a.createElement(Ye,null,t))},Ze=n(143),Ke=n.n(Ze),Qe={baseURL:pe.a.apiOrigin},$e=Ke.a.create(Qe),et=["children"],tt=["children"],nt=Object(he.a)(ge.a)(l||(l=Object(be.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ",";\n\n  display: flex;\n  flex-direction: column;\n"])),(function(e){return e.cursor?e.cursor:"auto"})),at=he.a.div(i||(i=Object(be.a)(["\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  padding: .3em 1em;\n  cursor: pointer;\n"]))),rt={collapsible:{descr:"descr-sec"},current_user:"current_user",jwt_token:"jwt_token",item_types:{gallery:"Gallery",report:"Report",video:"Video"},layout_onecol:"onecol",layout_mapui:"mapui",variants:{floating:"floating",inline:"inline"}},ct=ae.a.createContext({}),ot=function(e){var t=e.children,n=Object(fe.a)(e,et);it(n,"CollapsibleContextProvider");var a=Object(ne.useState)(Object(de.a)({},rt.collapsible.descr,!0)),r=Object(le.a)(a,2),c=r[0],o=r[1];return ae.a.createElement(ct.Provider,{value:{collapsibles:c,setCollapsibles:o}},t)},lt=(he.a.div(s||(s=Object(be.a)(["\n"]))),function(e){switch(e){case"Gallery":return"galleries";default:return"".concat(e.toLowerCase(),"s")}}),it=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(n="string"===typeof n?n:t.replace(/\W/g,"")).length>0&&(window[n]=e),console.log("+++ ".concat(t,":"),e)},st={borderWidth:"10px",bottomDrawerHeight:"100px",breadcrumbsHeight:"30px"},ut=ae.a.createContext({}),mt=function(e){var t=e.children,n=Object(fe.a)(e,tt);it(n,"TwofoldContextProvider");var a=n.currentUser,r=n.setCurrentUser,c=n.layout,o=n.setLayout,l=n.loginModalOpen,i=n.setLoginModalOpen,s=Object(ne.useState)(!1),u=Object(le.a)(s,2),m=u[0],p=u[1],d=Object(ne.useState)({}),f=Object(le.a)(d,2),b=f[0],g=f[1],h=Object(ne.useState)(!1),E=Object(le.a)(h,2),v=E[0],j=E[1],O=Object(ne.useState)(!1),y=Object(le.a)(O,2),w=y[0],x=y[1],k=Object(ne.useState)(1),_=Object(le.a)(k,2),N=_[0],C=_[1];return ae.a.createElement(ut.Provider,{value:{bottomDrawerOpen:m,setBottomDrawerOpen:p,currentUser:a,setCurrentUser:r,itemToUnlock:b,setItemToUnlock:function(e){b.id===e.id||l||g(e)},layout:c,setLayout:o,loginModalOpen:l,setLoginModalOpen:i,showItem:v,setShowItem:j,showUrl:w,setShowUrl:x,zoom:N,setZoom:C}},t)},pt=he.a.div(u||(u=Object(be.a)(["\n  height: 100vh;\n"]))),dt=n(277),ft=(n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(278)),bt=n(272),gt=n(85),ht=n.n(gt),Et=he.a.div(m||(m=Object(be.a)(["\n;"]))),vt=he.a.div(p||(p=Object(be.a)(["\n  // border: 1px solid yellow;\n  position: absolute;\n  bottom: -10px;\n  left: 10px;\n"]))),jt=function(e){var t=Object(ne.useContext)(ut),n=t.bottomDrawerOpen,a=t.layout,r=t.setBottomDrawerOpen;return a===rt.layout_onecol?null:ae.a.createElement(ne.Fragment,null,ae.a.createElement(Et,{className:"BottomWrapper"},ae.a.createElement(vt,null,ae.a.createElement(bt.a,{"aria-label":"open drawer",onClick:function(){return r(!0)},edge:"start",className:"menu-btn"},ae.a.createElement(ht.a,{fontSize:"small",style:{color:"white"}}))),ae.a.createElement(xt,null)),ae.a.createElement(ft.a,{anchor:"bottom",className:"Drawer",elevation:1,open:n,onClose:function(){return r(!1)},BackdropProps:{invisible:!0},variant:"persistent"},ae.a.createElement("div",null,ae.a.createElement(Te,null),ae.a.createElement("div",{onClick:function(){return r(!1)},style:{position:"absolute",left:0,bottom:0}},"[X]"))))},Ot=n(12),yt=(n(72),[{title:"Homefeed",icon:Ot.n,url:"/en"},{title:"Cities",icon:Ot.c,url:"/en/cities"},{title:"My Account",icon:Ot.o,url:"/en/account"},{title:"Account2",icon:Ot.o,url:"/en/account2"},{title:"Login",icon:Ot.q}]),wt=function(){return ae.a.createElement(ye.i,{contentId:"main",type:"overlay"},ae.a.createElement(ye.b,null,ae.a.createElement(ye.l,{color:"primary"},ae.a.createElement(ye.k,null,"Menu"))),ae.a.createElement(ye.a,null,ae.a.createElement("img",{src:"/assets/hero.png"}),ae.a.createElement(ye.g,{id:"inbox-list"},yt.map((function(e,t){return ae.a.createElement(ye.j,{key:t,autoHide:!1},ae.a.createElement(ye.e,{routerLink:e.url,routerDirection:"none",lines:"none",detail:!1},ae.a.createElement(ye.c,{slot:"start",ios:e.icon,md:e.icon}),ae.a.createElement(ye.f,null,e.title)))})))))},xt=function(){return ae.a.createElement(ye.i,{type:"overlay"},ae.a.createElement(ye.b,null,ae.a.createElement(ye.l,{color:"primary"},ae.a.createElement(ye.k,null,"Menu"))),ae.a.createElement(ye.a,null,ae.a.createElement("img",{src:"/assets/hero.png"}),ae.a.createElement("h1",null,"what's here?")))},kt=n(273),_t=n(274),Nt=n(275),Ct=["children"],St=he.a.div(d||(d=Object(be.a)(["\n  // border: 1px solid green;\n"]))),Ut=function(e){var t=e.children;return Object(fe.a)(e,Ct).variant===rt.variants.floating?ae.a.createElement(kt.a,{style:{position:"absolute",margin:".5em"},"aria-label":"main menu"},t):ae.a.createElement(St,null,t)},Dt=he.a.div(f||(f=Object(be.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n"]))),It=he.a.div(b||(b=Object(be.a)(["\n"]))),Lt=function(e){it(e,"MenuLeft");var t=ae.a.useState(!1),n=Object(le.a)(t,2),a=n[0],r=n[1],c=Object(ne.useState)(!1),o=Object(le.a)(c,2),l=o[0],i=(o[1],Object(ve.g)()),s=Object(ne.useContext)(ut),u=s.currentUser;s.setCurrentUser;return ae.a.createElement(ne.Fragment,null,ae.a.createElement(Ut,e,ae.a.createElement(bt.a,{onClick:function(){return r(!0)}},ae.a.createElement(ht.a,null)),ae.a.createElement(wt,null)),ae.a.createElement(ft.a,{anchor:"left",open:a,onClose:function(){return r(!1)}},ae.a.createElement(Dt,null,ae.a.createElement(_t.a,null,ae.a.createElement(Nt.a,{button:!0,key:"newsfeed",onClick:function(){r(!1),i.push("/en")}},"Newsfeed"),ae.a.createElement(Nt.a,{button:!0,key:"cities",onClick:function(){r(!1),i.push("/en/cities")}},ae.a.createElement("span",null,"Cities")),u&&u.bookmarks.map((function(e,t){return ae.a.createElement(Nt.a,{button:!0,key:t,onClick:function(){r(!1),i.push("/en/locations/show/".concat(e.slug))}},ae.a.createElement("span",null,e.name))})),ae.a.createElement(Nt.a,{button:!0,key:"account",onClick:function(){r(!1),i.push("/en/account")}},ae.a.createElement("span",null,"Account"))),ae.a.createElement(It,null,l&&"Loading...",u&&ae.a.createElement(ne.Fragment,null,u.email,ae.a.createElement("br",null),u.n_stars,ae.a.createElement("br",null),"some action")))))},Mt=he.a.div(g||(g=Object(be.a)(["\n  margin-top: .5em;\n"]))),Tt=Object(ve.i)((function(e){var t=e.created_at,n=e.username,a=e.city,r=e.tags,c=void 0===r?[]:r;return ae.a.createElement(Mt,null,ae.a.createElement("span",{className:"date"}," On ",(t||"").substring(0,10)," "),n&&ae.a.createElement(ae.a.Fragment,null,"by ",ae.a.createElement("span",{className:"user"}," ",n," ")),a&&ae.a.createElement(ae.a.Fragment,null,"in ",ae.a.createElement("span",{className:"city",onClick:function(){e.history.push("/en/cities/travel-to/".concat(a.slug,"/show/newsfeed"))}}," ",a.name," ")),c&&c.map((function(e,t){return ae.a.createElement("span",{key:t,className:"tags"},e.name)})))})),Pt=function(e){var t=e.rate,n=Object(ne.useState)([]),a=Object(le.a)(n,2),r=a[0],c=a[1],o={0:Ot.x,1:Ot.w,2:Ot.v};return Object(ne.useEffect)((function(){for(var e=new Array(5).fill(0),n=0;t>0;)e[n]=t<1?1:2,t--,n++;c(e)}),[]),ae.a.createElement("span",{className:"rating"},r.map((function(e,t){return ae.a.createElement(ye.c,{key:t,className:"stars",icon:o[e]})})))},Wt=(n(197),he.a.div(h||(h=Object(be.a)(["\n  display: inline;\n  cursor: pointer;\n"])))),Ht=he.a.div(E||(E=Object(be.a)(["\n  display: flex;\n  justify-content: space-around;\n"]))),Ft=he.a.div(v||(v=Object(be.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),At={overlay:{},content:{margin:"auto",width:"400px"}},Rt=function(e){it(e,"UnlockModal");var t=Object(ne.useContext)(ut),n=t.currentUser,a=t.setCurrentUser,r=t.itemToUnlock,c=t.setItemToUnlock,o=(t.loginModalOpen,t.setLoginModalOpen),l=(Object(ne.useContext)(ut),Ee()),i=function(){var e=Object(oe.a)(se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.doUnlock({kind:r.item_type,id:r.id}),e.next=3,$e.post("".concat(pe.a.apiOrigin).concat(t)).then((function(e){c({})})).catch((function(e){it(e,"e19")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=Object(ne.useRef)("init");return Object(ne.useEffect)((function(){return function(){var e=Object(oe.a)(se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem(rt.jwt_token),e.next=3,$e.get("".concat(pe.a.apiOrigin).concat(l.myAccount(),"?jwt_token=").concat(t)).then((function(e){s.current&&a(e.data)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return s.current=null}}),[r.id]),r.id?ae.a.createElement(Ne.a,{style:At,ariaHideApp:!1,isOpen:!!r.id},ae.a.createElement(Ft,null,ae.a.createElement("h1",null,"Unlock this item?"),ae.a.createElement(Wt,{onClick:function(){return c(!1)}},"\xd7")),ae.a.createElement("p",null,"To access this content, please unlock it first. It costs 1 (one) coin to unlock."),!!n&&ae.a.createElement("p",null,"You have ",ae.a.createElement("b",null,n.n_unlocks)," unlocks.")||ae.a.createElement("p",null,"You have to be logged in to unlock content. ",ae.a.createElement("a",{onClick:function(){o(!0),c(!1)}},"Please login.")),ae.a.createElement(Ht,null,!!n&&ae.a.createElement(at,{onClick:i},"Unlock"))):null},Bt=he.a.div(j||(j=Object(be.a)(["\n  background: white;\n\n  overflow: hidden;\n  margin: 10px;\n  height: calc(100vh - ","px - ",");\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth/2,"px"):"0px"})),zt=function(e){return ae.a.createElement(Bt,e)},Vt=(n(131),function(e){var t=Object(ne.useState)([]),n=Object(le.a)(t,2),a=n[0],r=n[1],c=Object(ne.useState)([]),o=Object(le.a)(c,2),l=o[0],i=o[1],s=Object(ne.useState)(!1),u=Object(le.a)(s,2),m=u[0],p=u[1],d=Ee(),f=Object(ve.g)();Object(ne.useEffect)((function(){p(!0),d.getCities().then((function(e){p(!1),i(e),r(e)}))}),[]);return ae.a.createElement(ne.Fragment,null,ae.a.createElement(pt,{className:"cities"},ae.a.createElement("h1",{className:"heading"},"Cities"),ae.a.createElement(xe.b,{to:"/en/account"},"Account"),ae.a.createElement("div",{className:"filter-section"},ae.a.createElement("input",{className:"filter-input",onChange:function(e){var t=a.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.trim().toLowerCase())>-1}));i(t)}}),ae.a.createElement(ye.c,{className:"filter-icon",icon:Ot.j})),ae.a.createElement("div",{className:"bookmark-section"},ae.a.createElement("label",{className:"switch"},ae.a.createElement("input",{type:"checkbox",onChange:function(){},checked:!0}),ae.a.createElement("span",{className:"slider round"})),ae.a.createElement("span",{className:"bookmark-text"},"Show only bookmarked")),ae.a.createElement("div",{className:"container"},l.map((function(e,t){return ae.a.createElement("div",{key:t,className:"cities",onClick:function(){return f.push(Re.cityPath(e.slug))}},ae.a.createElement("div",{className:"img-section"},ae.a.createElement("span",{className:"bookmark"},ae.a.createElement(ye.c,{className:"bookmark-icon",icon:Ot.b})),ae.a.createElement("img",{className:"city-img",src:e.photo}),ae.a.createElement("span",{className:"city-title"},e.name)),ae.a.createElement("div",{className:"content-section"},ae.a.createElement("div",{className:"content-item"},ae.a.createElement(ye.c,{className:"icon",icon:Ot.n}),ae.a.createElement("span",{className:"count"},e.n_reports)),ae.a.createElement("div",{className:"content-item"},ae.a.createElement(ye.c,{className:"icon",icon:Ot.k}),ae.a.createElement("span",{className:"count"},e.n_galleries)),ae.a.createElement("div",{className:"content-item"},ae.a.createElement(ye.c,{className:"icon",icon:Ot.y}),ae.a.createElement("span",{className:"count"},e.n_videos))))}))),"\xa0"),ae.a.createElement(ye.h,{isOpen:m,onDidDismiss:function(){return p(!1)},message:"Please wait...",duration:5e3}))}),Jt=(n(73),he.a.div(O||(O=Object(be.a)(["\n  position: relative;\n  padding-top: 100%;\n  overflow: hidden;\n  z-index: 10;\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n\n  width: 100px;\n  height: 100px;\n"]))),he.a.div(y||(y=Object(be.a)(["\n"]))),he.a.div(w||(w=Object(be.a)(["\n  position: relative;\n"])))),Gt=he.a.img(x||(x=Object(be.a)(["\n  width: 200px;\n"]))),qt=he.a.img(k||(k=Object(be.a)(["\n  position: absolute;\n  left: 200px;\n  top: 0;\n"]))),Yt=he.a.img(_||(_=Object(be.a)(["\n  position: absolute;\n  left: 200px;\n  top: 100px;\n"]))),Xt=function(e){var t=e.item;Object(ve.g)();return ae.a.createElement(cn,{item:t},ae.a.createElement(Jt,null,!1,t.photos[0]&&ae.a.createElement(Gt,{src:t.photos[0].thumb_url}),t.photos[1]&&ae.a.createElement(qt,{src:t.photos[1].thumb_url}),t.photos[2]&&ae.a.createElement(Yt,{src:t.photos[2].thumb_url}),!1))},Zt=function(e){var t=e.item;return ae.a.createElement(cn,{item:t})},Kt=function(e){it(e,"NewsitemVideo");var t=e.item;return ae.a.createElement(cn,{item:t},ae.a.createElement("div",{className:"image-section"},t.youtube_id?ae.a.createElement("iframe",{className:"iframe",width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(t.youtube_id),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):ae.a.createElement("video",{width:"100%",preload:"metadata",height:"auto",controls:!0},ae.a.createElement("source",{src:t.url,type:"video/mp4"}))))},Qt=he.a.div(N||(N=Object(be.a)(["\n  margin-bottom: 2em;\n"]))),$t=function(e){it(e,"Newsitems");var t=e.newsitems;return t&&t.length?ae.a.createElement(Qt,null,t.map((function(e,t){var n=e.premium_tier||0;return ae.a.createElement("div",{key:t,className:"items premium-".concat(n)},e.item_type===rt.item_types.gallery&&ae.a.createElement(Xt,{item:e}),e.item_type===rt.item_types.report&&ae.a.createElement(Zt,{item:e}),e.item_type===rt.item_types.video&&ae.a.createElement(Kt,{item:e}))}))):ae.a.createElement("div",null,"No Newsitems")},en=function(e){var t=e.is_purchased,n=e.item_type,a=e.premium_tier;if(t)return ae.a.createElement("img",{className:"icon",src:"/assets/icons/glasses.png",alt:""});if(a>0)return ae.a.createElement("img",{className:"icon",src:"/assets/icons/gem.png",alt:""});switch(n){case rt.item_types.gallery:return ae.a.createElement("img",{className:"icon",src:"/assets/icons/gallery.png",alt:""});case rt.item_types.report:return ae.a.createElement("img",{className:"icon",src:"/assets/icons/report.png",alt:""});case rt.item_types.video:return ae.a.createElement("img",{className:"icon",src:"/assets/newsfeed/video_icon.svg",alt:""});default:return"unknown kind"}},tn=["children"],nn=he.a.div(C||(C=Object(be.a)(["\n  display: flex;\n  flex-direction: column;\n\n  margin-left: 0.5em;\n"]))),an=he.a.div(S||(S=Object(be.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n\n  // padding: 0 1em;\n"]))),rn=he.a.h2(U||(U=Object(be.a)(["\n  margin-top: 0;\n"]))),cn=function(e){var t=e.children,n=Object(fe.a)(e,tn),a=n.item,r=a.item_type,c=a.slug,o=Object(ve.g)(),l=Object(ne.useContext)(ut),i=(l.itemToUnlock,l.setItemToUnlock),s=l.layout,u=(l.showItem,l.setShowItem);return ae.a.createElement(nt,Object.assign({boxShadow:2},n,{onClick:function(){a.is_premium&&!a.is_purchased?i(a):s===rt.layout_mapui?u(a):o.push("/en/".concat(lt(r),"/show/").concat(c))},cursor:"pointer"}),t,ae.a.createElement(an,null,ae.a.createElement(en,a),ae.a.createElement(nn,null,ae.a.createElement(rn,null,a.name),ae.a.createElement(Tt,a))),ae.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:a.subhead}}))},on=(n(198),function(e){var t=Object(ne.useState)(JSON.parse(JSON.stringify(e.data||[]))),n=Object(le.a)(t,2),a=n[0],r=n[1];return ae.a.createElement("div",{className:"venues-section"},ae.a.createElement("div",null,ae.a.createElement("div",{className:"filter-section"},ae.a.createElement("input",{className:"filter-input",onChange:function(t){var n=e.data.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));r(n)}}),ae.a.createElement(ye.c,{className:"filter-icon",icon:Ot.j}))),ae.a.createElement("div",{className:"container"},a.map((function(e,t){return ae.a.createElement("div",{key:t,className:"venues"},ae.a.createElement("div",{className:"image-section"},ae.a.createElement("img",{src:e.photo})),ae.a.createElement("div",{className:"info-section"},ae.a.createElement("h4",{className:"title"},e.name),ae.a.createElement("div",{className:"rating-section"},ae.a.createElement(Pt,{rate:3.5}),ae.a.createElement("span",{className:"reviews"},"5 reviews")),ae.a.createElement("div",{className:"tags-section"},e.tags.map((function(e,t){return ae.a.createElement("span",{key:t,className:"tags"},e.name)}))),ae.a.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.subhead}}),ae.a.createElement("p",{className:"address"},"111 N Main St., New York, NY 11223")),ae.a.createElement("img",{className:"forward-arrow",src:"/assets/16x16/arrow-right.png"}))}))))}),ln=function(e){it(e,"CitiesShow");var t=e.match,n=Object(ve.g)();it(n,"production history");var a=Object(ve.h)(),r=Object(ne.useState)(null),c=Object(le.a)(r,2),o=c[0],l=c[1],i=Object(ne.useState)(!1),s=Object(le.a)(i,2),u=s[0],m=s[1],p=Ee(),d=Object(ne.useRef)("init");return Object(ne.useEffect)((function(){return m(!0),p.getCity(t.params.name).then((function(e){d.current&&(l(e.data.city),m(!1))})),function(){return d.current=!1}}),[t.params.name]),ae.a.createElement(pt,null,o&&ae.a.createElement("div",{className:"wrapper"},ae.a.createElement("div",{className:"city-show"},ae.a.createElement("header",{style:{backgroundImage:"url(".concat(o.hero_img,"}"),backgroundSize:"contain"}}),ae.a.createElement("section",{className:"section-one"},ae.a.createElement(ye.c,{icon:Ot.p,className:"location"}),ae.a.createElement("h1",{className:"city-name"},o.name),ae.a.createElement("div",{className:"status"},ae.a.createElement("div",{className:"status-grid"},ae.a.createElement(ye.c,{className:"info-icon",icon:Ot.n}),ae.a.createElement("span",{className:"numbers"},o.n_reports)),ae.a.createElement("div",{className:"status-grid"},ae.a.createElement(ye.c,{className:"info-icon",icon:Ot.k}),ae.a.createElement("span",{className:"numbers"},o.n_galleries)),ae.a.createElement("div",{className:"status-grid mid"},ae.a.createElement(ye.c,{className:"info-icon",icon:Ot.y}),ae.a.createElement("span",{className:"numbers "},o.n_videos)))),o.tags&&ae.a.createElement("section",{className:"tags-section"},ae.a.createElement("span",{className:"btn delete-btn"},ae.a.createElement(ye.c,{name:"close"}," ")," deselect all"),o.tags.map((function(e,t){return ae.a.createElement("span",{className:"btn",key:t},e.name)}))),ae.a.createElement("section",{className:"section-three"},ae.a.createElement("div",{className:"menu-option",onClick:function(){}},ae.a.createElement("img",{src:"/assets/newsfeed-icon.svg",alt:"Newsfeed"}),ae.a.createElement("p",{className:"".concat(a.pathname.includes("newsfeed")?"selected":""," menu-item")},"Newsfeed")),ae.a.createElement("div",{className:"menu-option",onClick:function(){}},ae.a.createElement("img",{src:"/assets/venue-icon.svg",alt:"Venues"}),ae.a.createElement("p",{className:"".concat(a.pathname.includes("venues")?"selected":""," menu-item")},"Venues"))),ae.a.createElement(ve.d,null,ae.a.createElement(ve.b,{exact:!0,path:"".concat(t.url,"/venues"),render:function(){return ae.a.createElement(on,{data:o.venues})}}),ae.a.createElement(ve.b,{exact:!0,path:t.url,render:function(){return ae.a.createElement($t,{newsitems:o.newsitems})}})))),ae.a.createElement(ye.h,{isOpen:u,onDidDismiss:function(){return m(!1)},message:"Please wait...",duration:5e3}),"\xa0")},sn=(n(199),function(e){it(e,"GalleriesShow");var t=e.match,n=Object(ne.useState)(!1),a=Object(le.a)(n,2),r=(a[0],a[1],Object(ne.useState)({})),c=Object(le.a)(r,2),o=c[0],l=c[1],i=Object(ne.useContext)(ut),s=(i.currentUser,i.setCurrentUser,i.itemToUnlock),u=i.setItemToUnlock,m=(i.loginModalOpen,i.setLoginModalOpen,Object(ne.useRef)("init")),p=function(){var e=Object(oe.a)(se.a.mark((function e(){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(rt.jwt_token),e.next=3,$e.get("/api/galleries/view/".concat(t.params.slug),{params:{jwt_token:n}}).then((function(e){if(m.current){var t=e.data.gallery;t.is_premium&&!t.is_purchased?u(t):l(e.data.gallery)}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ne.useEffect)((function(){return p(),function(){m.current=null}}),[o.id,s.id]),ae.a.createElement(ne.Fragment,null,ae.a.createElement("div",{className:"gallery-show"},ae.a.createElement("div",{className:"narrow"},ae.a.createElement("h1",{className:"heading"},ae.a.createElement("img",{src:"/assets/newsfeed/photos_icon.png"}),ae.a.createElement("span",{className:"title"},o.name)),ae.a.createElement(Tt,{item:o}),ae.a.createElement("div",{className:"thumbs"},o.photos&&o.photos.map((function(e,t){return ae.a.createElement("div",{className:"card",key:t},ae.a.createElement("div",{className:"card-inner"},ae.a.createElement(ye.d,{src:e.thumb_url})))})))),ae.a.createElement("div",{className:"full-img-section"},o.photos&&o.photos.map((function(e,t){return ae.a.createElement("div",{className:"item",key:t},ae.a.createElement("img",{src:e.large_url}))})))))}),un=function(e){var t=Object(ne.useState)(null),n=Object(le.a)(t,2),a=n[0],r=n[1],c=Object(ne.useState)(!1),o=Object(le.a)(c,2),l=o[0],i=o[1];return Object(ne.useEffect)((function(){i(!0);var e=localStorage.getItem("jwtToken");$e.get("/api/my/galleries",{params:{jwt_token:e}}).then((function(e){it(e.data,"MyGalleries data"),r(e.data),i(!1)}))}),[]),ae.a.createElement(ae.a.Fragment,null,ae.a.createElement(ye.h,{isOpen:l,onDidDismiss:function(){return i(!1)},message:"Please wait...",duration:5e3}),a&&a.length&&a.map((function(e){return ae.a.createElement(Xt,{key:e.id,data:e})})))},mn=he.a.div(D||(D=Object(be.a)(["\n  padding: 0.5em;\n"]))),pn=he.a.div(I||(I=Object(be.a)(["\n  padding: 0.5em 0;\n"]))),dn=he.a.div(L||(L=Object(be.a)(["\n  border: 1px solid cyan;\n\n  display: flex;\n  z-index: 1;\n\n  height: ",";\n"])),(function(e){return e.breadcrumbsHeight})),fn=function(e){it(e,"Breakcrumbs");var t=Object(ne.useContext)(ut).layout,n=Object(ve.g)(),a=[];return e.breadcrumbs.map((function(t,r){r+1===e.breadcrumbs.length?a.push(ae.a.createElement(mn,{key:r},t.name)):(a.push(ae.a.createElement(mn,{key:r,style:{textDecoration:"underline"},onClick:function(){return n.push("/en/locations/show/".concat(t.slug))}},t.name)),a.push(ae.a.createElement(pn,{key:"".concat(r,"-divider")},">")))})),ae.a.createElement(dn,st,t===rt.layout_mapui&&ae.a.createElement(Lt,{variant:rt.variants.inline}),a)},bn=he.a.div(M||(M=Object(be.a)(["\n  padding: 2em 0;\n"]))),gn=function(e){it(e,"ReportsShow");var t=Object(ne.useState)({}),n=Object(le.a)(t,2),a=n[0],r=n[1],c=Ee(),o=(JSON.parse(localStorage.getItem("current_user")),function(){var t=Object(oe.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:it(null,"getting report..."),$e.get(c.reportsGet(e.match.params.slug)).then((function(e){return e.data})).then((function(e){it(e,"got report"),r(e.report)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(ne.useEffect)((function(){o()}),[]),ae.a.createElement(bn,null,ae.a.createElement(nt,{boxShadow:2},ae.a.createElement("h1",null,"Report ",a.name),ae.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:a.description}})))},hn=function(e){it(e,"ItemModal");var t=e.item,n=Object(ne.useContext)(ut),a=n.showItem,r=n.setShowItem;return ae.a.createElement(Ne.a,{isOpen:!!a},ae.a.createElement("h1",{onClick:function(){return r(!1)}},"[x]"),"report"===t.item_type&&ae.a.createElement(gn,{match:{params:{slug:t.reportname}}}))},En=he.a.div(T||(T=Object(be.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]))),vn=function(e){var t=e.item;return ae.a.createElement(En,{dangerouslySetInnerHTML:{__html:t.description}})},jn=function(e){var t=Object(ne.useContext)(ut),n=t.showUrl,a=t.setShowUrl;return ae.a.createElement(Ne.a,{ariaHideApp:!1,isOpen:!!n},ae.a.createElement("span",{onClick:function(){a(!1)}},"[x]"),ae.a.createElement("iframe",{height:"100%",style:{width:"100%",height:"100%"},scrolling:"yes",src:e.src,frameBorder:"no",allowtransparency:"true",allowFullScreen:!0}))},On=he.a.div(P||(P=Object(be.a)(["\n  // border: 1px solid blue;\n\n  background: #dedede;\n  flex: 50%;\n  overflow: scroll;\n\n  height: calc(100vh - 40px - ",");\n"])),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth,"px"):"0px"})),yn=he.a.div(W||(W=Object(be.a)(["\n  // border: 1px solid green;\n\n  background: #dedede;\n\n  padding: 1em;\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh - ","px - ","px);\n"])),(function(e){return e.bottomDrawerOpen?e.bottomDrawerHeight:e.borderWidth}),(function(e){return 3*e.borderWidth})),wn=he.a.div(H||(H=Object(be.a)(["\n  display: flex;\n  position: relative;\n"]))),xn=function(e){it(e,"LocationsShow");var t=e.match,n=Object(ne.useState)(!1),a=Object(le.a)(n,2),r=a[0],c=a[1],o=Object(ne.useState)(null),l=Object(le.a)(o,2),i=l[0],s=l[1],u=Object(ne.useContext)(ut),m=u.showItem,p=(u.setShowItem,u.showUrl),d=(u.setShowUrl,Object(ne.useRef)("init"));Object(ne.useEffect)((function(){c(!0);var e=localStorage.getItem("jwt_token");return $e.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(d.current===t.params.slug)return null;s(e.data.map),c(!1)})).finally((function(){})),function(){d.current=t.params.slug}}),[t.params.slug]);var f=st.borderWidth,b=st.bottomDrawerHeight,g=Object(ne.useContext)(ut).bottomDrawerOpen;return ae.a.createElement(wn,null,ae.a.createElement(On,{className:"Left",borderWidth:f,bottomDrawerOpen:g,bottomDrawerHeight:b},r&&ae.a.createElement("i",null,"Loading Left..."),i&&ae.a.createElement(fn,i),i&&ae.a.createElement(Mn,{map:i.map?i.map:i})),ae.a.createElement(yn,{borderWidth:f,bottomDrawerOpen:g,bottomDrawerHeight:b},r&&ae.a.createElement("i",null,"Loading Right..."),i&&ae.a.createElement(ne.Fragment,null,ae.a.createElement(Tn,{markers:i.markers}),ae.a.createElement(vn,{item:i}),i.newsitems&&i.newsitems.length&&ae.a.createElement($t,{newsitems:i.newsitems})||null)),p&&ae.a.createElement(jn,{src:p}),m&&ae.a.createElement(hn,{item:m}))},kn=he.a.div(F||(F=Object(be.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]))),_n=function(e){var t=e.item;return ae.a.createElement(kn,{dangerouslySetInnerHTML:{__html:t.description}})},Nn=(he.a.div(A||(A=Object(be.a)(["\n  position: relative;\n"]))),he.a.div(R||(R=Object(be.a)(["\n  // border: 1px solid orange;\n\n  position: absolute;\n  top: 0;\n  left: calc(100vw - 80px);\n  background: white;\n  padding: 5px;\n\n  display: flex;\n  flex-direction: column;\n  z-index: 10;\n"]))),he.a.div(B||(B=Object(be.a)(["\n  // border: 2px solid brown;\n\n  text-align: center;\n  display: block;\n\n  position: relative; /* required for mobile, so that zoomCtrl, etc are inside the collapsible div */\n\n  overflow: scroll;\n  max-height: 80vh;\n"]))),he.a.div(z||(z=Object(be.a)([""]))),he.a.div(V||(V=Object(be.a)(["\n  margin: 10px;\n  width: 20vw;\n"])))),Cn=function(e){it(e,"Markers");var t=Object(ve.g)(),n=[];return e.markers.map((function(e,a){n.push(ae.a.createElement(Nn,{key:a,onClick:function(){return e.url?window.location.href=e.url:t.push("/en/locations/show/".concat(e.slug))}},ae.a.createElement("img",{src:e.title_img_path}),ae.a.createElement("br",null),e.name))})),ae.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},n)},Sn=(he.a.div(J||(J=Object(be.a)(["\n  // border: 2px solid cyan;\n\n  display: flex;\n  flex-direction: column;\n\n  overflow: scroll;\n  height: calc(100vh - 40px); /* @TODO: why 40px?! */\n"]))),function(e){it(e,"LocationsShowMobile");var t=e.match,n=Object(ne.useState)(!1),a=Object(le.a)(n,2),r=a[0],c=a[1],o=Object(ne.useState)(null),l=Object(le.a)(o,2),i=l[0],s=l[1],u=Object(ne.useRef)("init");return Object(ne.useEffect)((function(){c(!0);var e=localStorage.getItem("jwt_token");return $e.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(!u.current)return null;s(e.data.map),c(!1)})).finally((function(){})),function(){}}),[t.params.slug]),ae.a.createElement(ne.Fragment,null,r&&ae.a.createElement("i",null,"Loading..."),i&&ae.a.createElement(fn,i),i&&ae.a.createElement(Xe,{slug:rt.collapsible.descr,label:"Description"},ae.a.createElement(_n,{item:i})),i&&i.markers.length&&ae.a.createElement(Xe,{slug:"markers-sec",label:"Markers"},ae.a.createElement(Cn,{markers:i.markers}))||null,i&&i.newsitems.length&&ae.a.createElement(Xe,{slug:"news-sec",label:"Newsitems"},ae.a.createElement($t,{newsitems:i.newsitems}))||null)}),Un=he.a.div(G||(G=Object(be.a)(["\n  // border: 3px solid green;\n\n  text-align: center;\n  display: block;\n\n  position: relative;\n  overflow: scroll;\n\n  height: calc(100vh - "," -\n    ","); /* @TODO: it's not really 4 borders, it's 1 on top, and 2 but thick (collapsed) on bottom. */\n\n"])),(function(e){return e.breadcrumbsHeight}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight," - 2*").concat(e.borderWidth):"4*".concat(e.borderWidth)})),Dn=he.a.div(q||(q=Object(be.a)(["\n  // border: 2px solid cyan;\n\n  display: inline-block;\n  position: relative;\n\n"]))),In=he.a.div(Y||(Y=Object(be.a)(["\n  border: 1px solid red;\n\n  position: relative;\n  overflow: scroll;\n  height: calc(100vh - "," -\n    ","); /* @TODO: it's not really 4 borders, it's 1 on top, and 2 but thick (collapsed) on bottom. */\n"])),(function(e){return e.breadcrumbsHeight}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight," - 2*").concat(e.borderWidth):"4*".concat(e.borderWidth)})),Ln=function(e){var t=Object(ne.useContext)(ut),n=t.zoom,a=t.setZoom;return ae.a.createElement("div",{style:{position:"absolute",top:0,right:0,zIndex:1,background:"white",padding:"5px",display:"flex",flexDirection:"column"}},ae.a.createElement("span",{onClick:function(){a(n/2)}},"[+]"),ae.a.createElement("span",{onClick:function(){a(2*n)}},"[-]"),ae.a.createElement("span",{onClick:function(){a(1)}},"[1]"))},Mn=function(e){var t=e.map,n=Object(ne.useContext)(ut),a=n.bottomDrawerOpen,r=(n.setBottomDrawerOpen,n.showUrl,n.setShowUrl),c=n.zoom,o=(n.setZoom,Object(ne.useRef)(null));it(o,"div1Ref");var l=Object(ve.g)();Object(ne.useEffect)((function(){o.current.scroll({top:200,left:200,behavior:"smooth"})}),[]);var i=[];return t.markers.map((function(e,t){var n=ae.a.createElement("div",{key:t,onClick:function(){return e.url?r(e.url):l.push("/en/locations/show/".concat(e.slug))},style:{position:"absolute",top:c>1?(e.y-e.centerOffsetY)/c:e.y/c-e.centerOffsetY,left:c>1?(e.x-e.centerOffsetX)/c:e.x/c-e.centerOffsetX}},ae.a.createElement("img",{src:e.img_path,style:{display:"block",maxWidth:"".concat(e.w/c,"px"),maxHeight:"".concat(e.h/c,"px"),width:"auto",height:"auto"}}));i.push(n)})),ae.a.createElement(In,Object.assign({},st,{bottomDrawerOpen:a,className:"MapPanel"}),ae.a.createElement(Ln,null),ae.a.createElement(Un,Object.assign({},st,{bottomDrawerOpen:a}),ae.a.createElement(Dn,{ref:o,style:{width:"".concat(t.w/c,"px"),height:"".concat(t.h/c,"px")}},ae.a.createElement("img",{src:t.img_path,style:{width:"".concat(t.w/c,"px"),height:"".concat(t.h/c,"px")}}),i)))},Tn=function(e){it(e,"Markers");var t=Object(ve.g)(),n=Object(ne.useContext)(ut),a=(n.showUrl,n.setShowUrl),r=[];return e.markers.map((function(e,n){r.push(ae.a.createElement("div",{key:n,style:{margin:"10px"},onClick:function(){return function(e){e.url?a(e.url):t.push("/en/locations/show/".concat(e.slug))}(e)}},ae.a.createElement("img",{src:e.title_img_path}),ae.a.createElement("br",null),e.name))})),ae.a.createElement("div",{style:{display:"flex"}},r)},Pn=(n(200),he.a.div(X||(X=Object(be.a)(["\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n"])))),Wn=function(){return ae.a.createElement(Pn,null,ae.a.createElement("img",{className:"image",src:"/assets/hero.png"}))},Hn=he.a.div(Z||(Z=Object(be.a)(["\n  padding: 0;\n  margin: 0;\n  height: 100vh;\n"]))),Fn=function(e){var t=Object(ne.useState)([]),n=Object(le.a)(t,2),a=n[0],r=n[1],c=Object(ne.useState)(!1),o=Object(le.a)(c,2),l=o[0],i=o[1],s=Ee(),u=Object(ne.useRef)("init");return Object(ne.useEffect)((function(){return s.applicationHome().then((function(e){if(!u.current)return null;r(e.newsitems),i(!1)})),function(){u.current=!1}}),[]),ae.a.createElement(ne.Fragment,null,ae.a.createElement(Hn,null,ae.a.createElement(Wn,null),ae.a.createElement($t,{newsitems:a}),"\xa0"),ae.a.createElement(ye.h,{isOpen:l,onDidDismiss:function(){return i(!1)},message:"Please wait...",duration:5e3}))},An=n(276),Rn=Object(An.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),Bn=he.a.div(K||(K=Object(be.a)(["\n  border-bottom: 1px solid red;\n"]))),zn=function(e){it(e,"Video");Ee();var t=e.item;return ae.a.createElement(Bn,{key:e.idx},ae.a.createElement("h5",null,"Video ",t.name),ae.a.createElement("p",null,"created ",t.created_at),ae.a.createElement("video",{controls:!0,preload:"metadata",type:"video/mp4",src:t.video_url,style:{maxWidth:"500px",maxHeight:"90vh"}}))},Vn=function(){it(pe.a,"Videos component"),console.log(JSON.stringify(pe.a));var e=Object(ne.useState)([]),t=Object(le.a)(e,2),n=t[0],a=t[1],r=localStorage.getItem("jwtToken"),c=Rn(),o=Ee();return Object(ne.useEffect)((function(){it("posting..."),$e.post(o.myVideosPath,{jwtToken:r}).then((function(e){return e.data})).then((function(e){var t=e.videos;it(t,"data"),a(t)}))}),[]),ae.a.createElement(dt.a,{maxWidth:"md"},ae.a.createElement(we.a,{container:!0,className:c.root},ae.a.createElement(we.a,{item:!0,xs:12},ae.a.createElement("h2",null,"My Videos")),ae.a.createElement(we.a,{item:!0,xs:12},n&&n.map((function(e,t){return ae.a.createElement(zn,{key:t,item:e})})))))},Jn=he.a.div(Q||(Q=Object(be.a)(["\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]))),Gn=Object(he.a)(dt.a)($||($=Object(be.a)(["\n  height: 100vh;\n  overflow: scroll;\n"]))),qn=function(e){it(e,"AppDesktop");e.currentUser,e.setCurrentUser,e.loginModalOpen,e.setLoginModalOpen,Ee();var t=Object(ne.useState)(rt.layout_onecol),n=Object(le.a)(t,2),a=n[0],r=n[1],c=function(e){switch(a){case rt.layout_onecol:return ae.a.createElement(Gn,Object.assign({maxWidth:"md"},e));case rt.layout_mapui:return ae.a.createElement(zt,e)}},o=function(e){return Object(ne.useEffect)((function(){e.layout?r(e.layout):r(rt.layout_onecol)}),[e.layout]),ae.a.createElement(ve.b,e)};return ae.a.createElement(xe.a,null,ae.a.createElement(Oe.a,null),ae.a.createElement(mt,Object.assign({},e,{layout:a,setLayout:r}),ae.a.createElement(Lt,null),ae.a.createElement(Jn,null,ae.a.createElement(c,null,ae.a.createElement(ve.d,{id:"main",main:!0},ae.a.createElement(ve.a,{exact:!0,from:"/",to:"/en"}),ae.a.createElement(o,{exact:!0,path:"/en"},ae.a.createElement(Fn,null)),ae.a.createElement(o,{exact:!0,path:"/en/account",component:ke}),ae.a.createElement(o,{exact:!0,path:"/en/account/my/videos",component:Vn}),ae.a.createElement(o,{exact:!0,path:"/en/account/my/galleries",component:un}),ae.a.createElement(o,{exact:!0,path:"/en/cities",component:Vt}),ae.a.createElement(o,{path:"/en/cities/travel-to/:name",component:ln}),ae.a.createElement(o,{exact:!0,path:"/en/galleries/show/:slug",component:sn}),ae.a.createElement(o,{exact:!0,path:"/en/reports/show/:slug",component:gn}),ae.a.createElement(o,{exact:!0,path:"/en/locations/show/:slug",component:xn,layout:rt.layout_mapui})))),ae.a.createElement(jt,null),ae.a.createElement(Rt,null),ae.a.createElement(Ce,null)))},Yn=he.a.div(ee||(ee=Object(be.a)(["\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]))),Xn=Object(he.a)(dt.a)(te||(te=Object(be.a)(["\n  height: 100vh;\n  overflow: scroll;\n"]))),Zn=function(e){it(e,"AppMobile");e.currentUser,e.setCurrentUser;var t=Object(ne.useState)(rt.layout_onecol),n=Object(le.a)(t,2),a=n[0],r=n[1],c=ae.a.useState(!1),o=Object(le.a)(c,2),l=o[0],i=o[1],s=ae.a.useState(!1),u=Object(le.a)(s,2),m=u[0],p=u[1],d=Object(ne.useState)(1),f=Object(le.a)(d,2),b=(f[0],f[1],Ee()),g=function(e){switch(a){case rt.layout_onecol:return ae.a.createElement(Xn,Object.assign({maxWidth:"md"},e));case rt.layout_mapui:return ae.a.createElement(zt,Object.assign({},e,{bottomDrawerOpen:l,setBottomDrawerOpen:i}))}},h=function(e){return Object(ne.useEffect)((function(){e.layout?r(e.layout):r(rt.layout_onecol)}),[e.layout]),ae.a.createElement(ve.b,e)},E=function(){var e=Object(oe.a)(se.a.mark((function e(){var t,n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.doUnlock({kind:"Report",id:m.report_id}),e.next=3,$e.post("".concat(pe.a.apiOrigin).concat(t));case 3:n=e.sent,it(n,"result of unlocking");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return ae.a.createElement(xe.a,null,ae.a.createElement(mt,Object.assign({},e,{layout:a,setLayout:r}),ae.a.createElement(ot,null,a===rt.layout_onecol&&ae.a.createElement(Lt,{variant:rt.variants.floating}),ae.a.createElement(Yn,null,ae.a.createElement(g,null,ae.a.createElement(ve.d,{id:"main",main:!0},ae.a.createElement(ve.a,{exact:!0,from:"/",to:"/en"}),ae.a.createElement(h,{exact:!0,path:"/en"},ae.a.createElement(Fn,null)),ae.a.createElement(h,{exact:!0,path:"/en/account",component:ke}),ae.a.createElement(h,{exact:!0,path:"/en/account/my/videos",component:Vn}),ae.a.createElement(h,{exact:!0,path:"/en/account/my/galleries",component:un}),ae.a.createElement(h,{exact:!0,path:"/en/cities",component:Vt}),ae.a.createElement(h,{path:"/en/cities/travel-to/:name/show",component:ln}),ae.a.createElement(h,{exact:!0,path:"/en/galleries/show/:slug",component:sn}),ae.a.createElement(h,{exact:!0,path:"/en/reports/show/:slug",component:gn}),ae.a.createElement(h,{exact:!0,path:"/en/locations/show/:slug",component:Sn,layout:rt.layout_mapui})))),ae.a.createElement(jt,null),ae.a.createElement(Ne.a,{ariaHideApp:!1,isOpen:!!m},ae.a.createElement("h1",null,"Unlock this item? ",ae.a.createElement("button",{onClick:function(){return p(!1)}},"[x]")),ae.a.createElement("button",{onClick:E},"Do it")))))},Kn=function(e){it(e,"AppWrapper");var t=Ee(),n=Object(ne.useState)(!1),a=Object(le.a)(n,2),r=a[0],c=a[1],o=Object(ne.useState)(!1),l=Object(le.a)(o,2),i=l[0],s=l[1],u=Object(ne.useRef)("init");Object(ne.useEffect)((function(){var e=function(){var e=Object(oe.a)(se.a.mark((function e(){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(rt.jwt_token),e.next=3,$e.get("".concat(pe.a.apiOrigin).concat(t.myAccount(),"?jwt_token=").concat(n)).then((function(e){u.current&&c(e.data)})).catch((function(e){it(e,"e12"),"Request failed with status code 401"===e.message&&s(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(pe.a.requireLogin||"undefined"===typeof pe.a.requireLogin)&&e(),function(){return u.current=null}}),[r]);var m=Object(ne.useState)(null),p=Object(le.a)(m,2),d=p[0],f=p[1];(function(){var e=Object(oe.a)(se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.a.getInfo();case 2:t=e.sent,f(t.operatingSystem);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();var b={currentUser:r,setCurrentUser:c,loginModalOpen:i,setLoginModalOpen:s};return d?"ios android".includes(d)?ae.a.createElement(Zn,b):ae.a.createElement(qn,b):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ce.a.render(ae.a.createElement(Kn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,n){},73:function(e,t,n){}},[[155,3,4]]]);
//# sourceMappingURL=main.d58c5753.chunk.js.map