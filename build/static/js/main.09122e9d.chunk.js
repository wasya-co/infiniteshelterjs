(this.webpackJsonpguyd=this.webpackJsonpguyd||[]).push([[1],{12:function(e,t){e.exports={apiOrigin:"https://manager.piousbox.com",domain:"tgm.piousbox.com",appIndexPath:"src/index",requireLogin:!1}},128:function(e,t,n){},129:function(e,t,n){},151:function(e,t,n){e.exports=n(195)},156:function(e,t,n){var a={"./ion-action-sheet.entry.js":[201,5],"./ion-alert.entry.js":[202,6],"./ion-app_8.entry.js":[203,7],"./ion-avatar_3.entry.js":[204,17],"./ion-back-button.entry.js":[205,18],"./ion-backdrop.entry.js":[206,45],"./ion-button_2.entry.js":[207,19],"./ion-card_5.entry.js":[208,20],"./ion-checkbox.entry.js":[209,21],"./ion-chip.entry.js":[210,22],"./ion-col_3.entry.js":[211,46],"./ion-datetime_3.entry.js":[212,10],"./ion-fab_3.entry.js":[213,23],"./ion-img.entry.js":[214,47],"./ion-infinite-scroll_2.entry.js":[215,48],"./ion-input.entry.js":[216,24],"./ion-item-option_3.entry.js":[217,25],"./ion-item_8.entry.js":[218,26],"./ion-loading.entry.js":[219,27],"./ion-menu_3.entry.js":[220,28],"./ion-modal.entry.js":[221,8],"./ion-nav_2.entry.js":[222,14],"./ion-popover.entry.js":[223,9],"./ion-progress-bar.entry.js":[224,29],"./ion-radio_2.entry.js":[225,30],"./ion-range.entry.js":[226,31],"./ion-refresher_2.entry.js":[227,11],"./ion-reorder_2.entry.js":[228,16],"./ion-ripple-effect.entry.js":[229,49],"./ion-route_4.entry.js":[230,32],"./ion-searchbar.entry.js":[231,33],"./ion-segment_2.entry.js":[232,34],"./ion-select_3.entry.js":[233,35],"./ion-slide_2.entry.js":[234,50],"./ion-spinner.entry.js":[235,13],"./ion-split-pane.entry.js":[236,51],"./ion-tab-bar_2.entry.js":[237,36],"./ion-tab_2.entry.js":[238,15],"./ion-text.entry.js":[239,37],"./ion-textarea.entry.js":[240,38],"./ion-toast.entry.js":[241,39],"./ion-toggle.entry.js":[242,12],"./ion-virtual-scroll.entry.js":[243,52]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=156,e.exports=r},158:function(e,t,n){var a={"./ion-icon.entry.js":[244,59]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=158,e.exports=r},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var a,r,c,o,i,l,s,u,m,d,p,b,f,g,h,E,j,v,O,y,w,x,k,_,C,S,N,U,L,I,D,M,T,P,W,H,F,R,z,B,A,G,V,q,J,Z,Y,X,K,Q,$,ee,te,ne,ae,re,ce,oe,ie,le,se,ue,me,de,pe,be,fe,ge,he,Ee=n(0),je=n.n(Ee),ve=n(17),Oe=n.n(ve),ye=n(10),we=n(5),xe=n(16),ke=n.n(xe),_e=n(142),Ce=n(2),Se=n(12),Ne=n.n(Se),Ue=n(23),Le=n(48),Ie=n(3),De=n(274),Me=function(){var e=Object(Ee.useContext)(Ct),t=(e.currentUser,e.setCurrentUser,localStorage.getItem(Ot.jwt_token));return{doUnlock:function(e){var t=e.kind,n=e.id,a=localStorage.getItem("jwt_token");return"/api/payments/unlock?kind=".concat(t,"&id=").concat(n,"&jwt_token=").concat(a)},getMyAccount:function(){var e=localStorage.getItem("jwt_token");return ft.post("/api/my/account",{jwt_token:e})},loginPath:"/api/users/login.json",longTermTokenPath:"/api/users/long_term_token",myAccount:function(){return"/api/my/account"},myVideosPath:"/api/my/videos",paymentsPath:"/api/payments2",reportsGet:function(e){var t=JSON.parse(localStorage.getItem("current_user"))||{},n="";return t&&(n="jwt_token=".concat(t.jwt_token)),"".concat(Ne.a.apiOrigin,"/api/reports/view/").concat(e,"?").concat(n)},getCities:function(){return ft.get("".concat(Ne.a.apiOrigin,"/api/cities")).then((function(e){return e.data}))},getCity:function(e){return ft.get("".concat(Ne.a.apiOrigin,"/api/cities/view/").concat(e))},getTag:function(e){return ft.get("".concat(Ne.a.apiOrigin,"/api/tags/view/").concat(e.slug)).then((function(e){return e.data}))},applicationHome:function(){var e=Object(ye.a)(ke.a.mark((function e(){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.get("".concat(Ne.a.apiOrigin,"/api/sites/view/").concat(Ne.a.domain),{params:{jwt_token:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},Te=(n(33),n(27)),Pe=n(55),We=(n(197),n(81)),He=(n(105),n(7)),Fe=n(265),Re=n(20),ze=function(e){kt(e,"Account");var t=Object(Ee.useContext)(Ct),n=t.currentUser;t.setCurrentUser;return je.a.createElement(Ee.Fragment,null,je.a.createElement(Fe.a,{container:!0,spacing:2},je.a.createElement(Fe.a,{item:!0,xs:12},je.a.createElement(Fe.a,{container:!0},je.a.createElement(Fe.a,{item:!0,xs:6},je.a.createElement("img",{src:"/assets/accounts/default-avatar.png",alt:"profile pic"})),je.a.createElement(Fe.a,{item:!0,xs:6},!!n&&je.a.createElement(Ee.Fragment,null,je.a.createElement("h4",null,n.email),je.a.createElement("ul",null,je.a.createElement("li",null,je.a.createElement(Re.b,{to:"/en/account/my/galleries"},"My Galleries")),je.a.createElement("li",null,je.a.createElement("a",{onClick:function(){return e.history.push("/en/account/my/videos")}},"My Videos")),je.a.createElement("li",null,je.a.createElement(tt,null))))||je.a.createElement(Ee.Fragment,null,je.a.createElement("h4",null,"Not logged in"),je.a.createElement(et,null),je.a.createElement("br",null),je.a.createElement("br",null),je.a.createElement(nt,null)))))))},Be=n(39),Ae=n.n(Be),Ge=function(e){kt(e,"LoginModal");var t=Object(Ee.useContext)(Ct),n=t.loginModalOpen,a=t.setLoginModalOpen;return je.a.createElement(Ae.a,{style:{zIndex:3},isOpen:n},je.a.createElement("h1",null,"Please Login",je.a.createElement("button",{onClick:function(){return a(!1)}},"[x]")),je.a.createElement(et,null),je.a.createElement(nt,null))},Ve=n(53),qe=n(135),Je=Object(qe.a)("pk_test_qr1QPmSpLdBFt1F7itdWJOj3"),Ze=function(e){return je.a.createElement(Ee.Fragment,null,je.a.createElement("button",null,"do login"))},Ye=Ce.b.div(a||(a=Object(Ie.a)(["\n  // border: 1px solid red;\n\n  display: flex;\n  justify-content: flex-start;\n  background: #dedede;\n\n  background: white;\n  height: 100px;\n  width: calc(100vw - ","px);\n  padding: 1em;\n  margin-bottom: ","px;\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.borderWidth})),Xe=function(e){var t=Me(),n=Object(Ee.useContext)(Ct),a=n.currentUser,r=(n.setCurrentUser,Object(Ve.useStripe)()),c=Object(Ve.useElements)(),o=Object(Ee.useState)(!1),i=Object(we.a)(o,2),l=i[0],s=i[1],u=function(){var e=Object(ye.a)(ke.a.mark((function e(n){var a,o,i,l;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),kt("purchasing..."),r&&c){e.next=4;break}return e.abrupt("return");case 4:return c.getElement(Ve.CardElement),a=localStorage.getItem("jwt_token"),e.next=8,ft.get("".concat(Ne.a.apiOrigin).concat(t.paymentsPath,"?jwt_token=").concat(a));case 8:return o=(o=e.sent).data.client_secret,kt(o,"client_secret"),e.next=13,r.confirmCardPayment(o,{payment_method:{card:c.getElement(Ve.CardElement)}});case 13:if(i=e.sent,kt(i,"result"),!i.error){e.next=19;break}kt(i.error.message,"error message"),e.next=27;break;case 19:if("succeeded"!==i.paymentIntent.status){e.next=26;break}return e.next=22,ft.get("".concat(Ne.a.apiOrigin).concat(t.myAccount(),"?jwt_token=").concat(a));case 22:l=e.sent,kt(l,"ze3response"),e.next=27;break;case 26:kt("something else");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=_t.borderWidth;return a?je.a.createElement(Ye,{borderWidth:m},a.email?a.email:je.a.createElement(Ze,null)," \xa0 [\xa0","number"===typeof a.n_unlocks?a.n_unlocks:"?"," coins\xa0]\xa0 \xa0",je.a.createElement("button",{onClick:function(){return s(!0)}},"buy"),je.a.createElement(Ae.a,{isOpen:l,ariaHideApp:!1,style:{width:"500px"}},je.a.createElement("h1",null,"Purchase this",je.a.createElement("span",{onClick:function(){kt("clicking..."),s(!1)}},"[x]")),je.a.createElement("form",{onSubmit:u},je.a.createElement(Ve.CardElement,null),je.a.createElement("button",{type:"submit",disabled:!r},"Pay")))):null},Ke=function(e){return je.a.createElement(Ve.Elements,{stripe:Je},je.a.createElement(Xe,e))},Qe=Pe.a.FacebookLogin,$e=["email"],et=function(e){var t=Me(),n=Object(Ee.useContext)(Ct),a=(n.currentUser,n.setCurrentUser),r=function(){var e=Object(ye.a)(ke.a.mark((function e(){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.login({permissions:$e});case 2:(n=e.sent).accessToken?ft.post("".concat(Ne.a.apiOrigin).concat(t.longTermTokenPath),{accessToken:n.accessToken.token}).then((function(e){localStorage.setItem(Ot.jwt_token,e.data.jwt_token),localStorage.setItem(Ot.current_user,JSON.stringify(e.data)),a(e.data)})).catch((function(e){kt(e,"Could not post request to ".concat(Ne.a.apiOrigin).concat(t.longTermTokenPath))})):kt("canceled");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return je.a.createElement(vt,{onClick:r},"FB Login")},tt=function(){var e=Object(Ee.useContext)(Ct),t=(e.currentUser,e.setCurrentUser);return je.a.createElement(vt,{onClick:function(){localStorage.removeItem(Ot.jwt_token),localStorage.removeItem(Ot.current_user),t(null)}},"Logout")},nt=function(e){var t=Me(),n=Object(Ee.useContext)(Ct),a=(n.currentUser,n.setCurrentUser),r=(n.loginModalOpen,n.setLoginModalOpen),c=Object(Ee.useState)(""),o=Object(we.a)(c,2),i=o[0],l=o[1],s=Object(Ee.useState)(""),u=Object(we.a)(s,2),m=u[0],d=u[1],p=function(){var e=Object(ye.a)(ke.a.mark((function e(n,c){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ft.post("".concat(Ne.a.apiOrigin).concat(t.loginPath),{email:n,password:c}).then((function(e){return e.data})).then((function(e){a(e),localStorage.setItem("jwt_token",e.jwt_token),localStorage.setItem("current_user",JSON.stringify(e)),r(!1)})).catch((function(e){kt(e,"e322"),Object(We.b)("Login failed"),a(null)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return je.a.createElement(Ee.Fragment,null,je.a.createElement("input",{type:"email",value:i,onChange:function(e){return l(e.target.value)}}),je.a.createElement("br",null),je.a.createElement("input",{type:"password",value:m,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&p(i,m)}}),je.a.createElement("br",null),je.a.createElement(vt,{onClick:function(){return p(i,m)}},"Password Login"))},at={cityVenuesPath:function(e){return"/en/cities/travel-to/".concat(e,"/venues")},cityPath:function(e){return"/en/cities/travel-to/".concat(e)}},rt=n(92),ct=["children"],ot=function(){return je.a.createElement("span",null,"\xa0>\xa0\xa0")},it=Ce.b.div(r||(r=Object(Ie.a)(["\n  // border: 2px solid red;\n  // max-height: 100vh;\n"]))),lt=function(){return je.a.createElement("span",null,"\xa0<\xa0\xa0")},st=Ce.b.div(c||(c=Object(Ie.a)(["\n  display: flex;\n  margin-bottom: ",";\n"])),(function(e){return e.borderWidth})),ut=Ce.b.div(o||(o=Object(Ie.a)(["\n  // background: #dedede;\n  margin: .5em;\n  padding: .5em;\n\n  margin-bottom: 1em;\n"]))),mt=function(e){var t=e.children,n=Object(Le.a)(e,ct);kt(n,"Collapsible");var a=n.config,r=Object(Ee.useContext)(yt);if(!r)return null;var c=r.collapsibles,o=r.setCollapsibles,i="undefined"===typeof a||("undefined"===typeof a.collapsible||a.collapsible),l=!!i&&!!c[n.slug];return je.a.createElement(ut,{className:"Root ".concat(n.className)},i&&n.label&&je.a.createElement(st,Object.assign({},_t,{onClick:function(){o(Object(rt.a)(Object(rt.a)({},c),{},Object(Ue.a)({},n.slug,!c[n.slug])))}}),l?je.a.createElement(lt,null):je.a.createElement(ot,null)," ",n.label," "),!l&&je.a.createElement(it,null,t))},dt=n(139),pt=n.n(dt),bt={baseURL:Ne.a.apiOrigin},ft=pt.a.create(bt),gt=function(){var e=Object(Ee.useState)([0,0]),t=Object(we.a)(e,2),n=t[0],a=t[1];return Object(Ee.useLayoutEffect)((function(){function e(){a([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n},ht=["children"],Et=["children"],jt=Object(Ce.b)(De.a)(i||(i=Object(Ie.a)(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ",";\n\n  display: flex;\n  flex-direction: column;\n"])),(function(e){return e.cursor?e.cursor:"auto"})),vt=Ce.b.div(l||(l=Object(Ie.a)(["\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  padding: .3em 1em;\n  cursor: pointer;\n"]))),Ot={collapsible:{descr:"descr-sec"},current_user:"current_user",jwt_token:"jwt_token",item_types:{gallery:"Gallery",report:"Report",video:"Video"},layout_onecol:"onecol",layout_mapui:"mapui",variants:{floating:"floating",inline:"inline"}},yt=je.a.createContext({}),wt=function(e){var t=e.children,n=Object(Le.a)(e,ht);kt(n,"CollapsibleContextProvider");var a=Object(Ee.useState)(Object(Ue.a)({},Ot.collapsible.descr,!0)),r=Object(we.a)(a,2),c=r[0],o=r[1];return je.a.createElement(yt.Provider,{value:{collapsibles:c,setCollapsibles:o}},t)},xt=function(e){switch(e){case"Gallery":return"galleries";default:return"".concat(e.toLowerCase(),"s")}},kt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(n="string"===typeof n?n:t.replace(/\W/g,"")).length>0&&(window[n]=e),console.log("+++ ".concat(t,":"),e)},_t={borderWidth:"10px",bottomDrawerHeight:"100px",breadcrumbsHeight:"30px",blue:"#6aa3e9",darkGrey:"#605d5d",lightGrey:"#988b8b",red:"red"},Ct=je.a.createContext({}),St=function(e){var t=e.children,n=Object(Le.a)(e,Et);kt(n,"TwofoldContextProvider");var a=n.currentUser,r=n.setCurrentUser,c=n.layout,o=n.setLayout,i=n.loginModalOpen,l=n.setLoginModalOpen,s=Object(Ee.useState)(!1),u=Object(we.a)(s,2),m=u[0],d=u[1],p=Object(Ee.useState)({}),b=Object(we.a)(p,2),f=b[0],g=b[1],h=Object(Ee.useState)(!1),E=Object(we.a)(h,2),j=E[0],v=E[1],O=Object(Ee.useState)(!1),y=Object(we.a)(O,2),w=y[0],x=y[1],k=Object(Ee.useState)(1),_=Object(we.a)(k,2),C=_[0],S=_[1];return je.a.createElement(Ct.Provider,{value:{bottomDrawerOpen:m,setBottomDrawerOpen:d,currentUser:a,setCurrentUser:r,itemToUnlock:f,setItemToUnlock:function(e){f.id===e.id||i||g(e)},layout:c,setLayout:o,loginModalOpen:i,setLoginModalOpen:l,showItem:j,setShowItem:v,showUrl:w,setShowUrl:x,zoom:C,setZoom:S}},t)},Nt=Ce.b.div(s||(s=Object(Ie.a)(["\n  height: 100vh;\n"]))),Ut=n(272),Lt=(n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(273)),It=n(267),Dt=n(70),Mt=n.n(Dt),Tt=Ce.b.div(u||(u=Object(Ie.a)(["\n;"]))),Pt=Ce.b.div(m||(m=Object(Ie.a)(["\n  // border: 1px solid yellow;\n  position: absolute;\n  bottom: -10px;\n  left: 10px;\n"]))),Wt=function(e){var t=Object(Ee.useContext)(Ct),n=t.bottomDrawerOpen,a=t.layout,r=t.setBottomDrawerOpen;return a===Ot.layout_onecol?null:je.a.createElement(Ee.Fragment,null,je.a.createElement(Tt,{className:"BottomWrapper"},je.a.createElement(Pt,null,je.a.createElement(It.a,{"aria-label":"open drawer",onClick:function(){return r(!0)},edge:"start",className:"menu-btn"},je.a.createElement(Mt.a,{fontSize:"small",style:{color:"white"}}))),je.a.createElement(qt,null)),je.a.createElement(Lt.a,{anchor:"bottom",className:"Drawer",elevation:1,open:n,onClose:function(){return r(!1)},BackdropProps:{invisible:!0},variant:"persistent"},je.a.createElement("div",null,je.a.createElement(Ke,null),je.a.createElement("div",{onClick:function(){return r(!1)},style:{position:"absolute",left:0,bottom:0}},"[X]"))))},Ht=Ce.b.div(d||(d=Object(Ie.a)(["\n  // border: 1px solid red;\n\n  flex-grow: 1;\n\n  text-align: center;\n  font-size: 2em;\n\n\n"]))),Ft=Ce.b.div(p||(p=Object(Ie.a)(["\n  // border: 1px solid blue;\n\n  display: flex;\n  justify-content: center;\n  line-height: 2em;\n  padding: 2em 0;\n"]))),Rt=function(e){return je.a.createElement(Ft,null,je.a.createElement(Kt,{variant:Ot.variants.inline}),je.a.createElement(Ht,null,"My Local Guide"))},zt=Ce.b.div(b||(b=Object(Ie.a)(["\n  background: white;\n\n  overflow: hidden;\n  margin: 10px;\n  height: calc(100vh - ","px - ",");\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth/2,"px"):"0px"})),Bt=function(e){return je.a.createElement(zt,e)},At=Ce.b.div(f||(f=Object(Ie.a)(["\n  background: white;\n\n  overflow: hidden;\n  // margin: 10px;\n  height: calc(100vh - ","px - ",");\n"])),(function(e){return 2*e.borderWidth}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight-e.borderWidth/2,"px"):"0px"})),Gt=function(e){return je.a.createElement(At,e)},Vt=n(11),qt=(n(73),Vt.n,Vt.c,Vt.o,Vt.o,Vt.q,function(){return je.a.createElement(He.i,{type:"overlay"},je.a.createElement(He.b,null,je.a.createElement(He.l,{color:"primary"},je.a.createElement(He.k,null,"Menu"))),je.a.createElement(He.a,null,je.a.createElement("img",{src:"/assets/hero.png"}),je.a.createElement("h1",null,"what's here?")))}),Jt=n(268),Zt=n(269),Yt=n(270),Xt=(Ce.b.div(g||(g=Object(Ie.a)(["\n  // border: 1px solid green;\n"]))),Ce.b.div(h||(h=Object(Ie.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n"])))),Kt=(Ce.b.div(E||(E=Object(Ie.a)(["\n"]))),function(e){var t=je.a.useState(!1),n=Object(we.a)(t,2),a=n[0],r=n[1],c=Object(Ee.useState)(!1),o=Object(we.a)(c,2),i=(o[0],o[1],Object(Te.g)()),l=Object(Ee.useContext)(Ct),s=l.currentUser;l.setCurrentUser;return je.a.createElement(Ee.Fragment,null,e.variant===Ot.variants.floating?je.a.createElement(Jt.a,{onClick:function(){return r(!0)},style:{position:"absolute",top:0,left:0,margin:".5em"},"aria-label":"main menu"},je.a.createElement(Mt.a,null)):je.a.createElement(Mt.a,{onClick:function(){return r(!0)}}),je.a.createElement(Lt.a,{anchor:"left",open:a,onClose:function(){return r(!1)}},je.a.createElement(Xt,null,je.a.createElement(Zt.a,null,je.a.createElement(Yt.a,{button:!0,key:"newsfeed",onClick:function(){r(!1),i.push("/en")}},"Newsfeed"),je.a.createElement(Yt.a,{button:!0,key:"cities",onClick:function(){r(!1),i.push("/en/cities")}},je.a.createElement("span",null,"Cities")),s&&s.bookmarks.map((function(e,t){return je.a.createElement(Yt.a,{button:!0,key:t,onClick:function(){r(!1),i.push("/en/locations/show/".concat(e.slug))}},je.a.createElement("span",null,e.name))})),je.a.createElement(Yt.a,{button:!0,key:"account",onClick:function(){r(!1),i.push("/en/account")}},je.a.createElement("span",null,"Account"))))))}),Qt=Ce.b.div(j||(j=Object(Ie.a)(["\n  margin-top: .5em;\n"]))),$t=Object(Te.i)((function(e){var t=e.created_at,n=e.username,a=e.city,r=e.tags,c=void 0===r?[]:r;return je.a.createElement(Qt,null,je.a.createElement("span",{className:"date"}," On ",(t||"").substring(0,10)," "),n&&je.a.createElement(je.a.Fragment,null,"by ",je.a.createElement("span",{className:"user"}," ",n," ")),a&&je.a.createElement(je.a.Fragment,null,"in ",je.a.createElement("span",{className:"city",onClick:function(){e.history.push("/en/cities/travel-to/".concat(a.slug,"/show/newsfeed"))}}," ",a.name," ")),c&&c.map((function(e,t){return je.a.createElement("span",{key:t,className:"tags"},e.name)})))})),en=function(e){var t=e.rate,n=Object(Ee.useState)([]),a=Object(we.a)(n,2),r=a[0],c=a[1],o={0:Vt.x,1:Vt.w,2:Vt.v};return Object(Ee.useEffect)((function(){for(var e=new Array(5).fill(0),n=0;t>0;)e[n]=t<1?1:2,t--,n++;c(e)}),[]),je.a.createElement("div",{className:"rating"},r.map((function(e,t){return je.a.createElement(He.c,{key:t,className:"stars",icon:o[e]})})))},tn=(n(192),Ce.b.div(v||(v=Object(Ie.a)(["\n  display: inline;\n  cursor: pointer;\n"])))),nn=Ce.b.div(O||(O=Object(Ie.a)(["\n  display: flex;\n  justify-content: space-around;\n"]))),an=Ce.b.div(y||(y=Object(Ie.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),rn={overlay:{},content:{margin:"auto",maxWidth:"400px"}},cn=function(e){kt(e,"UnlockModal");var t=Object(Ee.useContext)(Ct),n=t.currentUser,a=t.setCurrentUser,r=t.itemToUnlock,c=t.setItemToUnlock,o=(t.loginModalOpen,t.setLoginModalOpen),i=(Object(Ee.useContext)(Ct),Me()),l=function(){var e=Object(ye.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.doUnlock({kind:r.item_type,id:r.id}),e.next=3,ft.post("".concat(Ne.a.apiOrigin).concat(t)).then((function(e){c({})})).catch((function(e){kt(e,"e19")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=Object(Ee.useRef)("init");return Object(Ee.useEffect)((function(){return function(){var e=Object(ye.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem(Ot.jwt_token),e.next=3,ft.get("".concat(Ne.a.apiOrigin).concat(i.myAccount(),"?jwt_token=").concat(t)).then((function(e){s.current&&a(e.data)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return s.current=null}}),[r.id]),r.id?je.a.createElement(Ae.a,{style:rn,ariaHideApp:!1,isOpen:!!r.id},je.a.createElement(an,null,je.a.createElement("h1",null,"Unlock this item?"),je.a.createElement(tn,{onClick:function(){return c(!1)}},"\xd7")),je.a.createElement("p",null,"To access this content, please unlock it first. It costs 1 (one) coin to unlock."),!!n&&je.a.createElement("p",null,"You have ",je.a.createElement("b",null,n.n_unlocks)," unlocks.")||je.a.createElement("p",null,"You have to be logged in to unlock content. ",je.a.createElement("a",{onClick:function(){o(!0),c(!1)}},"Please login.")),je.a.createElement(nn,null,!!n&&je.a.createElement(vt,{onClick:l},"Unlock"))):null},on=(n(129),Ce.b.div(w||(w=Object(Ie.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin: 1em 0px;\n"])))),ln=Ce.b.div(x||(x=Object(Ie.a)(["\n  // border: 1px solid red;\n\n  display: flex;\n  justify-content: center;\n\n  width: 50%;\n  text-align: center;\n  position: relative;\n  padding: 0.1em;\n"]))),sn=Object(Ce.b)(He.c)(k||(k=Object(Ie.a)(["\n  font-size: 2em;\n  color: ",";\n"])),(function(e){return e.theme.darkGrey})),un=Ce.b.div(_||(_=Object(Ie.a)(["\n  // border: 1px solid green;\n\n  padding: 0.5em;\n\n  color: ",";\n  font-size: 0.9em;\n  font-weight: 600;\n"])),(function(e){return e.theme.lightGrey})),mn=function(e){var t=Object(Ee.useState)([]),n=Object(we.a)(t,2),a=n[0],r=n[1],c=Object(Ee.useState)([]),o=Object(we.a)(c,2),i=o[0],l=o[1],s=Object(Ee.useState)(!1),u=Object(we.a)(s,2),m=u[0],d=u[1],p=Me(),b=Object(Te.g)();Object(Ee.useEffect)((function(){d(!0),p.getCities().then((function(e){d(!1),l(e),r(e)}))}),[]);return je.a.createElement(Ee.Fragment,null,je.a.createElement(Nt,{className:"cities"},je.a.createElement("h1",{className:"heading"},"Cities"),je.a.createElement("div",{className:"filter-section"},je.a.createElement("input",{className:"filter-input",onChange:function(e){var t=a.filter((function(t){return t.name.toLowerCase().indexOf(e.target.value.trim().toLowerCase())>-1}));l(t)}}),je.a.createElement(sn,{className:"filter-icon",icon:Vt.j})),je.a.createElement("div",{className:"container"},i.map((function(e,t){return je.a.createElement("div",{key:t,className:"cities",onClick:function(){return b.push(at.cityPath(e.slug))}},je.a.createElement("div",{className:"img-section"},je.a.createElement("span",{className:"bookmark"},je.a.createElement(sn,{className:"bookmark-icon",icon:Vt.b})),je.a.createElement("img",{className:"city-img",src:e.photo}),je.a.createElement("span",{className:"city-title"},e.name)),je.a.createElement(on,null,je.a.createElement(ln,null,je.a.createElement(un,null,e.n_reports),je.a.createElement(sn,{icon:Vt.n})),je.a.createElement(ln,null,je.a.createElement(un,null,e.n_galleries),je.a.createElement(sn,{icon:Vt.k})),je.a.createElement(ln,null,je.a.createElement(un,null,e.n_videos),je.a.createElement(sn,{icon:Vt.y}))))}))),"\xa0"),je.a.createElement(He.h,{isOpen:m,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3}))},dn=(n(74),Ce.b.div(C||(C=Object(Ie.a)(["\n  position: relative;\n  padding-top: 100%;\n  overflow: hidden;\n  z-index: 10;\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n\n  width: 100px;\n  height: 100px;\n"]))),Ce.b.div(S||(S=Object(Ie.a)(["\n"]))),Ce.b.div(N||(N=Object(Ie.a)(["\n  position: relative;\n"])))),pn=Ce.b.img(U||(U=Object(Ie.a)(["\n  width: 200px;\n"]))),bn=Ce.b.img(L||(L=Object(Ie.a)(["\n  position: absolute;\n  left: 200px;\n  top: 0;\n"]))),fn=Ce.b.img(I||(I=Object(Ie.a)(["\n  position: absolute;\n  left: 200px;\n  top: 100px;\n"]))),gn=function(e){var t=e.item;Object(Te.g)();return je.a.createElement(kn,{item:t},je.a.createElement(dn,null,!1,t.photos[0]&&je.a.createElement(pn,{src:t.photos[0].thumb_url}),t.photos[1]&&je.a.createElement(bn,{src:t.photos[1].thumb_url}),t.photos[2]&&je.a.createElement(fn,{src:t.photos[2].thumb_url}),!1))},hn=function(e){var t=e.item;return je.a.createElement(kn,{item:t})},En=function(e){kt(e,"NewsitemVideo");var t=e.item;return je.a.createElement(kn,{item:t},je.a.createElement("div",{className:"image-section"},t.youtube_id?je.a.createElement("iframe",{className:"iframe",width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(t.youtube_id),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):je.a.createElement("video",{width:"100%",preload:"metadata",height:"auto",controls:!0},je.a.createElement("source",{src:t.url,type:"video/mp4"}))))},jn=Ce.b.div(D||(D=Object(Ie.a)(["\n  // border: 2px solid yellow;\n\n  // margin-bottom: 2em;\n"]))),vn=function(e){kt(e,"Newsitems");var t=e.newsitems;return t&&t.length?je.a.createElement(jn,null,t.map((function(e,t){var n=e.premium_tier||0;return je.a.createElement("div",{key:t,className:"items premium-".concat(n)},e.item_type===Ot.item_types.gallery&&je.a.createElement(gn,{item:e}),e.item_type===Ot.item_types.report&&je.a.createElement(hn,{item:e}),e.item_type===Ot.item_types.video&&je.a.createElement(En,{item:e}),!e.item_type&&je.a.createElement(Cn,{item:e}))}))):je.a.createElement("div",null,"No Newsitems")},On=["children"],yn=Ce.b.div(M||(M=Object(Ie.a)(["\n  display: flex;\n  flex-direction: column;\n\n  margin-left: 0.5em;\n"]))),wn=Ce.b.div(T||(T=Object(Ie.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n\n  // padding: 0 1em;\n"]))),xn=Ce.b.h2(P||(P=Object(Ie.a)(["\n  margin-top: 0;\n"]))),kn=function(e){var t=e.children,n=Object(Le.a)(e,On),a=n.item,r=a.item_type,c=a.slug,o=Object(Te.g)(),i=Object(Ee.useContext)(Ct),l=(i.itemToUnlock,i.setItemToUnlock),s=i.layout,u=(i.showItem,i.setShowItem);return je.a.createElement(jt,Object.assign({boxShadow:2},n,{onClick:function(){a.is_premium&&!a.is_purchased?l(a):s===Ot.layout_mapui?u(a):o.push("/en/".concat(xt(r),"/show/").concat(c))},cursor:"pointer"}),t,je.a.createElement(wn,null,je.a.createElement(_n,a),je.a.createElement(yn,null,je.a.createElement(xn,null,a.name),je.a.createElement($t,a))),je.a.createElement("p",{className:"subhead",dangerouslySetInnerHTML:{__html:a.subhead}}))},_n=function(e){var t=e.is_purchased,n=e.item_type,a=e.premium_tier;if(t)return je.a.createElement("img",{className:"icon",src:"/assets/icons/glasses.png",alt:""});if(a>0)return je.a.createElement("img",{className:"icon",src:"/assets/icons/gem.png",alt:""});switch(n){case Ot.item_types.gallery:return je.a.createElement("img",{className:"icon",src:"/assets/icons/gallery.png",alt:""});case Ot.item_types.report:return je.a.createElement("img",{className:"icon",src:"/assets/icons/report.png",alt:""});case Ot.item_types.video:return je.a.createElement("img",{className:"icon",src:"/assets/newsfeed/video_icon.svg",alt:""});default:return"unknown kind"}},Cn=function(e){kt(e,"GenericNewsitem");var t=e.item;return je.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}})},Sn=(n(193),Ce.b.p(W||(W=Object(Ie.a)(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: ",";\n  font-size: 14px;\n"])),(function(e){return e.theme.darkGrey}))),Nn=Ce.b.div(H||(H=Object(Ie.a)([""]))),Un=Ce.b.div(F||(F=Object(Ie.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),Ln=function(){return je.a.createElement(Un,null,je.a.createElement("img",{className:"forward-arrow",src:"/assets/16x16/arrow-right.png"}))},In=Ce.b.div(R||(R=Object(Ie.a)(["\n  display: flex;\n"]))),Dn=Ce.b.div(z||(z=Object(Ie.a)(["\n  font-size: 1.5em;\n"]))),Mn=Ce.b.div(B||(B=Object(Ie.a)(["\n  width: 100vw;\n  padding: 1em;\n  margin-bottom: 0.5em;\n  border-bottom: 1px solid #e3d3d3;\n  box-shadow: 0px 1px 5px 1px #b3aeae;\n  background-color: white;\n  position: relative;\n\n  display: flex;\n  justify-content: space-between;\n\n  img.thumb {\n    border-radius: 10px;\n  }\n\n  > div {\n    // border: 1px solid red;\n  }\n"]))),Tn=function(e){kt(e,"Venues");var t=Object(Ee.useState)(e.venues),n=Object(we.a)(t,2),a=n[0],r=n[1];return je.a.createElement("div",{className:"venues-section"},je.a.createElement("div",null,je.a.createElement("div",{className:"filter-section"},je.a.createElement("input",{className:"filter-input",onChange:function(t){var n=e.venues.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));r(n)}}),je.a.createElement(He.c,{className:"filter-icon",icon:Vt.j}))),je.a.createElement("div",{className:"container"},a.map((function(e,t){return je.a.createElement(Mn,{key:t},je.a.createElement(In,null,je.a.createElement(Nn,null,je.a.createElement("img",{style:{paddingRight:"1em"},className:"thumb",src:e.photo})),je.a.createElement(Nn,null,je.a.createElement(Dn,null,e.name),je.a.createElement("div",{className:"rating-section"},je.a.createElement(en,{rate:3.5}),je.a.createElement("span",{className:"reviews"},"5 reviews")),je.a.createElement("div",{className:"tags-section"},e.tags.map((function(e,t){return je.a.createElement("span",{key:t,className:"tags"},e.name)}))),je.a.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.subhead}}),e.address&&je.a.createElement(Sn,null,e.address))),je.a.createElement(Ln,null))}))))},Pn=function(e){kt(e,"CitiesShow");var t=e.match,n=Me(),a=Object(Te.g)(),r=at.cityPath(t.params.name),c=Object(Te.h)(),o=Object(Ee.useState)(null),i=Object(we.a)(o,2),l=i[0],s=i[1],u=Object(Ee.useState)(!1),m=Object(we.a)(u,2),d=m[0],p=m[1],b=Object(Ee.useRef)("init");return Object(Ee.useEffect)((function(){return p(!0),n.getCity(t.params.name).then((function(e){b.current&&(s(e.data.city),p(!1))})),function(){return b.current=!1}}),[t.params.name]),je.a.createElement(Nt,null,l&&je.a.createElement("div",{className:"wrapper"},je.a.createElement("div",{className:"city-show"},je.a.createElement("header",{style:{backgroundImage:"url(".concat(l.hero_img,"}"),backgroundSize:"contain"}}),je.a.createElement("section",{className:"section-one"},je.a.createElement(He.c,{icon:Vt.p,className:"location"}),je.a.createElement("h1",{className:"city-name"},l.name),je.a.createElement("div",{className:"status"},je.a.createElement("div",{className:"status-grid"},je.a.createElement(He.c,{className:"info-icon",icon:Vt.n}),je.a.createElement("span",{className:"numbers"},l.n_reports)),je.a.createElement("div",{className:"status-grid"},je.a.createElement(He.c,{className:"info-icon",icon:Vt.k}),je.a.createElement("span",{className:"numbers"},l.n_galleries)),je.a.createElement("div",{className:"status-grid mid"},je.a.createElement(He.c,{className:"info-icon",icon:Vt.y}),je.a.createElement("span",{className:"numbers "},l.n_videos)))),je.a.createElement("section",{className:"section-three"},je.a.createElement("div",{className:"menu-option",onClick:function(){return a.push(at.cityPath(t.params.name))}},je.a.createElement("img",{src:"/assets/newsfeed-icon.svg",alt:"Newsfeed"}),je.a.createElement("p",{className:"".concat(c.pathname==r?"selected":""," menu-item")},"Newsfeed")),je.a.createElement("div",{className:"menu-option",onClick:function(){return a.push(at.cityVenuesPath(t.params.name))}},je.a.createElement("img",{src:"/assets/venue-icon.svg",alt:"Venues"}),je.a.createElement("p",{className:"".concat(c.pathname.includes("venues")?"selected":""," menu-item")},"Venues"))),je.a.createElement(Te.d,null,je.a.createElement(Te.b,{exact:!0,path:"".concat(t.url,"/venues"),render:function(){return je.a.createElement(Tn,{venues:l.venues})}}),je.a.createElement(Te.b,{exact:!0,path:t.url,render:function(){return je.a.createElement(vn,{newsitems:l.newsitems})}})))),je.a.createElement(He.h,{isOpen:d,onDidDismiss:function(){return p(!1)},message:"Please wait...",duration:5e3}),je.a.createElement("br",null),je.a.createElement("br",null),je.a.createElement("br",null))},Wn=(n(194),function(e){kt(e,"GalleriesShow");var t=e.match,n=Object(Ee.useState)(!1),a=Object(we.a)(n,2),r=(a[0],a[1],Object(Ee.useState)({})),c=Object(we.a)(r,2),o=c[0],i=c[1],l=Object(Ee.useContext)(Ct),s=(l.currentUser,l.setCurrentUser,l.itemToUnlock),u=l.setItemToUnlock,m=(l.loginModalOpen,l.setLoginModalOpen,Object(Ee.useRef)("init")),d=function(){var e=Object(ye.a)(ke.a.mark((function e(){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(Ot.jwt_token),e.next=3,ft.get("/api/galleries/view/".concat(t.params.slug),{params:{jwt_token:n}}).then((function(e){if(m.current){var t=e.data.gallery;t.is_premium&&!t.is_purchased?u(t):i(e.data.gallery)}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ee.useEffect)((function(){return d(),function(){m.current=null}}),[o.id,s.id]),je.a.createElement(Ee.Fragment,null,je.a.createElement("div",{className:"gallery-show"},je.a.createElement("div",{className:"narrow"},je.a.createElement("h1",{className:"heading"},je.a.createElement("img",{src:"/assets/newsfeed/photos_icon.png"}),je.a.createElement("span",{className:"title"},o.name)),je.a.createElement($t,{item:o}),je.a.createElement("div",{className:"thumbs"},o.photos&&o.photos.map((function(e,t){return je.a.createElement("div",{className:"card",key:t},je.a.createElement("div",{className:"card-inner"},je.a.createElement(He.d,{src:e.thumb_url})))})))),je.a.createElement("div",{className:"full-img-section"},o.photos&&o.photos.map((function(e,t){return je.a.createElement("div",{className:"item",key:t},je.a.createElement("img",{src:e.large_url}))})))))}),Hn=function(e){var t=Object(Ee.useState)(null),n=Object(we.a)(t,2),a=n[0],r=n[1],c=Object(Ee.useState)(!1),o=Object(we.a)(c,2),i=o[0],l=o[1];return Object(Ee.useEffect)((function(){l(!0);var e=localStorage.getItem("jwtToken");ft.get("/api/my/galleries",{params:{jwt_token:e}}).then((function(e){kt(e.data,"MyGalleries data"),r(e.data),l(!1)}))}),[]),je.a.createElement(je.a.Fragment,null,je.a.createElement(He.h,{isOpen:i,onDidDismiss:function(){return l(!1)},message:"Please wait...",duration:5e3}),a&&a.length&&a.map((function(e){return je.a.createElement(gn,{key:e.id,data:e})})))},Fn=Ce.b.div(A||(A=Object(Ie.a)(["\n  padding: 0.5em;\n"]))),Rn=Ce.b.div(G||(G=Object(Ie.a)(["\n  padding: 0.5em 0;\n"]))),zn=Ce.b.div(V||(V=Object(Ie.a)(["\n  border: ","px solid cyan;\n\n  display: flex;\n  z-index: 1;\n\n  height: ",";\n"])),(function(e){return e.debug?"1":"0"}),(function(e){return e.breadcrumbsHeight})),Bn=function(e){kt(e,"Breakcrumbs");var t=Object(Ee.useContext)(Ct).layout,n=Object(Te.g)(),a=[];return e.breadcrumbs.map((function(t,r){r+1===e.breadcrumbs.length?a.push(je.a.createElement(Fn,{key:r},t.name)):(a.push(je.a.createElement(Fn,{key:r,style:{textDecoration:"underline"},onClick:function(){return n.push("/en/locations/show/".concat(t.slug))}},t.name)),a.push(je.a.createElement(Rn,{key:"".concat(r,"-divider")},">")))})),je.a.createElement(zn,Object.assign({},_t,{debug:Ne.a.debug,className:"Breadcrumbs"}),t===Ot.layout_mapui&&je.a.createElement(Kt,{variant:Ot.variants.inline}),a)},An=Ce.b.div(q||(q=Object(Ie.a)(["\n  padding: 2em 0;\n"]))),Gn=function(e){kt(e,"ReportsShow");var t=Object(Ee.useState)({}),n=Object(we.a)(t,2),a=n[0],r=n[1],c=Me(),o=(JSON.parse(localStorage.getItem("current_user")),function(){var t=Object(ye.a)(ke.a.mark((function t(){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:kt(null,"getting report..."),ft.get(c.reportsGet(e.match.params.slug)).then((function(e){return e.data})).then((function(e){kt(e,"got report"),r(e.report)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(Ee.useEffect)((function(){o()}),[]),je.a.createElement(An,null,je.a.createElement(jt,{boxShadow:2},je.a.createElement("h1",null,"Report ",a.name),je.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:a.description}})))},Vn=function(e){kt(e,"ItemModal");var t=e.item,n=Object(Ee.useContext)(Ct),a=n.showItem,r=n.setShowItem;return je.a.createElement(Ae.a,{isOpen:!!a},je.a.createElement("h1",{onClick:function(){return r(!1)}},"[x]"),t.item_type===Ot.item_types.report&&je.a.createElement(Gn,{match:{params:{slug:t.reportname}}}),t.item_type===Ot.item_types.gallery&&je.a.createElement(Wn,{match:{params:{slug:t.slug}}}))},qn=Ce.b.div(J||(J=Object(Ie.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]))),Jn=function(e){var t=e.item;return je.a.createElement(qn,{dangerouslySetInnerHTML:{__html:t.description}})},Zn=function(e){var t=Object(Ee.useContext)(Ct),n=t.showUrl,a=t.setShowUrl;return je.a.createElement(Ae.a,{ariaHideApp:!1,isOpen:!!n},je.a.createElement("span",{onClick:function(){a(!1)}},"[x]"),je.a.createElement("iframe",{height:"100%",style:{width:"100%",height:"100%"},scrolling:"yes",src:e.src,frameBorder:"no",allowtransparency:"true",allowFullScreen:!0}))},Yn=Ce.b.div(Z||(Z=Object(Ie.a)(["\n  border: ","px solid blue;\n\n  background: #dedede;\n  flex: 50%;\n  overflow: scroll;\n\n  height: calc(100vh -\n    ",");\n"])),(function(e){return e.debug?"1":"0"}),(function(e){return e.bottomDrawerOpen?"calc(".concat(e.bottomDrawerHeight,"+3*").concat(e.borderWidth,")"):"calc(4*".concat(e.borderWidth,")")})),Xn=Ce.b.div(Y||(Y=Object(Ie.a)(["\n  border: ","px solid green;\n\n  background: #dedede;\n\n  padding: 1em;\n  flex: 50%;\n  overflow: scroll;\n  height: calc(100vh -\n    ",");\n"])),(function(e){return e.debug?"1":"0"}),(function(e){return e.bottomDrawerOpen?"calc(".concat(e.bottomDrawerHeight,"+3*").concat(e.borderWidth,")"):"calc(4*".concat(e.borderWidth,")")})),Kn=Ce.b.div(X||(X=Object(Ie.a)(["\n  display: flex;\n  position: relative;\n"]))),Qn=function(e){kt(e,"LocationsShow");var t=e.match,n=Object(Ee.useState)(!1),a=Object(we.a)(n,2),r=a[0],c=a[1],o=Object(Ee.useState)(null),i=Object(we.a)(o,2),l=i[0],s=i[1],u=Object(Ee.useContext)(Ct),m=u.showItem,d=(u.setShowItem,u.showUrl),p=(u.setShowUrl,Object(Ee.useRef)("init"));Object(Ee.useEffect)((function(){c(!0);var e=localStorage.getItem("jwt_token");return ft.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(p.current===t.params.slug)return null;s(e.data.map),c(!1)})).finally((function(){})),function(){p.current=t.params.slug}}),[t.params.slug]);var b=Object(Ee.useContext)(Ct).bottomDrawerOpen;return je.a.createElement(Kn,null,je.a.createElement(Yn,Object.assign({className:"Left",bottomDrawerOpen:b},_t,{debug:Ne.a.debug}),r&&je.a.createElement("i",null,"Loading Left..."),l&&je.a.createElement(Bn,l),l&&je.a.createElement(ma,{map:l.map?l.map:l})),je.a.createElement(Xn,Object.assign({className:"Right",bottomDrawerOpen:b},_t,{debug:Ne.a.debug}),r&&je.a.createElement("i",null,"Loading Right..."),l&&je.a.createElement(Ee.Fragment,null,je.a.createElement(pa,{markers:l.map?l.map.markers:l.markers}),je.a.createElement(Jn,{item:l}),l.newsitems&&l.newsitems.length&&je.a.createElement(vn,{newsitems:l.newsitems})||null)),d&&je.a.createElement(Zn,{src:d}),m&&je.a.createElement(Vn,{item:m}))},$n=Object(Ce.b)(mt)(K||(K=Object(Ie.a)(["\n  margin: 0;\n  padding: 0;\n"]))),ea=Ce.b.div(Q||(Q=Object(Ie.a)(["\n  // border: 1px solid red;\n\n  padding: 10px;\n"]))),ta=function(e){var t=e.item;return je.a.createElement(ea,{dangerouslySetInnerHTML:{__html:t.description}})},na=(Ce.b.div($||($=Object(Ie.a)(["\n  // border: 1px solid red;\n\n  position: relative;\n"]))),Ce.b.div(ee||(ee=Object(Ie.a)(["\n  // border: 1px solid orange;\n\n  position: absolute;\n  top: 0;\n  left: calc(100vw - 80px);\n  background: white;\n  padding: 5px;\n\n  display: flex;\n  flex-direction: column;\n  z-index: 10;\n"]))),Ce.b.div(te||(te=Object(Ie.a)(["\n  // border: 2px solid brown;\n\n  text-align: center;\n  display: block;\n\n  position: relative; /* required for mobile, so that zoomCtrl, etc are inside the collapsible div */\n\n  overflow: scroll;\n  max-height: 80vh; // @TODO: huh?\n"]))),Ce.b.div(ne||(ne=Object(Ie.a)(["\n  // border: 1px solid yellow;\n\n  margin-top: 2em;\n"])))),aa=function(e){kt(e,"LocationsShowMobile");var t=e.match,n=Object(Ee.useState)(!1),a=Object(we.a)(n,2),r=a[0],c=a[1],o=Object(Ee.useState)(null),i=Object(we.a)(o,2),l=i[0],s=i[1],u=Object(Ee.useRef)("init");Object(Ee.useEffect)((function(){c(!0);var e=localStorage.getItem("jwt_token");return ft.get("/api/maps/view/".concat(t.params.slug),{params:{jwt_token:e}}).then((function(e){if(!u.current)return null;s(e.data.map),kt(e.data.map,"setLocation"),c(!1)})).finally((function(){})),function(){}}),[t.params.slug]);var m=l?l.markers.length?l.markers:l.map.markers:null;return je.a.createElement(na,{className:"Root"},r&&je.a.createElement("i",null,"Loading..."),l&&je.a.createElement(Bn,l),l&&je.a.createElement($n,{slug:"map-sec",label:l.labels.map,className:"CollapsibleNoMargins"},l&&je.a.createElement(oa,{map:l.map||l})),m&&m.length&&je.a.createElement(mt,{slug:"markers-sec",label:l.labels.marker},je.a.createElement(pa,{markers:m}))||null,l&&l.description&&je.a.createElement(mt,{config:l.config.description,slug:Ot.collapsible.descr,label:l.labels.description},je.a.createElement(ta,{item:l}))||null,l&&l.newsitems.length&&je.a.createElement(mt,{slug:"news-sec",label:l.labels.newsitems},je.a.createElement(vn,{newsitems:l.newsitems}))||null)},ra=Ce.b.div(ae||(ae=Object(Ie.a)([""]))),ca=Ce.b.div(re||(re=Object(Ie.a)(["\n  // border: 1px solid green;\n\n  scroll: none;\n"]))),oa=function(e){kt(e,"Map2");var t=e.map,n=Object(Te.g)(),a=gt(),r=Object(we.a)(a,2),c=r[0],o=(r[1],Object(Ee.useRef)(null)),i=Object(Ee.useContext)(Ct),l=i.zoom,s=i.setZoom;Object(Ee.useEffect)((function(){o.current&&s(t.w/o.current.offsetWidth)}),[o.current,c]);var u=[];return e.map.markers.map((function(e,t){var a=je.a.createElement("div",{key:t,onClick:function(){return n.push("/en/locations/show/".concat(e.slug))},style:{position:"absolute",top:e.y/l,left:e.x/l}},je.a.createElement("img",{src:e.img_path,style:{display:"block",maxWidth:"".concat(e.w/l,"px"),maxHeight:"".concat(e.h/l,"px"),width:"auto",height:"auto"}}));u.push(a)})),je.a.createElement(ca,{className:"MapWrapperNoZoom",ref:o},je.a.createElement(ra,{style:{display:"inline-block",position:"relative"}},je.a.createElement("img",{src:t.img_path,style:{width:"".concat(t.w/l,"px"),height:"".concat(t.h/l,"px")}}),u))},ia=Ce.b.div(ce||(ce=Object(Ie.a)(["\n  // border: 3px solid green;\n\n  text-align: center;\n  display: block;\n\n  position: relative;\n  overflow: auto;\n\n  height: calc(100vh - "," -\n    ","); /* @TODO: it's not really 4 borders, it's 1 on top, and 2 but thick (collapsed) on bottom. */\n\n"])),(function(e){return e.breadcrumbsHeight}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight," - 2*").concat(e.borderWidth):"4*".concat(e.borderWidth)})),la=Ce.b.div(oe||(oe=Object(Ie.a)(["\n  // border: 2px solid cyan;\n\n  display: inline-block;\n  position: relative;\n\n"]))),sa=Ce.b.div(ie||(ie=Object(Ie.a)(["\n  border: ","px solid red;\n\n  position: relative;\n  overflow: auto;\n  height: calc(100vh - "," -\n    ","); /* @TODO: it's not really 4 borders, it's 1 on top, and 2 but thick (collapsed) on bottom. */\n"])),(function(e){return e.debug?"1":"0"}),(function(e){return e.breadcrumbsHeight}),(function(e){return e.bottomDrawerOpen?"".concat(e.bottomDrawerHeight," - 2*").concat(e.borderWidth):"4*".concat(e.borderWidth)})),ua=function(e){var t=Object(Ee.useContext)(Ct),n=t.zoom,a=t.setZoom;return je.a.createElement("div",{style:{position:"absolute",top:0,right:0,zIndex:1,background:"white",padding:"5px",display:"flex",flexDirection:"column"}},je.a.createElement("span",{onClick:function(){a(n/2)}},"[+]"),je.a.createElement("span",{onClick:function(){a(2*n)}},"[-]"),je.a.createElement("span",{onClick:function(){a(1)}},"[1]"))},ma=function(e){var t=e.map,n=Object(Ee.useContext)(Ct),a=n.bottomDrawerOpen,r=(n.setBottomDrawerOpen,n.showUrl,n.setShowUrl),c=n.zoom,o=(n.setZoom,Object(Ee.useRef)(null));kt(o,"div1Ref");var i=Object(Te.g)();Object(Ee.useEffect)((function(){o.current.scroll({top:200,left:200,behavior:"smooth"})}),[]);var l=[];return t.markers.map((function(e,t){var n=je.a.createElement("div",{key:t,onClick:function(){return e.url?r(e.url):i.push("/en/locations/show/".concat(e.slug))},style:{position:"absolute",top:c>1?(e.y-e.centerOffsetY)/c:e.y/c-e.centerOffsetY,left:c>1?(e.x-e.centerOffsetX)/c:e.x/c-e.centerOffsetX}},je.a.createElement("img",{src:e.img_path,style:{display:"block",maxWidth:"".concat(e.w/c,"px"),maxHeight:"".concat(e.h/c,"px"),width:"auto",height:"auto"}}));l.push(n)})),je.a.createElement(sa,Object.assign({},_t,{bottomDrawerOpen:a,debug:Ne.a.debug,className:"MapPanel"}),je.a.createElement(ua,null),je.a.createElement(ia,Object.assign({},_t,{bottomDrawerOpen:a}),je.a.createElement(la,{ref:o,style:{width:"".concat(t.w/c,"px"),height:"".concat(t.h/c,"px")}},je.a.createElement("img",{src:t.img_path,style:{width:"".concat(t.w/c,"px"),height:"".concat(t.h/c,"px")}}),l)))},da=Ce.b.div(le||(le=Object(Ie.a)(["\n  margin: 10px;\n  max-width: 20vw;\n"]))),pa=function(e){kt(e,"MarkersList");var t=Object(Te.g)(),n=Object(Ee.useContext)(Ct),a=(n.showUrl,n.setShowUrl),r=[];return e.markers.map((function(e,n){r.push(je.a.createElement(da,{key:n,onClick:function(){return function(e){e.url?a(e.url):t.push("/en/locations/show/".concat(e.slug))}(e)}},je.a.createElement("img",{src:e.title_img_path}),je.a.createElement("br",null),e.name))})),je.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r)},ba=["features","label"],fa=Ce.b.div(se||(se=Object(Ie.a)([""]))),ga=function(e){var t=e.features,n=e.label,a=Object(Le.a)(e,ba);kt(a,"Features");var r=[];return t.map((function(e){e.inner_html&&r.push(je.a.createElement(Fe.a,{item:!0,sm:3,dangerouslySetInnerHTML:{__html:e.inner_html}}))})),je.a.createElement(Ee.Fragment,null,n&&je.a.createElement(fa,null,n),je.a.createElement(Fe.a,{style:{marginBottom:"1em"},container:!0,spacing:2},r))},ha=(Ce.b.div(ue||(ue=Object(Ie.a)(["\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n"]))),Ce.b.div(me||(me=Object(Ie.a)(["\n  margin: 0;\n  padding-bottom: 1em;\n"])))),Ea=function(e){kt(e,"SitesShow");var t=Object(Ee.useState)({features:[],newsitems:[]}),n=Object(we.a)(t,2),a=n[0],r=n[1],c=Object(Ee.useState)(!1),o=Object(we.a)(c,2),i=o[0],l=o[1],s=Me(),u=Object(Ee.useRef)("init");return Object(Ee.useEffect)((function(){return s.applicationHome().then((function(e){if(!u.current)return null;kt(e,"setSite"),r(e),l(!1)})),function(){u.current=!1}}),[]),je.a.createElement(Ee.Fragment,null,je.a.createElement(ha,null,je.a.createElement(Rt,null),je.a.createElement(ga,{features:a.features}),je.a.createElement(vn,{newsitems:a.newsitems})),je.a.createElement(He.h,{isOpen:i,onDidDismiss:function(){return l(!1)},message:"Please wait...",duration:5e3}))},ja=(Ce.b.div(de||(de=Object(Ie.a)(["\n  height: 370px;\n  text-align: center;\n\n  img {\n    max-width: 100%;\n  }\n"]))),Ce.b.div(pe||(pe=Object(Ie.a)(["\n  margin: 0;\n  padding-bottom: 1em;\n"])))),va=function(e){kt(e,"SitesShow");var t=Object(Ee.useState)({features:[],newsitems:[]}),n=Object(we.a)(t,2),a=n[0],r=n[1],c=Object(Ee.useState)({features:[]}),o=Object(we.a)(c,2),i=o[0],l=o[1],s=Object(Ee.useState)({features:[]}),u=Object(we.a)(s,2),m=u[0],d=u[1],p=Object(Ee.useState)({features:[]}),b=Object(we.a)(p,2),f=b[0],g=b[1],h=Object(Ee.useState)(!1),E=Object(we.a)(h,2),j=E[0],v=E[1],O=Me(),y=Object(Ee.useRef)("init");return Object(Ee.useEffect)((function(){return O.applicationHome().then((function(e){if(!y.current)return null;kt(e,"setSite"),r(e)})),O.getTag({slug:"interesting-locations"}).then((function(e){if(!y.current)return null;kt(e,"setInterestingLocations"),g(e)})),O.getTag({slug:"home-row-1"}).then((function(e){if(!y.current)return null;d(e)})),O.getTag({slug:"art"}).then((function(e){if(!y.current)return null;l(e)})),function(){y.current=!1}}),[]),je.a.createElement(Ee.Fragment,null,je.a.createElement(ja,null,je.a.createElement(Rt,null),je.a.createElement(ga,{features:f.features,label:"Interesting Locations"}),je.a.createElement(ga,{features:m.features,label:"Interesting Tags"}),je.a.createElement(ga,{features:i.features,label:"art"}),je.a.createElement(vn,{newsitems:a.newsitems})),je.a.createElement(He.h,{isOpen:j,onDidDismiss:function(){return v(!1)},message:"Please wait...",duration:5e3}))},Oa=n(271),ya=Object(Oa.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},redBorder:{border:"1px solid red"},root:{flexGrow:1,overflow:"scroll",height:"100vh"}}})),wa=Ce.b.div(be||(be=Object(Ie.a)(["\n  border-bottom: 1px solid red;\n"]))),xa=function(e){kt(e,"Video");Me();var t=e.item;return je.a.createElement(wa,{key:e.idx},je.a.createElement("h5",null,"Video ",t.name),je.a.createElement("p",null,"created ",t.created_at),je.a.createElement("video",{controls:!0,preload:"metadata",type:"video/mp4",src:t.video_url,style:{maxWidth:"500px",maxHeight:"90vh"}}))},ka=function(){kt(Ne.a,"Videos component"),console.log(JSON.stringify(Ne.a));var e=Object(Ee.useState)([]),t=Object(we.a)(e,2),n=t[0],a=t[1],r=localStorage.getItem("jwtToken"),c=ya(),o=Me();return Object(Ee.useEffect)((function(){kt("posting..."),ft.post(o.myVideosPath,{jwtToken:r}).then((function(e){return e.data})).then((function(e){var t=e.videos;kt(t,"data"),a(t)}))}),[]),je.a.createElement(Ut.a,{maxWidth:"md"},je.a.createElement(Fe.a,{container:!0,className:c.root},je.a.createElement(Fe.a,{item:!0,xs:12},je.a.createElement("h2",null,"My Videos")),je.a.createElement(Fe.a,{item:!0,xs:12},n&&n.map((function(e,t){return je.a.createElement(xa,{key:t,item:e})})))))},_a=Ce.b.div(fe||(fe=Object(Ie.a)(["\n  // border: 1px solid #741741;\n\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]))),Ca=function(e){kt(e,"AppDesktop");e.currentUser,e.setCurrentUser,e.loginModalOpen,e.setLoginModalOpen,Me();var t=Object(Ee.useState)(Ot.layout_onecol),n=Object(we.a)(t,2),a=n[0],r=n[1],c=function(e){switch(a){case Ot.layout_onecol:return je.a.createElement(Ut.a,Object.assign({maxWidth:"md"},e));case Ot.layout_mapui:return je.a.createElement(Bt,e)}},o=function(e){return Object(Ee.useEffect)((function(){e.layout?r(e.layout):r(Ot.layout_onecol)}),[e.layout]),je.a.createElement(Te.b,e)};return je.a.createElement(Re.a,null,je.a.createElement(We.a,null),je.a.createElement(St,Object.assign({},e,{layout:a,setLayout:r}),je.a.createElement(_a,null,je.a.createElement(c,null,je.a.createElement(Te.d,{id:"main",main:!0},je.a.createElement(Te.a,{exact:!0,from:"/",to:"/en"}),je.a.createElement(o,{exact:!0,path:"/en"},je.a.createElement(va,null)),je.a.createElement(o,{exact:!0,path:"/en/account",component:ze}),je.a.createElement(o,{exact:!0,path:"/en/account/my/videos",component:ka}),je.a.createElement(o,{exact:!0,path:"/en/account/my/galleries",component:Hn}),je.a.createElement(o,{exact:!0,path:"/en/cities",component:mn}),je.a.createElement(o,{path:"/en/cities/travel-to/:name",component:Pn}),je.a.createElement(o,{exact:!0,path:"/en/galleries/show/:slug",component:Wn}),je.a.createElement(o,{exact:!0,path:"/en/reports/show/:slug",component:Gn}),je.a.createElement(o,{exact:!0,path:"/en/locations/show/:slug",component:Qn,layout:Ot.layout_mapui})))),je.a.createElement(Wt,null),je.a.createElement(cn,null),je.a.createElement(Ge,null)))},Sa=Ce.b.div(ge||(ge=Object(Ie.a)(["\n\n\n  background: #dedede;\n  height: 100vh;\n  overflow: auto;\n"]))),Na=Object(Ce.b)(Ut.a)(he||(he=Object(Ie.a)(["\n\n  padding: 0;\n  height: 100vh;\n  overflow: scroll;\n"]))),Ua=function(e){kt(e,"AppMobile");e.currentUser,e.setCurrentUser;var t=Object(Ee.useState)(Ot.layout_onecol),n=Object(we.a)(t,2),a=n[0],r=n[1],c=je.a.useState(!1),o=Object(we.a)(c,2),i=o[0],l=o[1],s=je.a.useState(!1),u=Object(we.a)(s,2),m=(u[0],u[1],Object(Ee.useState)(1)),d=Object(we.a)(m,2),p=(d[0],d[1],Me(),function(e){switch(a){case Ot.layout_onecol:return je.a.createElement(Na,Object.assign({maxWidth:"md"},e));case Ot.layout_mapui:return je.a.createElement(Gt,Object.assign({},e,{bottomDrawerOpen:i,setBottomDrawerOpen:l}))}}),b=function(e){return Object(Ee.useEffect)((function(){e.layout?r(e.layout):r(Ot.layout_onecol)}),[e.layout]),je.a.createElement(Te.b,e)};return je.a.createElement(Re.a,null,je.a.createElement(St,Object.assign({},e,{layout:a,setLayout:r}),je.a.createElement(wt,null,a===Ot.layout_onecol&&je.a.createElement(Kt,{variant:Ot.variants.floating}),je.a.createElement(Sa,{className:"Root"},je.a.createElement(p,{className:"Container"},je.a.createElement(Te.d,{id:"main",main:!0},je.a.createElement(Te.a,{exact:!0,from:"/",to:"/en"}),je.a.createElement(b,{exact:!0,path:"/en"},je.a.createElement(Ea,null)),je.a.createElement(b,{exact:!0,path:"/en/account",component:ze}),je.a.createElement(b,{exact:!0,path:"/en/account/my/videos",component:ka}),je.a.createElement(b,{exact:!0,path:"/en/account/my/galleries",component:Hn}),je.a.createElement(b,{exact:!0,path:"/en/cities",component:mn}),je.a.createElement(b,{path:"/en/cities/travel-to/:name",component:Pn}),je.a.createElement(b,{exact:!0,path:"/en/galleries/show/:slug",component:Wn}),je.a.createElement(b,{exact:!0,path:"/en/reports/show/:slug",component:Gn}),je.a.createElement(b,{exact:!0,path:"/en/locations/show/:slug",component:aa,layout:Ot.layout_mapui})))),je.a.createElement(Wt,null),je.a.createElement(cn,null),je.a.createElement(Ge,null))))},La=function(e){kt(e,"AppWrapper");var t=Me(),n=Object(Ee.useState)(!1),a=Object(we.a)(n,2),r=a[0],c=a[1],o=Object(Ee.useState)(!1),i=Object(we.a)(o,2),l=i[0],s=i[1],u=Object(Ee.useRef)("init");Object(Ee.useEffect)((function(){return function(){var e=Object(ye.a)(ke.a.mark((function e(){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(Ot.jwt_token),e.next=3,ft.get("".concat(Ne.a.apiOrigin).concat(t.myAccount(),"?jwt_token=").concat(n)).then((function(e){u.current&&c(e.data)})).catch((function(e){kt(e,"e12"),"Request failed with status code 401"===e.message&&(Ne.a.requireLogin||"undefined"===typeof Ne.a.requireLogin)&&s(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return u.current=null}}),[r]);var m=Object(Ee.useState)(null),d=Object(we.a)(m,2),p=d[0],b=d[1];(function(){var e=Object(ye.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.a.getInfo();case 2:t=e.sent,b(t.operatingSystem);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();var f={currentUser:r,setCurrentUser:c,loginModalOpen:l,setLoginModalOpen:s};return p?je.a.createElement(Ce.a,{theme:_t},"ios android".includes(p)?je.a.createElement(Ua,f):je.a.createElement(Ca,f)):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Oe.a.render(je.a.createElement(La,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,n){},74:function(e,t,n){}},[[151,3,4]]]);
//# sourceMappingURL=main.09122e9d.chunk.js.map